"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7880],{30080:(e,t,a)=>{a.d(t,{k:()=>d,r:()=>i});let o="http://127.0.0.1:8000";function r(){return localStorage.getItem("auth_token")}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r(),o={"Content-Type":"application/json",...a&&{Authorization:"Token ".concat(a)},...t.headers};return await fetch(e,{...t,headers:o})}let d={async list(){let e=await s("".concat(o,"/api/workspaces/"));if(!e.ok)throw Error((await e.json().catch(()=>({detail:"Failed to list workspaces"}))).detail||"Failed to list workspaces");return(await e.json()).workspaces.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))},async get(e){let t=await s("".concat(o,"/api/workspaces/").concat(e,"/"));if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to get workspace"}))).detail||"Failed to get workspace");let a=await t.json();return{...a.workspace,createdAt:new Date(a.workspace.createdAt),updatedAt:new Date(a.workspace.updatedAt)}},async create(e){let t=await s("".concat(o,"/api/workspaces/"),{method:"POST",body:JSON.stringify({name:e,content:{nodes:[],edges:[]}})});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to create workspace"}))).detail||"Failed to create workspace");let a=await t.json();return{...a.workspace,createdAt:new Date(a.workspace.createdAt),updatedAt:new Date(a.workspace.updatedAt)}},async save(e,t){let a=await s("".concat(o,"/api/workspaces/").concat(e,"/"),{method:"PATCH",body:JSON.stringify({content:t})});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Failed to save workspace"}))).detail||"Failed to save workspace");let r=await a.json();return{...r.workspace,createdAt:new Date(r.workspace.createdAt),updatedAt:new Date(r.workspace.updatedAt)}},async rename(e,t){let a=await s("".concat(o,"/api/workspaces/").concat(e,"/"),{method:"PATCH",body:JSON.stringify({name:t})});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Failed to rename workspace"}))).detail||"Failed to rename workspace");let r=await a.json();return{...r.workspace,createdAt:new Date(r.workspace.createdAt),updatedAt:new Date(r.workspace.updatedAt)}},async delete(e){let t=await s("".concat(o,"/api/workspaces/").concat(e,"/"),{method:"DELETE"});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to delete workspace"}))).detail||"Failed to delete workspace")},async duplicate(e,t){let a=await s("".concat(o,"/api/workspaces/").concat(e,"/duplicate/"),{method:"POST",body:JSON.stringify({name:t})});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Failed to duplicate workspace"}))).detail||"Failed to duplicate workspace");let r=await a.json();return{...r.workspace,createdAt:new Date(r.workspace.createdAt),updatedAt:new Date(r.workspace.updatedAt)}},async getBySlug(e){let t=await s("".concat(o,"/api/workspaces/slug/").concat(e,"/"));if(!t.ok){let e=await t.json().catch(()=>({detail:"Workspace not found"}));throw Error(e.detail||e.error||"Workspace not found")}let a=await t.json();return{...a.workspace,createdAt:new Date(a.workspace.createdAt),updatedAt:new Date(a.workspace.updatedAt),publishedAt:a.workspace.publishedAt?new Date(a.workspace.publishedAt):void 0,media:(a.workspace.media||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))}},async publish(e,t){let a=await s("".concat(o,"/api/workspaces/").concat(e,"/publish/"),{method:"POST",body:JSON.stringify({description:t})});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Failed to publish workspace"}))).detail||"Failed to publish workspace");let r=await a.json();return{...r.workspace,createdAt:new Date(r.workspace.createdAt),updatedAt:new Date(r.workspace.updatedAt),publishedAt:r.workspace.publishedAt?new Date(r.workspace.publishedAt):void 0,media:(r.workspace.media||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))}},async unpublish(e){let t=await s("".concat(o,"/api/workspaces/").concat(e,"/unpublish/"),{method:"POST"});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to unpublish workspace"}))).detail||"Failed to unpublish workspace");let a=await t.json();return{...a.workspace,createdAt:new Date(a.workspace.createdAt),updatedAt:new Date(a.workspace.updatedAt),publishedAt:a.workspace.publishedAt?new Date(a.workspace.publishedAt):void 0,media:(a.workspace.media||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))}},async uploadMedia(e,t,a,s,d){let i=new FormData;i.append("file",t),i.append("mediaType",a),s&&i.append("title",s),d&&i.append("thumbnail",d);let n=r(),c=await fetch("".concat(o,"/api/workspaces/").concat(e,"/upload_media/"),{method:"POST",headers:{...n&&{Authorization:"Token ".concat(n)}},body:i});if(!c.ok)throw Error((await c.json().catch(()=>({detail:"Failed to upload media"}))).detail||"Failed to upload media");let l=await c.json();return{...l.media,createdAt:new Date(l.media.createdAt)}},async deleteMedia(e,t){let a=await s("".concat(o,"/api/workspaces/").concat(e,"/media/").concat(t,"/"),{method:"DELETE"});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Failed to delete media"}))).detail||"Failed to delete media")},async importWorkspace(e,t){let a=await s("".concat(o,"/api/workspaces/").concat(e,"/import_workspace/"),{method:"POST",body:JSON.stringify({name:t})});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Failed to import workspace"}))).detail||"Failed to import workspace");let r=await a.json();return{...r.workspace,createdAt:new Date(r.workspace.createdAt),updatedAt:new Date(r.workspace.updatedAt),publishedAt:r.workspace.publishedAt?new Date(r.workspace.publishedAt):void 0,media:(r.workspace.media||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))}}},i={async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"recent",t=arguments.length>1?arguments[1]:void 0,a=new URLSearchParams({sort:e});t&&a.append("search",t);let r=await fetch("".concat(o,"/api/public-workspaces/?").concat(a));if(!r.ok)throw Error((await r.json().catch(()=>({detail:"Failed to load feed"}))).detail||"Failed to load feed");return(await r.json()).workspaces.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),publishedAt:e.publishedAt?new Date(e.publishedAt):void 0,media:(e.media||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))}))},async getBySlug(e){let t=await fetch("".concat(o,"/api/public-workspaces/").concat(e,"/"));if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Workspace not found"}))).detail||"Workspace not found");let a=await t.json();return{...a.workspace,createdAt:new Date(a.workspace.createdAt),updatedAt:new Date(a.workspace.updatedAt),publishedAt:a.workspace.publishedAt?new Date(a.workspace.publishedAt):void 0,media:(a.workspace.media||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))}}}},41498:(e,t,a)=>{a.d(t,{$:()=>n});var o=a(95155);a(12115);var r=a(32467),s=a(83101),d=a(64269);let i=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function n(e){let{className:t,variant:a,size:s,asChild:n=!1,...c}=e,l=n?r.DX:"button";return(0,o.jsx)(l,{"data-slot":"button",className:(0,d.cn)(i({variant:a,size:s,className:t})),...c})}},48493:(e,t,a)=>{a.d(t,{BK:()=>i,eu:()=>d,q5:()=>n});var o=a(95155);a(12115);var r=a(63366),s=a(64269);function d(e){let{className:t,...a}=e;return(0,o.jsx)(r.bL,{"data-slot":"avatar",className:(0,s.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...a})}function i(e){let{className:t,...a}=e;return(0,o.jsx)(r._V,{"data-slot":"avatar-image",className:(0,s.cn)("aspect-square size-full",t),...a})}function n(e){let{className:t,...a}=e;return(0,o.jsx)(r.H4,{"data-slot":"avatar-fallback",className:(0,s.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...a})}},64269:(e,t,a)=>{a.d(t,{Z:()=>d,cn:()=>s});var o=a(2821),r=a(75889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,o.$)(t))}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}},64814:(e,t,a)=>{a.d(t,{Cf:()=>p,Es:()=>w,L3:()=>k,c7:()=>u,lG:()=>i,rr:()=>h,zM:()=>n});var o=a(95155);a(12115);var r=a(93409),s=a(65229),d=a(64269);function i(e){let{...t}=e;return(0,o.jsx)(r.bL,{"data-slot":"dialog",...t})}function n(e){let{...t}=e;return(0,o.jsx)(r.l9,{"data-slot":"dialog-trigger",...t})}function c(e){let{...t}=e;return(0,o.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function l(e){let{className:t,...a}=e;return(0,o.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,d.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function p(e){let{className:t,children:a,showCloseButton:i=!0,...n}=e;return(0,o.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,o.jsx)(l,{}),(0,o.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,d.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[a,i&&(0,o.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,o.jsx)(s.A,{}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,o.jsx)("div",{"data-slot":"dialog-header",className:(0,d.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function w(e){let{className:t,...a}=e;return(0,o.jsx)("div",{"data-slot":"dialog-footer",className:(0,d.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function k(e){let{className:t,...a}=e;return(0,o.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,d.cn)("text-lg leading-none font-semibold",t),...a})}function h(e){let{className:t,...a}=e;return(0,o.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,d.cn)("text-muted-foreground text-sm",t),...a})}}}]);