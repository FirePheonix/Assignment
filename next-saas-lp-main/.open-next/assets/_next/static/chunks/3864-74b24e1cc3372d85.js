"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3864],{6132:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11010:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},16485:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},21786:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},39867:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},42196:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},42529:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},56514:(e,t,a)=>{a.d(t,{a:()=>p,i:()=>h});var r=a(95155),o=a(12115),s=a(21786),n=a(42196),l=a(60890),i=a(39867),c=a(71360),d=a(65229),u=a(93449),m=a(18720);function h(e){let{onImageSelect:t,selectedImage:a,maxSelection:d=1,showUpload:h=!0}=e,{uploads:p,isLoading:g,uploadImage:y,deleteUpload:f,refetch:w}=(0,u.SG)(),[x,b]=(0,o.useState)(!1),v=async e=>{if(!e||0===e.length)return;b(!0);let t=e[0];if(!t.type.startsWith("image/")&&!t.type.startsWith("video/")){m.oR.error("Please select an image or video file"),b(!1);return}let a=t.type.startsWith("video/")?0x6400000:0xa00000;if(t.size>a){m.oR.error("File size must be less than ".concat(t.type.startsWith("video/")?"100MB":"10MB")),b(!1);return}try{await y(t),m.oR.success("File uploaded successfully!")}catch(e){console.error("Upload failed:",e),m.oR.error("Upload failed")}finally{b(!1)}},k=async(e,t)=>{t.stopPropagation(),confirm("Are you sure you want to delete this file?")&&(await f(e),m.oR.success("File deleted"))},j=async(e,t,a)=>{a.stopPropagation();try{let a=await fetch(e),r=await a.blob(),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(o),document.body.removeChild(s),m.oR.success("Download started")}catch(e){m.oR.error("Failed to download file")}},A=e=>e.match(/\.(mp4|mov|avi|webm)$/i);return g?(0,r.jsx)("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-lg p-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"}),(0,r.jsx)("span",{className:"ml-3 text-gray-400",children:"Loading media..."})]})}):(0,r.jsxs)("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Media Library"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-400",children:[p.length," files"]}),(0,r.jsx)("button",{onClick:w,className:"text-purple-400 hover:text-purple-300 text-sm",children:"Refresh"})]})]}),h&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("label",{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 text-white px-6 py-3 rounded-lg font-medium transition inline-flex items-center gap-2 cursor-pointer",children:[x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:"Uploading..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Upload Media"})]}),(0,r.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>{let t=e.target.files;t&&v(t)},className:"hidden",disabled:x})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Images (JPG, PNG up to 10MB) or Videos (MP4, MOV up to 100MB)"})]}),Array.isArray(p)&&0!==p.length?(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:p.map(e=>(0,r.jsxs)("div",{className:"relative group aspect-square rounded-lg overflow-hidden cursor-pointer border-2 transition ".concat(a===e.image_url?"border-purple-500":"border-white/10 hover:border-white/30"),onClick:()=>{var a;return a=e.image_url,void(t&&t(a))},children:[A(e.image_url)?(0,r.jsx)("video",{src:e.image_url,className:"w-full h-full object-cover",muted:!0,playsInline:!0}):(0,r.jsx)("img",{src:e.image_url,alt:"Uploaded media",className:"w-full h-full object-cover"}),A(e.image_url)&&(0,r.jsx)("div",{className:"absolute top-2 left-2 bg-black/70 p-1.5 rounded",children:(0,r.jsx)(l.A,{className:"w-4 h-4 text-white"})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:t=>j(e.image_url,"media-".concat(e.id).concat(A(e.image_url)?".mp4":".jpg"),t),className:"p-2 bg-white/20 rounded-full hover:bg-white/30 transition",title:"Download",children:(0,r.jsx)(i.A,{className:"w-4 h-4 text-white"})}),(0,r.jsx)("button",{onClick:t=>k(e.id,t),className:"p-2 bg-red-500/20 rounded-full hover:bg-red-500/30 transition",title:"Delete",children:(0,r.jsx)(c.A,{className:"w-4 h-4 text-red-400"})})]})}),a===e.image_url&&(0,r.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"absolute bottom-2 left-2 text-xs text-white bg-black/50 px-2 py-1 rounded",children:new Date(e.created_at).toLocaleDateString()})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(n.A,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-400 mb-2",children:"No media yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:h?"Upload your first image or video to get started":"No media in your library"})]})]})}function p(e){let{onImageUpload:t,currentImage:a,className:i=""}=e,[c,h]=(0,o.useState)(!1),{uploadImage:p}=(0,u.SG)(),g=async e=>{if(!e||0===e.length)return;h(!0);let a=e[0];if(!a.type.startsWith("image/")&&!a.type.startsWith("video/")){m.oR.error("Please select an image or video file"),h(!1);return}let r=a.type.startsWith("video/")?0x6400000:0xa00000;if(a.size>r){m.oR.error("File size must be less than ".concat(a.type.startsWith("video/")?"100MB":"10MB")),h(!1);return}try{let e=await p(a);t(e.url),m.oR.success("File uploaded successfully!")}catch(e){console.error("Upload failed:",e),m.oR.error("Upload failed")}finally{h(!1)}};return a&&!c?(0,r.jsxs)("div",{className:"relative ".concat(i),children:[a.match(/\.(mp4|mov|avi|webm)$/i)?(0,r.jsx)("video",{src:a,controls:!0,className:"w-full h-full object-cover rounded-lg"}):(0,r.jsx)("img",{src:a,alt:"Selected media",className:"w-full h-full object-cover rounded-lg"}),(0,r.jsx)("button",{onClick:()=>t(""),className:"absolute top-2 right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600 transition",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})})]}):(0,r.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center ".concat(i),children:c?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mb-3"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Uploading..."})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(n.A,{className:"w-8 h-8 text-gray-400"}),(0,r.jsx)(l.A,{className:"w-8 h-8 text-gray-400"})]}),(0,r.jsxs)("label",{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 text-white px-4 py-2 rounded-lg text-sm font-medium transition cursor-pointer inline-flex items-center gap-2",children:[(0,r.jsx)(s.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Choose Media"}),(0,r.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>{let t=e.target.files;t&&g(t)},className:"hidden",disabled:c})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Images (up to 10MB) or Videos (up to 100MB)"})]})})}},60890:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},65229:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},67161:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},70579:(e,t,a)=>{a.d(t,{X:()=>c});let r="http://127.0.0.1:8000";function o(){let e=localStorage.getItem("auth_token");return console.log("Auth token available:",!!e),e}function s(){if("undefined"==typeof document)return null;let e="csrftoken";for(let t of document.cookie.split(";"))if((t=t.trim()).startsWith(e+"="))return decodeURIComponent(t.substring(e.length+1));return null}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o(),r=s(),n={"Content-Type":"application/json",...a&&{Authorization:"Token ".concat(a)},...r&&{"X-CSRFToken":r},...t.headers};return await fetch(e,{...t,headers:n})}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o(),r=s(),n={...a&&{Authorization:"Token ".concat(a)},...r&&{"X-CSRFToken":r},...t.headers};return await fetch(e,{...t,headers:n})}class i{async getOAuthStatus(e){if(!e)throw Error("Brand ID is required");let t="?brand_id=".concat(e);console.log("Making request to: ".concat(r,"/api/instagram/oauth-status/").concat(t));let a=await n("".concat(r,"/api/instagram/oauth-status/").concat(t));if(console.log("Instagram OAuth status response: ".concat(a.status," ").concat(a.statusText)),!a.ok){let e="Failed to get Instagram OAuth status";try{let t=await a.json();e=t.error||e,console.error("Instagram OAuth status error:",t)}catch(e){console.error("Failed to parse error response:",e)}if(401===a.status)throw Error("Authentication required. Please login again.");if(403===a.status)throw Error("Not authorized to access this brand.");if(404===a.status)throw Error("Brand not found.");throw Error(e)}let o=await a.json();return console.log("Instagram OAuth status data:",o),o}async startOAuth(e){let t=new URLSearchParams({brand_id:e.toString()});return{oauth_url:"".concat(r,"/api/instagram/oauth-start/?").concat(t)}}async disconnect(e){if(!(await n("".concat(r,"/api/instagram/oauth-disconnect/"),{method:"POST",body:JSON.stringify({brand_id:e})})).ok)throw Error("Failed to disconnect Instagram")}async getPosts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o=new URLSearchParams({page:t.toString(),page_size:a.toString()});e&&o.append("brand_id",e.toString());let s=await n("".concat(r,"/api/instagram/brand-posts/?").concat(o));if(!s.ok)throw Error("Failed to get Instagram posts");return s.json()}async createPost(e){let t=new FormData;t.append("content",e.caption),t.append("brand_id",e.brand_id.toString()),e.image?t.append("image",e.image):e.imageUrl&&t.append("image_url",e.imageUrl),e.scheduled_time&&(t.append("scheduled_for",e.scheduled_time),t.append("status","approved"));let a=await l("".concat(r,"/api/instagram/brand-posts/"),{method:"POST",body:t});if(!a.ok)throw Error((await a.json()).error||"Failed to create Instagram post");return a.json()}async updatePost(e,t){let a=new FormData;t.caption&&a.append("content",t.caption),t.image&&a.append("image",t.image),t.imageUrl&&a.append("image_url",t.imageUrl),t.scheduled_time&&(a.append("scheduled_for",t.scheduled_time),a.append("status","approved"));let o=await l("".concat(r,"/api/instagram/brand-posts/").concat(e,"/"),{method:"PUT",body:a});if(!o.ok)throw Error("Failed to update Instagram post");return o.json()}async deletePost(e){if(!(await n("".concat(r,"/api/instagram/brand-posts/").concat(e,"/"),{method:"DELETE"})).ok)throw Error("Failed to delete Instagram post")}async postNow(e){let t=await n("".concat(r,"/api/instagram/brand-posts/").concat(e,"/post-now/"),{method:"POST"});if(!t.ok)throw Error((await t.json()).error||"Failed to post Instagram content");return t.json()}async generateContent(e,t){let a=await n("".concat(r,"/api/instagram/generate-content/"),{method:"POST",body:JSON.stringify({prompt:e,brand_id:t})});if(!a.ok)throw Error("Failed to generate Instagram content");return a.json()}async uploadImage(e){let t=new FormData;t.append("image",e);let a=await l("".concat(r,"/api/users/upload-instagram-image/"),{method:"POST",body:t});if(!a.ok)throw Error("Failed to upload image");return a.json()}async getUserUploads(){let e=localStorage.getItem("auth_token"),t={"Content-Type":"application/json"};e&&(t.Authorization="Token ".concat(e));let a=await fetch("/api/users/my-uploads?format=instagram",{headers:t});if(!a.ok)throw Error("Failed to get user uploads");return a.json()}async deleteUserUpload(e){if(!(await n("".concat(r,"/api/users/my-uploads/").concat(e,"/"),{method:"DELETE"})).ok)throw Error("Failed to delete image")}}let c=new i},71360:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},84335:(e,t,a)=>{a.d(t,{v:()=>n});let r="http://127.0.0.1:8000";async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("auth_token"),r=function(){if("undefined"==typeof document)return null;let e="csrftoken";for(let t of document.cookie.split(";"))if((t=t.trim()).startsWith(e+"="))return decodeURIComponent(t.substring(e.length+1));return null}(),o={"Content-Type":"application/json",...a&&{Authorization:"Token ".concat(a)},...r&&{"X-CSRFToken":r},...t.headers};return await fetch(e,{...t,headers:o,credentials:"include"})}class s{async getBrands(){let e=await o("".concat(r,"/api/brands/"));if(!e.ok)throw Error("Failed to fetch brands");return e.json()}async createBrand(e){let t=await o("".concat(r,"/api/brands/create/"),{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to create brand");return t.json()}async updateBrand(e,t){let a=await o("".concat(r,"/api/brands/").concat(e,"/"),{method:"PUT",body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to update brand");return a.json()}async setDefaultBrand(e){let t=await o("".concat(r,"/api/brands/").concat(e,"/set-default/"),{method:"POST"});if(!t.ok)throw Error((await t.json()).error||"Failed to set default brand")}async deleteBrand(e){let t=await o("".concat(r,"/api/brands/").concat(e,"/delete/"),{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete brand")}}let n=new s},85921:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},93449:(e,t,a)=>{a.d(t,{SG:()=>i,er:()=>n,jC:()=>l});var r=a(12115),o=a(70579),s=a(18720);function n(e){let[t,a]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(!1),d=(0,r.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e)return void l(!1);try{l(!0),console.log("Fetching Instagram status for brand ".concat(e,", attempt ").concat(t+1));let r=await o.X.getOAuthStatus(e);console.log("Instagram status response:",r),a(r)}catch(r){if(console.error("Failed to get Instagram status:",r),r.message.includes("Authentication required")||r.message.includes("Not authorized")){s.oR.error("Please login again to access Instagram features"),a(null);return}if(r.message.includes("Brand not found")){console.error("Brand ".concat(e," not found")),a(null);return}if(0===t){console.log("Retrying Instagram status fetch in 2 seconds..."),setTimeout(()=>{d(1)},2e3);return}a(null)}finally{l(!1)}},[e]),u=(0,r.useCallback)(async()=>{if(!e)return void s.oR.error("Brand ID is required to connect Instagram");try{c(!0),localStorage.setItem("instagram_connecting_brand_id",e.toString());let{oauth_url:t}=await o.X.startOAuth(e),a=window.open(t,"instagram_oauth","width=600,height=700,scrollbars=yes,resizable=yes");if(!a){s.oR.error("Please allow popups to connect Instagram"),c(!1);return}let r=setInterval(()=>{a.closed&&(clearInterval(r),c(!1),setTimeout(()=>{d()},1e3))},1e3),n=e=>{e.origin===window.location.origin&&("INSTAGRAM_OAUTH_SUCCESS"===e.data.type?(clearInterval(r),a.close(),c(!1),s.oR.success("Instagram connected successfully!"),d(),window.removeEventListener("message",n)):"INSTAGRAM_OAUTH_ERROR"===e.data.type&&(clearInterval(r),a.close(),c(!1),s.oR.error(e.data.error||"Instagram connection failed"),window.removeEventListener("message",n)))};window.addEventListener("message",n),setTimeout(()=>{a.closed||a.close(),clearInterval(r),c(!1),window.removeEventListener("message",n)},3e5)}catch(e){console.error("Failed to start Instagram OAuth:",e),e.message.includes("Setup Required")?s.oR.error("Instagram OAuth setup required. Please configure your Facebook App credentials."):s.oR.error(e.message||"Failed to start Instagram authentication"),c(!1)}},[e,d]),m=(0,r.useCallback)(async()=>{if(!e)return void s.oR.error("Brand ID is required to disconnect Instagram");try{await o.X.disconnect(e),s.oR.success("Instagram account disconnected"),a(null)}catch(e){console.error("Failed to disconnect Instagram:",e),s.oR.error(e.message||"Failed to disconnect Instagram account")}},[e]);return(0,r.useEffect)(()=>{d()},[d]),{account:t,isLoading:n,isConnecting:i,connect:u,disconnect:m,refetch:d}}function l(e){let[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(1),[m]=(0,r.useState)(20),h=(0,r.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{l(!0);let r=await o.X.getPosts(e,t,m);a(r.posts),c(r.total),u(r.page)}catch(e){console.error("Failed to fetch Instagram posts:",e),s.oR.error("Failed to fetch Instagram posts")}finally{l(!1)}},[e,m]),p=(0,r.useCallback)(async e=>{try{let t=await o.X.createPost(e);return a(e=>[t,...e]),s.oR.success("Instagram post created successfully"),t}catch(e){throw console.error("Failed to create Instagram post:",e),s.oR.error(e.message||"Failed to create Instagram post"),e}},[]),g=(0,r.useCallback)(async(e,t)=>{try{let r=await o.X.updatePost(e,t);return a(t=>t.map(t=>t.id===e?r:t)),s.oR.success("Instagram post updated successfully"),r}catch(e){throw console.error("Failed to update Instagram post:",e),s.oR.error(e.message||"Failed to update Instagram post"),e}},[]),y=(0,r.useCallback)(async e=>{try{await o.X.deletePost(e),a(t=>t.filter(t=>t.id!==e)),s.oR.success("Instagram post deleted successfully")}catch(e){console.error("Failed to delete Instagram post:",e),s.oR.error(e.message||"Failed to delete Instagram post")}},[]),f=(0,r.useCallback)(async e=>{try{await o.X.postNow(e),await h(d),s.oR.success("Instagram post published successfully")}catch(e){console.error("Failed to post to Instagram:",e),s.oR.error(e.message||"Failed to post to Instagram")}},[h,d]);return(0,r.useEffect)(()=>{h()},[h]),{posts:t,isLoading:n,total:i,page:d,pageSize:m,createPost:p,updatePost:g,deletePost:y,postNow:f,refetch:()=>h(d),fetchPage:h}}function i(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),l=(0,r.useCallback)(async()=>{try{n(!0);let e=await o.X.getUserUploads();Array.isArray(e)?t(e):(console.error("Expected array from getUserUploads, got:",e),t([]))}catch(e){console.error("Failed to fetch user uploads:",e),t([])}finally{n(!1)}},[]),i=(0,r.useCallback)(async e=>{try{let t=await o.X.uploadImage(e);return await l(),s.oR.success("Image uploaded successfully"),t}catch(e){throw console.error("Failed to upload image:",e),s.oR.error(e.message||"Failed to upload image"),e}},[l]),c=(0,r.useCallback)(async e=>{try{await o.X.deleteUserUpload(e),t(t=>t.filter(t=>t.id!==e)),s.oR.success("Image deleted successfully")}catch(e){console.error("Failed to delete image:",e),s.oR.error(e.message||"Failed to delete image")}},[]);return(0,r.useEffect)(()=>{l()},[l]),{uploads:e,isLoading:a,uploadImage:i,deleteUpload:c,refetch:l}}},93499:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}}]);