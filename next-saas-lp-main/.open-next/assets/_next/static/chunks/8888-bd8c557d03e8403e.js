"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8888],{5834:(e,t,n)=>{n.d(t,{p:()=>a});var r=n(95155);n(12115);var s=n(64269);function a(e){let{className:t,type:n,...a}=e;return(0,r.jsx)("input",{type:n,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}},8888:(e,t,n)=>{n.d(t,{H:()=>t6});var r=n(95155),s=n(30080);let a=e=>e.filter(e=>{var t;let n=e.data;return"text"===e.type&&((null==(t=n.generated)?void 0:t.text)||n.text)}).map(e=>{var t;let n=e.data;return(null==(t=n.generated)?void 0:t.text)||n.text}),l=e=>e.filter(e=>{var t;let n=e.data;return"image"===e.type&&(n.content||(null==(t=n.generated)?void 0:t.url))}).map(e=>{var t;let n=e.data;return(null==(t=n.generated)?void 0:t.url)?{url:n.generated.url,type:n.generated.type||"image/png"}:n.content}),i=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let t=localStorage.getItem("auth_token"),n=new FormData;n.append("image",e),n.append("purpose","flow_generator_image");let r=await fetch("".concat("http://127.0.0.1:8000","/api/ai/upload-to-cloudinary/"),{method:"POST",headers:{...t&&{Authorization:"Token ".concat(t)}},body:n});if(!r.ok){let e=await r.json().catch(()=>({error:"Upload failed"}));throw Error(e.error||"Upload failed: ".concat(r.statusText))}let s=await r.json();return console.log("✅ File uploaded to Cloudinary:",s.url),{url:s.url,type:e.type}}catch(n){console.error("❌ File upload failed:",n);let t=URL.createObjectURL(e);return console.warn("⚠️ Using temporary blob URL as fallback:",t),{url:t,type:e.type}}};var o=n(64269),d=n(22539),c=n(92001),u=n(42196),m=n(60890),p=n(11636),h=n(87068),x=n(67168);let g=e=>{let{children:t}=e,{getViewport:n}=(0,d.VH)(),{addNode:s}=(0,h.o)(),{project:a}=(0,x.By)(),l=(0,p.VB)({noClick:!0,autoFocus:!1,noKeyboard:!0,disabled:!a,onDrop:async e=>{let t=await Promise.all(e.map(async e=>({name:e.name,data:await i(e,"files")}))),r=n(),a=-r.x/r.zoom+window.innerWidth/2/r.zoom,l=-r.y/r.zoom+window.innerHeight/2/r.zoom;for(let{data:e,name:n}of t){let t="file";e.type.startsWith("image/")?t="image":e.type.startsWith("video/")?t="video":e.type.startsWith("audio/")&&(t="audio"),s(t,{data:{content:{url:e.url,type:e.type,name:n}},position:{x:a,y:l}})}}});return(0,r.jsxs)("div",{...l.getRootProps(),className:"size-full",children:[(0,r.jsx)("input",{...l.getInputProps(),className:"pointer-events-none hidden select-none"}),(0,r.jsxs)("div",{className:(0,o.cn)("absolute inset-0 z-[999999] flex flex-col items-center justify-center gap-6 bg-background/70 text-foreground backdrop-blur-xl transition-all",l.isDragActive?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:[(0,r.jsxs)("div",{className:"-space-x-4 relative isolate flex items-center",children:[(0,r.jsx)("div",{className:"-rotate-12 flex aspect-square translate-y-2 items-center justify-center rounded-md bg-background p-3 shadow-xl",children:(0,r.jsx)(c.A,{size:24,className:"text-muted-foreground"})}),(0,r.jsx)("div",{className:"z-10 flex aspect-square items-center justify-center rounded-md bg-background p-3 shadow-xl",children:(0,r.jsx)(u.A,{size:24,className:"text-muted-foreground"})}),(0,r.jsx)("div",{className:"flex aspect-square translate-y-2 rotate-12 items-center justify-center rounded-md bg-background p-3 shadow-xl",children:(0,r.jsx)(m.A,{size:24,className:"text-muted-foreground"})})]}),(0,r.jsx)("p",{className:"font-medium text-xl tracking-tight",children:"Drop files to create nodes"})]}),t]})};var f=n(59603),v=n(76122),j=n(6191),b=n(53606),y=n(35805),w=n(12115),N=n(85507),k=n(34357);let z=e=>{let{fromX:t,fromY:n,toX:s,toY:a}=e;return(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{fill:"none",stroke:"var(--color-ring)",strokeWidth:1,className:"animated",d:"M".concat(t,",").concat(n," C ").concat(t+(s-t)*.5,",").concat(n," ").concat(t+(s-t)*.5,",").concat(a," ").concat(s,",").concat(a)}),(0,r.jsx)("circle",{cx:s,cy:a,fill:"#fff",r:3,stroke:"var(--color-ring)",strokeWidth:1})]})},A=(e,t)=>{var n,r;let s=t===v.yX.Left?"target":"source",a=null==(r=e.internals.handleBounds)||null==(n=r[s])?void 0:n.find(e=>e.position===t);if(!a)return[0,0];let l=a.width/2,i=a.height/2;switch(t){case v.yX.Left:l=0;break;case v.yX.Right:l=a.width;break;case v.yX.Top:i=0;break;case v.yX.Bottom:i=a.height;break;default:throw Error("Invalid handle position: ".concat(t))}return[e.internals.positionAbsolute.x+a.x+l,e.internals.positionAbsolute.y+a.y+i]},C={animated:e=>{let{id:t,source:n,target:s,markerEnd:a,style:l}=e,i=(0,d.JY)(n),o=(0,d.JY)(s);if(!i||!o)return null;let{sx:c,sy:u,tx:m,ty:p,sourcePos:h,targetPos:x}=((e,t)=>{let n=v.yX.Right,[r,s]=A(e,n),a=v.yX.Left,[l,i]=A(t,a);return{sx:r,sy:s,tx:l,ty:i,sourcePos:n,targetPos:a}})(i,o),[g]=(0,v.Fp)({sourceX:c,sourceY:u,sourcePosition:h,targetX:m,targetY:p,targetPosition:x});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.tE,{id:t,path:g,markerEnd:a,style:l}),(0,r.jsx)("circle",{r:"4",fill:"var(--primary)",children:(0,r.jsx)("animateMotion",{dur:"2s",repeatCount:"indefinite",path:g})})]})},temporary:e=>{let{id:t,sourceX:n,sourceY:s,targetX:a,targetY:l,sourcePosition:i,targetPosition:o}=e,[c]=(0,d.LN)({sourceX:n,sourceY:s,sourcePosition:i,targetX:a,targetY:l,targetPosition:o});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.tE,{id:t,path:c,className:"stroke-1 stroke-ring",style:{strokeDasharray:"5, 5"}})})}};var _=n(30926);let S=(0,_.createServerReference)("7fa2c47b0f03196f5091271eb2db7af5eeb48e0e5a",_.callServer,void 0,_.findSourceMapURL,"transcribeAudioAction");var E=n(76202);function T(e){let{...t}=e;return(0,r.jsx)(E.bL,{"data-slot":"context-menu",...t})}function D(e){let{...t}=e;return(0,r.jsx)(E.l9,{"data-slot":"context-menu-trigger",...t})}function L(e){let{className:t,...n}=e;return(0,r.jsx)(E.ZL,{children:(0,r.jsx)(E.UC,{"data-slot":"context-menu-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function R(e){let{className:t,inset:n,variant:s="default",...a}=e;return(0,r.jsx)(E.q7,{"data-slot":"context-menu-item","data-inset":n,"data-variant":s,className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function I(e){let{className:t,...n}=e;return(0,r.jsx)(E.wv,{"data-slot":"context-menu-separator",className:(0,o.cn)("bg-border -mx-1 my-1 h-px",t),...n})}var M=n(64814),O=n(75426),H=n(57828),P=n(37135),F=n(28611);let B=e=>{let{id:t,items:n}=e,{getNode:s}=(0,d.VH)(),a=s(t);return(0,r.jsx)(d.ER,{isVisible:null==a?void 0:a.selected,position:v.yX.Bottom,className:"flex items-center gap-2 rounded-lg bg-background/95 p-2 backdrop-blur-sm shadow-lg border border-border",style:{zIndex:1e3},children:null==n?void 0:n.map((e,t)=>e.tooltip?(0,r.jsxs)(F.m_,{children:[(0,r.jsx)(F.k$,{asChild:!0,children:e.children}),(0,r.jsx)(F.ZI,{side:"top",children:e.tooltip})]},e.tooltip):(0,r.jsx)(w.Fragment,{children:e.children},t))})},V=e=>{let{children:t,type:n,id:s,data:a,toolbar:l,title:i,className:c}=e,{deleteElements:u,setCenter:m,getNode:p,updateNode:x}=(0,d.VH)(),{duplicateNode:g}=(0,h.o)(),[f,j]=(0,w.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:["drop"!==n&&!!(null==l?void 0:l.length)&&(0,r.jsx)(B,{id:s,items:l}),"file"!==n&&"tweet"!==n&&(0,r.jsx)(d.h7,{type:"target",position:v.yX.Left}),(0,r.jsxs)(T,{onOpenChange:e=>{if(!e)return;let t=p(s);t&&(t.selected||x(s,{selected:!0}))},children:[(0,r.jsx)(D,{children:(0,r.jsxs)("div",{className:"relative size-full h-auto w-sm",children:["drop"!==n&&(0,r.jsx)("div",{className:"-translate-y-full -top-2 absolute right-0 left-0 flex shrink-0 items-center justify-between",children:(0,r.jsx)("p",{className:"font-mono text-muted-foreground text-xs tracking-tighter",children:i})}),(0,r.jsx)("div",{className:(0,o.cn)("node-container flex size-full flex-col divide-y rounded-[28px] bg-card p-2 ring-1 ring-border transition-all",c),style:{overflow:"visible"},children:(0,r.jsx)("div",{className:"overflow-hidden rounded-3xl bg-card",children:t})})]})}),(0,r.jsxs)(L,{children:[(0,r.jsxs)(R,{onClick:()=>g(s),children:[(0,r.jsx)(O.A,{size:12}),(0,r.jsx)("span",{children:"Duplicate"})]}),(0,r.jsxs)(R,{onClick:()=>{var e,t;let n=p(s);if(!n)return;let{x:r,y:a}=n.position;m(r+(null!=(t=null==(e=n.measured)?void 0:e.width)?t:0)/2,a,{duration:1e3})},children:[(0,r.jsx)(H.A,{size:12}),(0,r.jsx)("span",{children:"Focus"})]}),(0,r.jsx)(I,{}),(0,r.jsxs)(R,{onClick:()=>{u({nodes:[{id:s}]})},variant:"destructive",children:[(0,r.jsx)(P.A,{size:12}),(0,r.jsx)("span",{children:"Delete"})]}),!1]})]}),"video"!==n&&(0,r.jsx)(d.h7,{type:"source",position:v.yX.Right}),(0,r.jsx)(M.lG,{open:f,onOpenChange:j,children:(0,r.jsxs)(M.Cf,{children:[(0,r.jsxs)(M.c7,{children:[(0,r.jsx)(M.L3,{children:"Node data"}),(0,r.jsxs)(M.rr,{children:["Data for node"," ",(0,r.jsx)("code",{className:"rounded-sm bg-secondary px-2 py-1 font-mono",children:s})]})]}),(0,r.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-black p-4 text-sm text-white",children:JSON.stringify(a,null,2)})]})})]})};var U=n(75093);function G(e){let{className:t,...n}=e;return(0,r.jsx)("div",{"data-slot":"skeleton",className:(0,o.cn)("bg-accent animate-pulse rounded-md",t),...n})}var $=n(80965),q=n(35299);let W=e=>{let{data:t,id:n,type:s,title:a}=e,{updateNodeData:l}=(0,d.VH)(),[o,c]=(0,w.useState)(),{project:u}=(0,x.By)(),[m,p]=(0,w.useState)(!1),h=async e=>{if(!m&&(null==u?void 0:u.id))try{if(!e.length)throw Error("No file selected");p(!0),c(e);let[t]=e,{url:r,type:s}=await i(t,"files");l(n,{content:{url:r,type:s}});let a=await S(r,null==u?void 0:u.id);if("error"in a)throw Error(a.error);l(n,{transcript:a.transcript})}catch(e){(0,$.H)("Error uploading video",e)}finally{p(!1)}};return(0,r.jsxs)(V,{id:n,data:t,type:s,title:a,children:[m&&(0,r.jsx)(G,{className:"flex h-[50px] w-full animate-pulse items-center justify-center",children:(0,r.jsx)(q.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!m&&t.content&&(0,r.jsx)("audio",{src:t.content.url,controls:!0,className:"w-full rounded-none"}),!m&&!t.content&&(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,accept:{"audio/*":[]},onDrop:h,src:o,onError:console.error,className:"rounded-none border-none bg-transparent shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{}),(0,r.jsx)(U.Pi,{})]})]})};var X=n(41498),K=n(13652);function J(){return{track:(e,t,n,r)=>{console.log("Analytics:",{category:e,action:t,label:n,props:r})}}}let Y=(e,t,n)=>{if(!e)return void console.error("No content to download");let r="string"==typeof e?e:e.url,s="".concat(t,".").concat(n);if(r.startsWith("data:")){let e=document.createElement("a");e.href=r,e.download=s,document.body.appendChild(e),e.click(),document.body.removeChild(e);return}fetch(r).then(e=>e.blob()).then(e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}).catch(e=>{console.error("Download failed:",e)})},Z=()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDD16"}),Q={openai:{id:"openai",name:"OpenAI",icon:Z},anthropic:{id:"anthropic",name:"Anthropic",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDDE0"})},google:{id:"google",name:"Google",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD0D"})},meta:{id:"meta",name:"Meta",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDC64"})},xai:{id:"xai",name:"xAI",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"✖️"})},groq:{id:"groq",name:"Groq",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"⚙️"})},mistral:{id:"mistral",name:"Mistral",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83C\uDF2C️"})},luma:{id:"luma",name:"Luma",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCA1"})},minimax:{id:"minimax",name:"Minimax",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"⚡"})},cohere:{id:"cohere",name:"Cohere",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD17"})},deepseek:{id:"deepseek",name:"DeepSeek",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD0E"})},runway:{id:"runway",name:"Runway",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDEEB"})},together:{id:"together",name:"Together",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDD1D"})},replicate:{id:"replicate",name:"Replicate",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"})},perplexity:{id:"perplexity",name:"Perplexity",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83C\uDFAF"})},elevenlabs:{id:"elevenlabs",name:"ElevenLabs",icon:Z}},ee={eleven_turbo_v2_5:{label:"Turbo v2.5 (AI/ML API)",chef:Q.elevenlabs,providers:[Q.elevenlabs],priceIndicator:"lowest",default:!0,voices:["Rachel","Drew","Aria","Domi","Sarah","Laura","Emily","Elli","Charlotte","Alice","Matilda","Jessica","Grace","Lily","Serena","Nicole","Jessie","Glinda","Mimi","Antoni","Clyde","Paul","Dave","Roger","Fin","Thomas","Charlie","George","Callum","Patrick","River","Harry","Liam","Josh","Arnold","Joseph","Will","Jeremy","Eric","Michael","Ethan","Chris","Brian","Daniel","Adam","Bill","Sam","Giovanni"]},"openai-tts-1":{label:"OpenAI TTS 1",chef:Q.openai,providers:[Q.openai],priceIndicator:"low",voices:["alloy","echo","fable","onyx","nova","shimmer"]},"openai-tts-1-hd":{label:"OpenAI TTS 1 HD",chef:Q.openai,providers:[Q.openai],priceIndicator:"low",voices:["alloy","echo","fable","onyx","nova","shimmer"]}};var et=n(48314),en=n(85921),er=n(39867),es=n(26983),ea=n(18720),el=n(19972),ei=n(39056),eo=n(53694),ed=n(24033),ec=n(12108),eu=n(38627),em=n(65949);let ep=e=>{let{data:t}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(t.icon,{className:"size-4 shrink-0"}),(0,r.jsx)("span",{className:"block truncate",children:t.name})]})},eh=e=>{let{data:t,chef:n,className:s}=e;return t.icon?(0,r.jsx)(t.icon,{className:(0,o.cn)("size-4 shrink-0",s)}):(0,r.jsx)(n.icon,{className:(0,o.cn)("size-4 shrink-0",s)})},ex=e=>{let{id:t,value:n,options:s,width:a=250,className:l,onChange:i,disabled:d}=e,[c,u]=(0,w.useState)(!1),{plan:m}=(0,ei.R)(),p=s[n];(0,w.useEffect)(()=>{n&&!s[n]&&(null==i||i(Object.keys(s)[0]))},[n,s,i]);let h=Object.entries(s).reduce((e,t)=>{let[n,r]=t,s=r.chef.id;return e[s]||(e[s]={}),e[s][n]=r,e},{}),x=Object.keys(h).sort((e,t)=>{var n,r,s;let a=null==(n=Object.values(Q).find(t=>t.id===e))?void 0:n.name.toLowerCase(),l=null==(r=Object.values(Q).find(e=>e.id===t))?void 0:r.name.toLowerCase();return null!=(s=null==a?void 0:a.localeCompare(null!=l?l:""))?s:0});return(0,r.jsxs)(M.lG,{open:c,onOpenChange:u,children:[(0,r.jsx)(M.zM,{className:l,id:t,style:{width:a},disabled:d,asChild:!0,children:(0,r.jsx)(X.$,{variant:"outline",className:"w-full rounded-md h-9",children:p&&(0,r.jsxs)("div",{className:"flex w-full items-center gap-2 overflow-hidden",children:[(0,r.jsx)(eh,{data:p,chef:p.chef}),(0,r.jsx)("span",{className:"block truncate",children:p.label})]})})}),(0,r.jsxs)(M.Cf,{className:"p-0",children:[(0,r.jsx)(M.c7,{className:"sr-only",children:(0,r.jsx)(M.L3,{children:"Select a model"})}),(0,r.jsxs)(em.uB,{children:[(0,r.jsx)("div",{className:"[&>div]:h-12",children:(0,r.jsx)(em.G7,{placeholder:"Search for a model..."})}),(0,r.jsxs)(em.oI,{children:[(0,r.jsx)(em.xL,{}),x.map(e=>(0,r.jsx)(em.L$,{heading:(0,r.jsx)(ep,{data:e in Q?Q[e]:Q.unknown}),children:Object.entries(h[e]).map(t=>{let[s,a]=t;return(0,r.jsxs)(em.h_,{value:s,onSelect:()=>{null==i||i(s),u(!1)},disabled:((e,t)=>!!e.disabled||(!t||"hobby"===t)&&("highest"===e.priceIndicator||"high"===e.priceIndicator))(a,m),className:(0,o.cn)(n===s&&"bg-primary text-primary-foreground data-[selected=true]:bg-primary/80 data-[selected=true]:text-primary-foreground"),children:[(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 overflow-hidden",children:[(0,r.jsx)(eh,{data:a,chef:e in Q?Q[e]:Q.unknown,className:n===s?"text-primary-foreground":""}),(0,r.jsx)("span",{className:"block truncate",children:a.label})]}),a.providers.map((e,t)=>(0,r.jsx)("div",{className:(0,o.cn)(t&&"opacity-50"),children:(0,r.jsx)("div",{className:(0,o.cn)("flex size-4 items-center justify-center rounded-full bg-secondary",n===s&&"bg-primary-foreground/10"),children:(0,r.jsx)(e.icon,{className:(0,o.cn)("size-3 shrink-0",n===s?"text-primary-foreground":"text-muted-foreground")})})},e.id)),a.priceIndicator?(0,r.jsxs)(F.m_,{children:[(0,r.jsx)(F.k$,{asChild:!0,children:(0,r.jsx)("div",{children:((e,t)=>{switch(e){case"lowest":return(0,r.jsx)(eo.A,{size:16,className:(0,o.cn)("text-green-500 dark:text-green-400",t)});case"low":return(0,r.jsx)(ed.A,{size:16,className:(0,o.cn)("text-blue-500 dark:text-blue-400",t)});case"high":return(0,r.jsx)(ec.A,{size:16,className:(0,o.cn)("text-orange-500 dark:text-orange-400",t)});case"highest":return(0,r.jsx)(eu.A,{size:16,className:(0,o.cn)("text-red-500 dark:text-red-400",t)});default:return null}})(a.priceIndicator,n===s?"text-primary-foreground":"")})}),(0,r.jsx)(F.ZI,{side:"right",children:(0,r.jsx)("p",{children:(e=>{switch(e){case"lowest":return"This model uses a lot less credits.";case"low":return"This model uses less credits.";case"high":return"This model uses more credits.";case"highest":return"This model uses a lot of credits.";default:return""}})(a.priceIndicator)})})]}):(0,r.jsx)("div",{className:"size-4"})]},s)})},e))]})]})]})]})};var eg=n(60681);let ef=e=>{let{value:t,options:n,width:s=250,className:a,onChange:l,disabled:i}=e,[d,c]=(0,w.useState)(!1),{plan:u}=(0,ei.R)(),m=n.find(e=>e===t);return(0,r.jsxs)(eg.G3,{open:d,onOpenChange:c,value:t,onValueChange:l,data:n.map(e=>({label:e,value:(0,o.Z)(e)})),type:"model",children:[(0,r.jsx)(eg.Ms,{className:a,style:{width:s},disabled:i,children:m&&(0,r.jsx)("div",{className:"flex w-full items-center gap-2 overflow-hidden",children:(0,r.jsx)("span",{className:"block truncate capitalize",children:m})})}),(0,r.jsxs)(eg.h5,{popoverOptions:{sideOffset:8},children:[(0,r.jsx)(eg.oK,{}),(0,r.jsxs)(eg.ex,{children:[(0,r.jsx)(eg.$U,{}),(0,r.jsx)(eg.D5,{children:n.map(e=>(0,r.jsx)(eg.x4,{value:e,onSelect:()=>{null==l||l(e),c(!1)},className:(0,o.cn)(t===e&&"bg-primary text-primary-foreground data-[selected=true]:bg-primary/80 data-[selected=true]:text-primary-foreground"),children:(0,r.jsx)("div",{className:"flex items-center gap-2 overflow-hidden",children:(0,r.jsx)("span",{className:"block truncate capitalize",children:e})})},e))})]})]})]})},ev="http://127.0.0.1:8000";function ej(){if("undefined"==typeof document)return null;let e=document.cookie.split(";").find(e=>e.trim().startsWith("csrftoken="));return e?e.split("=")[1]:null}async function eb(){if(!ej())try{await fetch("".concat(ev,"/api/auth/csrf/"),{method:"GET",credentials:"include"})}catch(e){}}async function ey(e){try{let t=localStorage.getItem("auth_token");console.log("Audio generation - Token available:",!!t),await eb();let n=ej();console.log("Audio generation - CSRF token available:",!!n);let r=new FormData;r.append("text",e.text),e.voice&&r.append("voice",e.voice),e.output_format&&r.append("output_format",e.output_format),void 0!==e.stability&&r.append("stability",e.stability.toString()),void 0!==e.similarity_boost&&r.append("similarity_boost",e.similarity_boost.toString()),void 0!==e.use_speaker_boost&&r.append("use_speaker_boost",e.use_speaker_boost.toString()),void 0!==e.style&&r.append("style",e.style.toString()),void 0!==e.speed&&r.append("speed",e.speed.toString());let s=await fetch("".concat(ev,"/api/ai/generate-audio/"),{method:"POST",credentials:"include",headers:{...n&&{"X-CSRFToken":n},...t&&{Authorization:"Token ".concat(t)}},body:r});if(!s.ok){let e="Failed to generate audio";try{let t=await s.json();e=t.error||t.detail||JSON.stringify(t)}catch(t){e="HTTP ".concat(s.status,": ").concat(s.statusText)}return console.error("Audio generation error:",e),{success:!1,error:e}}return await s.json()}catch(e){return console.error("Error generating audio from text:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}let ew=e=>{var t,n,s,l,i,o,c,u;let{data:m,id:p,type:h,title:g}=e,{updateNodeData:f,getNodes:j,getEdges:b}=(0,d.VH)(),[y,N]=(0,w.useState)(!1),{project:k}=(0,x.By)(),z=null!=(o=m.model)?o:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});if(!t)throw Error("No default model found");return t[0]})(ee),A=ee[z],C=J(),_=async()=>{if(!y&&(null==k?void 0:k.id))try{var e,t,n;let r=(0,v.FB)({id:p},j(),b()),s=a(r),l=r.filter(e=>"image"===e.type&&e.data.description).map(e=>e.data.description);if(!s.length&&!l.length&&!m.instructions)throw Error("No prompts found");N(!0);let i=[...s,...l].join("\n");m.instructions,m.instructions&&!i.length&&(i=m.instructions),C.track("canvas","node","generate",{type:h,promptLength:i.length,model:z,instructionsLength:null!=(t=null==(e=m.instructions)?void 0:e.length)?t:0,voice:null!=(n=m.voice)?n:null});let o=await ey({text:i,voice:m.voice,output_format:"mp3_44100_128"});if(!o.success||!o.audio_url)throw Error(o.error||"Failed to generate audio");f(p,{generated:{url:o.audio_url},updatedAt:Date.now()}),ea.oR.success("Audio generated successfully"),setTimeout(()=>(0,el.j)("credits"),5e3)}catch(e){(0,$.H)("Error generating audio",e)}finally{N(!1)}},S=[{children:(0,r.jsx)(ex,{value:z,options:ee,className:"w-[200px] rounded-full",onChange:e=>f(p,{model:e})},p)}];return(null==A||null==(t=A.voices)?void 0:t.length)&&S.push({children:(0,r.jsx)(ef,{value:null!=(c=m.voice)?c:A.voices[0],options:A.voices,className:"w-[200px] rounded-full",onChange:e=>f(p,{voice:e})},p)}),S.push(y?{tooltip:"Generating...",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-full",disabled:!0,children:(0,r.jsx)(q.A,{className:"animate-spin",size:12})})}:{tooltip:(null==(n=m.generated)?void 0:n.url)?"Regenerate":"Generate",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-full",onClick:_,disabled:y||!(null==k?void 0:k.id),children:(null==(s=m.generated)?void 0:s.url)?(0,r.jsx)(et.A,{size:12}):(0,r.jsx)(en.A,{size:12})})}),m.generated&&S.push({tooltip:"Download",children:(0,r.jsx)(X.$,{variant:"ghost",size:"icon",className:"rounded-full",onClick:()=>Y(m.generated,p,"mp3"),children:(0,r.jsx)(er.A,{size:12})})}),m.updatedAt&&S.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(m.updatedAt))),children:(0,r.jsx)(X.$,{size:"icon",variant:"ghost",className:"rounded-full",children:(0,r.jsx)(es.A,{size:12})})}),(0,r.jsxs)(V,{id:p,data:m,type:h,title:g,toolbar:S,children:[y&&(0,r.jsx)(G,{className:"flex h-[50px] w-full animate-pulse items-center justify-center",children:(0,r.jsx)(q.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!y&&!(null==(l=m.generated)?void 0:l.url)&&(0,r.jsx)("div",{className:"flex h-[50px] w-full items-center justify-center rounded-full bg-secondary",children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(en.A,{size:12,className:"-translate-y-px inline"})," to generate audio"]})}),!y&&(null==(i=m.generated)?void 0:i.url)&&(0,r.jsx)("audio",{src:m.generated.url,controls:!0,className:"w-full rounded-none"}),(0,r.jsx)(K.T,{value:null!=(u=m.instructions)?u:"",onChange:e=>f(p,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"})]})};var eN=n(81808);let ek=e=>{let{name:t,type:n,url:s}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.A,{size:16,className:"text-muted-foreground"}),(0,r.jsx)("span",{className:"truncate font-medium text-sm",children:t})]}),"application/pdf"===n?(0,r.jsx)("div",{className:"relative aspect-[3/4] w-full overflow-hidden rounded border",children:(0,r.jsx)("iframe",{src:"".concat(s,"#view=FitH"),className:"absolute inset-0 h-full w-full",title:"PDF Preview"})}):(0,r.jsx)("div",{className:"flex items-center justify-center rounded border p-4",children:(0,r.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary text-sm hover:underline",children:[(0,r.jsx)(c.A,{size:16}),(0,r.jsx)("span",{children:"Download File"})]})})]})},ez=e=>{let{data:t,id:n,type:s,title:a}=e,{updateNodeData:l}=(0,d.VH)(),[o,c]=(0,w.useState)(),[u,m]=(0,w.useState)(!1),p=async e=>{if(!u)try{if(!e.length)throw Error("No file selected");if(e.some(e=>e.type.startsWith("audio")))throw Error("Please use the audio node to upload audio files.");if(e.some(e=>e.type.startsWith("video")))throw Error("Please use the video node to upload video files.");if(e.some(e=>e.type.startsWith("image")))throw Error("Please use the image node to upload image files.");m(!0),c(e);let[t]=e,{url:r,type:s}=await i(t,"files");l(n,{content:{url:r,name:t.name,type:s}})}catch(e){(0,$.H)("Error uploading video",e)}finally{m(!1)}};return(0,r.jsx)(V,{id:n,data:t,type:s,title:a,children:(0,r.jsx)("div",{className:"p-4",children:t.content?(0,r.jsx)(ek,{...t.content}):(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,onDrop:p,src:o,onError:console.error,className:"rounded-none border-none bg-transparent shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{}),(0,r.jsx)(U.Pi,{children:o&&o.length>0&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(ek,{name:o[0].name,type:o[0].type,url:URL.createObjectURL(o[0])}),(0,r.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-lg bg-black/50",children:(0,r.jsx)(q.A,{className:"size-12 animate-spin text-white"})})]})})]})})})};var eA=n(15239);let eC=e=>{var t,n;let{data:s,id:a,type:l,title:o}=e,{updateNodeData:c}=(0,d.VH)(),{project:u}=(0,x.By)(),[m,p]=(0,w.useState)(),[h,g]=(0,w.useState)(!1),f=async e=>{if(!h&&(null==u?void 0:u.id))try{if(!e.length)throw Error("No file selected");g(!0),p(e);let[t]=e;console.log("\uD83D\uDCE4 Uploading image to Cloudinary...");let n=await i(t,"flow_generator/images");c(a,{content:{url:n.url,type:t.type}}),console.log("✅ IMAGE UPLOADED TO CLOUDINARY:",{nodeId:a,fileName:t.name,cloudinaryUrl:n.url,fileSize:t.size})}catch(e){(0,$.H)("Error uploading image",e)}finally{g(!1)}};return(0,r.jsxs)(V,{id:a,data:s,type:l,title:o,children:[h&&(0,r.jsx)(G,{className:"flex aspect-video w-full animate-pulse items-center justify-center",children:(0,r.jsx)(q.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!h&&s.content&&(0,r.jsx)(eA.default,{src:s.content.url,alt:"Image",width:null!=(t=s.width)?t:1e3,height:null!=(n=s.height)?n:1e3,className:"h-auto w-full"}),!h&&!s.content&&(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,accept:{"image/*":[]},onDrop:f,src:m,onError:console.error,className:"rounded-none border-none bg-transparent p-0 shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{className:"p-4"}),(0,r.jsx)(U.Pi,{})]})]})},e_=(0,_.createServerReference)("7f6b41a2af5772741c679ee3f9c7aaba0889198736",_.callServer,void 0,_.findSourceMapURL,"editImageAction"),eS=(0,_.createServerReference)("7f28718ddb7a46f37c15e5ada8e5559ead15a20dcd",_.callServer,void 0,_.findSourceMapURL,"generateImageAction"),eE={"gpt-image-1":{label:"GPT Image 1",chef:Q.openai,providers:[{...Q.openai,modelId:"gpt-image-1",getCost:e=>{if(!(null==e?void 0:e.size))throw Error("Size is required");if("1024x1024"===e.size)return .08;if("1024x1792"===e.size||"1792x1024"===e.size)return .12;if("1536x1024"===e.size||"1024x1536"===e.size)return .1;throw Error("Size is not supported")}}],sizes:["1024x1024","1024x1536","1536x1024","1024x1792","1792x1024"],supportsEdit:!0,providerOptions:{openai:{quality:"high"}},default:!0},"dall-e-3":{label:"DALL-E 3",chef:Q.openai,providers:[{...Q.openai,modelId:"dall-e-3",getCost:e=>{if(!(null==e?void 0:e.size))throw Error("Size is required");if("1024x1024"===e.size)return .08;if("1024x1792"===e.size||"1792x1024"===e.size)return .12;throw Error("Size is not supported")}}],sizes:["1024x1024","1024x1792","1792x1024"],providerOptions:{openai:{quality:"hd"}}},"dall-e-2":{label:"DALL-E 2",chef:Q.openai,providers:[{...Q.openai,modelId:"dall-e-2",getCost:e=>{if(!(null==e?void 0:e.size))throw Error("Size is required");if("1024x1024"===e.size)return .02;if("512x512"===e.size)return .018;if("256x256"===e.size)return .016;throw Error("Size is not supported")}}],sizes:["1024x1024","512x512","256x256"],priceIndicator:"low"}};async function eT(e){return e.startsWith("data:")?e:new Promise((t,n)=>{fetch(e).then(e=>e.blob()).then(e=>{let r=new FileReader;r.onloadend=()=>{"string"==typeof r.result?t(r.result):n(Error("Failed to convert blob to data URL"))},r.onerror=n,r.readAsDataURL(e)}).catch(n)})}async function eD(e){return await Promise.all(e.map(async e=>{try{return{url:await eT(e.url),type:e.type}}catch(e){throw console.error("Error converting image to base64:",e),e}}))}var eL=n(59e3),eR=n(3455),eI=n(77397),eM=n(5917);let eO=e=>{let[t,n]=e.split("x").map(Number);return t===n?(0,r.jsx)(eL.A,{size:16,className:"text-muted-foreground"}):t>n?(0,r.jsx)(eR.A,{size:16,className:"text-muted-foreground"}):(0,r.jsx)(eI.A,{size:16,className:"text-muted-foreground"})},eH=e=>{let[t,n]=e.split("x").map(Number);return(0,r.jsxs)("div",{className:"flex items-center gap-1 truncate",children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"\xd7"}),(0,r.jsx)("span",{children:n})]})},eP=e=>{let{id:t,value:n,width:s=200,options:a,className:l,onChange:i}=e,[d,c]=(0,w.useState)(!1);return(0,r.jsxs)(eg.G3,{open:d,onOpenChange:c,data:a.map(e=>({label:e,value:e})),type:"size",value:n,onValueChange:i,children:[(0,r.jsx)(eg.Ms,{id:t,className:"rounded-md h-9",style:{width:s},children:(0,r.jsxs)("div",{className:"flex w-full items-center gap-2",children:[eO(n),eH(n)]})}),(0,r.jsxs)(eg.h5,{className:(0,o.cn)("p-0",l),children:[(0,r.jsx)(eg.oK,{}),(0,r.jsxs)(eg.ex,{children:[(0,r.jsx)(eg.$U,{}),(0,r.jsx)(eg.D5,{children:a.map(e=>(0,r.jsxs)(eg.x4,{value:e,onSelect:()=>{null==i||i(e),c(!1)},children:[eO(e),eH(e),(0,r.jsx)(eM.A,{className:(0,o.cn)("ml-auto size-4",n===e?"opacity-100":"opacity-0")})]},e))})]})]})]})},eF=e=>{var t,n,s,i,o,c;let{data:u,id:m,type:p,title:h}=e,{updateNodeData:g,getNodes:f,getEdges:j}=(0,d.VH)(),[b,y]=(0,w.useState)(!1),{project:N}=(0,x.By)(),k=l((0,v.FB)({id:m},f(),j())),z=k.length>0,A=null!=(i=u.model)?i:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});if(!t)throw Error("No default model found");return t[0]})(eE),C=J(),_=eE[A],S=null!=(o=u.size)?o:null==_||null==(t=_.sizes)?void 0:t.at(0),E=[...u.content?[u.content]:[],...k],T=(0,w.useCallback)(async()=>{if(b||!(null==N?void 0:N.id))return;let e=(0,v.FB)({id:m},f(),j()),t=a(e),n=[];u.instructions&&n.push(u.instructions),n.push(...t);let r=n.join("\n\n");console.log("\uD83C\uDFA8 IMAGE NODE GENERATING:",{nodeId:m,nodeType:p,incomingNodes:e.map(e=>({id:e.id,type:e.type,data:e.data})),textPrompts:t,textPromptsCount:t.length,uploadedImage:u.content,incomingImages:k,allReferenceImages:E,totalReferenceImages:E.length,instructions:u.instructions,combinedPrompt:r,model:A,size:S});try{var s,l;let e;if(!r&&!E.length)throw Error("No input provided (need text prompt or reference images)");y(!0),C.track("canvas","node","generate",{type:p,textPromptsLength:t.length,imagePromptsLength:E.length,hasUploadedImage:!!u.content,model:A,instructionsLength:null!=(l=null==(s=u.instructions)?void 0:s.length)?l:0});let n=localStorage.getItem("auth_token");if(E.length){console.log("\uD83D\uDD04 Converting blob URLs to base64...");let t=await eD(E);console.log("✅ Conversion complete:",{originalCount:E.length,convertedCount:t.length,samples:t.map(e=>({type:e.type,urlPrefix:e.url.substring(0,50)+"..."}))}),e=await e_({images:t,prompt:r,nodeId:m,projectId:N.id,modelId:A,size:S,authToken:n||void 0})}else e=await eS({prompt:r,modelId:A,instructions:u.instructions,projectId:N.id,nodeId:m,size:S,authToken:n||void 0});if("error"in e)throw Error(e.error);g(m,e.nodeData),ea.oR.success("Image generated successfully"),setTimeout(()=>(0,el.j)("credits"),5e3)}catch(e){(0,$.H)("Error generating image",e)}finally{y(!1)}},[b,null==N?void 0:N.id,S,m,C,p,u.instructions,u.content,j,A,f,g,E,k]),D=(0,w.useMemo)(()=>{var e,t,n,s;let a=Object.fromEntries(Object.entries(eE).map(e=>{let[t,n]=e;return[t,{...n,disabled:z?!n.supportsEdit:n.disabled}]})),l=[{children:(0,r.jsx)(ex,{value:A,options:a,id:m,className:"w-[200px]",onChange:e=>g(m,{model:e})})}];return(null==_||null==(e=_.sizes)?void 0:e.length)&&l.push({children:(0,r.jsx)(eP,{value:null!=S?S:"",options:null!=(s=null==_?void 0:_.sizes)?s:[],id:m,className:"w-[200px]",onChange:e=>g(m,{size:e})})}),l.push(b?{tooltip:"Generating...",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-md h-9 w-9",disabled:!0,children:(0,r.jsx)(q.A,{className:"animate-spin",size:12})})}:{tooltip:(null==(t=u.generated)?void 0:t.url)?"Regenerate":"Generate",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-md h-9 w-9",onClick:T,disabled:b||!(null==N?void 0:N.id),children:(null==(n=u.generated)?void 0:n.url)?(0,r.jsx)(et.A,{size:12}):(0,r.jsx)(en.A,{size:12})})}),u.generated&&l.push({tooltip:"Download",children:(0,r.jsx)(X.$,{variant:"ghost",size:"icon",className:"rounded-md h-9 w-9",onClick:()=>Y(u.generated,m,"png"),children:(0,r.jsx)(er.A,{size:12})})}),u.updatedAt&&l.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(u.updatedAt))),children:(0,r.jsx)(X.$,{size:"icon",variant:"ghost",className:"rounded-md h-9 w-9",children:(0,r.jsx)(es.A,{size:12})})}),l},[A,z,m,g,null==_?void 0:_.sizes,S,b,u.generated,u.updatedAt,T,null==N?void 0:N.id]),L=(0,w.useMemo)(()=>{if(!u.size)return"1/1";let[e,t]=u.size.split("x").map(Number);return"".concat(e,"/").concat(t)},[u.size]);return(0,r.jsxs)(V,{id:m,data:u,type:p,title:h,toolbar:D,children:[E.length>0&&(0,r.jsxs)("div",{className:"border-b border-border bg-secondary/50 p-3",children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["\uD83D\uDCF8 Reference Images (",E.length,")"]}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap",children:E.map((e,t)=>(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden border border-border",children:[(0,r.jsx)(eA.default,{src:e.url,alt:"Reference ".concat(t+1),width:64,height:64,className:"w-full h-full object-cover"}),(0,r.jsx)("div",{className:"absolute top-0 right-0 bg-black/70 text-white text-[10px] px-1",children:0===t&&u.content?"\uD83D\uDCE4":"\uD83D\uDD17"})]},t))})]}),b&&(0,r.jsx)(G,{className:"flex w-full animate-pulse items-center justify-center rounded-b-xl",style:{aspectRatio:L},children:(0,r.jsx)(q.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!b&&!(null==(n=u.generated)?void 0:n.url)&&(0,r.jsx)("div",{className:"flex w-full items-center justify-center rounded-b-xl bg-secondary p-4",style:{aspectRatio:L},children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(en.A,{size:12,className:"-translate-y-px inline"})," to create an image"]})}),!b&&(null==(s=u.generated)?void 0:s.url)&&(0,r.jsx)(eA.default,{src:u.generated.url,alt:"Generated image",width:1e3,height:1e3,className:"w-full rounded-b-xl object-cover"}),(0,r.jsx)(K.T,{value:null!=(c=u.instructions)?c:"",onChange:e=>g(m,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"})]})};n(51543),n(88313);var eB=n(76908),eV=n(30232),eU=n(93777),eG=n(77004),e$=n(55404),eq=n(31363),eW=n(75699),eX=n(22984),eK=n(79371),eJ=n(78336),eY=n(85210),eZ=n(67327),eQ=n(8624),e0=n(30554),e1=n(51876),e2=n(52781),e5=n(64015),e4=n(88065),e3=n(93736),e6=n(8023),e9=n(64832),e8=n(48800),e7=n(61194),te=n(45833),tt=n(57456),tn=n(70355),tr=n(80003),ts=n(97239),ta=n(72161),tl=n(9602),ti=n(41669),to=n(58543);let td=new e1.hs("slash"),tc=eB.bP.create({name:"slash",priority:101,addOptions(){return{HTMLAttributes:{},renderText(e){var t;let{options:n,node:r}=e;return"".concat(n.suggestion.char).concat(null!=(t=r.attrs.label)?t:r.attrs.id)},deleteTriggerWithBackspace:!1,renderHTML(e){var t;let{options:n,node:r}=e;return["span",(0,eB.KV)(this.HTMLAttributes,n.HTMLAttributes),"".concat(n.suggestion.char).concat(null!=(t=r.attrs.label)?t:r.attrs.id)]},suggestion:{char:"/",pluginKey:td,command:e=>{var t,n,r;let{editor:s,range:a,props:l}=e,i=s.view.state.selection.$to.nodeAfter;(null==i||null==(t=i.text)?void 0:t.startsWith(" "))&&(a.to+=1),s.chain().focus().insertContentAt(a,[{type:this.name,attrs:l},{type:"text",text:" "}]).run(),null==(r=s.view.dom.ownerDocument.defaultView)||null==(n=r.getSelection())||n.collapseToEnd()},allow:e=>{let{state:t,range:n}=e,r=t.doc.resolve(n.from),s=t.schema.nodes[this.name];return!!r.parent.type.contentMatch.matchType(s)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}}),parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{node:t,HTMLAttributes:n}=e,r={...this.options};r.HTMLAttributes=(0,eB.KV)({"data-type":this.name},this.options.HTMLAttributes,n);let s=this.options.renderHTML({options:r,node:t});return"string"==typeof s?["span",(0,eB.KV)({"data-type":this.name},this.options.HTMLAttributes,n),s]:s},renderText(e){let{node:t}=e;return this.options.renderText({options:this.options,node:t})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(e=>{let{tr:t,state:n}=e,r=!1,{selection:s}=n,{empty:a,anchor:l}=s;return!!a&&(n.doc.nodesBetween(l-1,l,(e,n)=>{if(e.type.name===this.name)return r=!0,t.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",n,n+e.nodeSize),!1}),r)})}},addProseMirrorPlugins(){return[(0,e4.Ay)({editor:this.editor,...this.options.suggestion})]}}),tu=(0,e6.$)(e9.l),tm=e=>{let{items:t,editor:n,range:s}=e;return(0,r.jsxs)(em.uB,{id:"slash-command",className:"border shadow",onKeyDown:e=>{e.stopPropagation()},children:[(0,r.jsx)(em.xL,{className:"flex w-full items-center justify-center p-4 text-muted-foreground text-sm",children:(0,r.jsx)("p",{children:"No results"})}),(0,r.jsx)(em.oI,{children:t.map(e=>(0,r.jsxs)(em.h_,{onSelect:()=>e.command({editor:n,range:s}),className:"flex items-center gap-3 pr-3",children:[(0,r.jsx)("div",{className:"flex size-9 shrink-0 items-center justify-center rounded border bg-secondary",children:(0,r.jsx)(e.icon,{size:16,className:"text-muted-foreground"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium text-sm",children:e.title}),(0,r.jsx)("span",{className:"text-muted-foreground text-xs",children:e.description})]})]},e.title))})]})},tp=e=>{if(["ArrowUp","ArrowDown","Enter"].includes(e.key)){let t=document.querySelector("#slash-command");if(t)return e.preventDefault(),t.dispatchEvent(new KeyboardEvent("keydown",{key:e.key,cancelable:!0,bubbles:!0})),!0}},th=e=>{let{className:t,extensions:n,limit:s,placeholder:a,...l}=e,i=[e5.A.configure({codeBlock:!1,bulletList:{HTMLAttributes:{class:(0,o.cn)("list-outside list-disc pl-4")}},orderedList:{HTMLAttributes:{class:(0,o.cn)("list-outside list-decimal pl-4")}},listItem:{HTMLAttributes:{class:(0,o.cn)("leading-normal")}},blockquote:{HTMLAttributes:{class:(0,o.cn)("border-l border-l-2 pl-2")}},code:{HTMLAttributes:{class:(0,o.cn)("rounded-md bg-muted px-1.5 py-1 font-medium font-mono"),spellcheck:"false"}},horizontalRule:{HTMLAttributes:{class:(0,o.cn)("mt-4 mb-6 border-muted-foreground border-t")}},dropcursor:{color:"var(--border)",width:4}}),e0.Ay,eG.A.configure({placeholder:a,emptyEditorClass:"before:text-muted-foreground before:content-[attr(data-placeholder)] before:float-left before:h-0 before:pointer-events-none"}),eV.A.configure({limit:s}),eU.A.configure({lowlight:tu,HTMLAttributes:{class:(0,o.cn)("rounded-md border p-4 text-sm","bg-background text-foreground","[&_.hljs-doctag]:text-[#d73a49] [&_.hljs-keyword]:text-[#d73a49] [&_.hljs-meta_.hljs-keyword]:text-[#d73a49] [&_.hljs-template-tag]:text-[#d73a49] [&_.hljs-template-variable]:text-[#d73a49] [&_.hljs-type]:text-[#d73a49] [&_.hljs-variable.language_]:text-[#d73a49]","[&_.hljs-title.class_.inherited__]:text-[#6f42c1] [&_.hljs-title.class_]:text-[#6f42c1] [&_.hljs-title.function_]:text-[#6f42c1] [&_.hljs-title]:text-[#6f42c1]","[&_.hljs-attr]:text-[#005cc5] [&_.hljs-attribute]:text-[#005cc5] [&_.hljs-literal]:text-[#005cc5] [&_.hljs-meta]:text-[#005cc5] [&_.hljs-number]:text-[#005cc5] [&_.hljs-operator]:text-[#005cc5] [&_.hljs-selector-attr]:text-[#005cc5] [&_.hljs-selector-class]:text-[#005cc5] [&_.hljs-selector-id]:text-[#005cc5] [&_.hljs-variable]:text-[#005cc5]","[&_.hljs-meta_.hljs-string]:text-[#032f62] [&_.hljs-regexp]:text-[#032f62] [&_.hljs-string]:text-[#032f62]","[&_.hljs-built_in]:text-[#e36209] [&_.hljs-symbol]:text-[#e36209]","[&_.hljs-code]:text-[#6a737d] [&_.hljs-comment]:text-[#6a737d] [&_.hljs-formula]:text-[#6a737d]","[&_.hljs-name]:text-[#22863a] [&_.hljs-quote]:text-[#22863a] [&_.hljs-selector-pseudo]:text-[#22863a] [&_.hljs-selector-tag]:text-[#22863a]","[&_.hljs-subst]:text-[#24292e]","[&_.hljs-section]:font-bold [&_.hljs-section]:text-[#005cc5]","[&_.hljs-bullet]:text-[#735c0f]","[&_.hljs-emphasis]:text-[#24292e] [&_.hljs-emphasis]:italic","[&_.hljs-strong]:font-bold [&_.hljs-strong]:text-[#24292e]","[&_.hljs-addition]:bg-[#f0fff4] [&_.hljs-addition]:text-[#22863a]","[&_.hljs-deletion]:bg-[#ffeef0] [&_.hljs-deletion]:text-[#b31d28]")}}),eq.A,e$.A,tc.configure({suggestion:{items:async e=>{let{editor:t,query:n}=e,r=await [{title:"Text",description:"Just start typing with plain text.",searchTerms:["p","paragraph"],icon:e8.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleNode("paragraph","paragraph").run()}},{title:"To-do List",description:"Track tasks with a to-do list.",searchTerms:["todo","task","list","check","checkbox"],icon:e7.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleTaskList().run()}},{title:"Heading 1",description:"Big section heading.",searchTerms:["title","big","large"],icon:te.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:1}).run()}},{title:"Heading 2",description:"Medium section heading.",searchTerms:["subtitle","medium"],icon:tt.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:2}).run()}},{title:"Heading 3",description:"Small section heading.",searchTerms:["subtitle","small"],icon:tn.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:3}).run()}},{title:"Bullet List",description:"Create a simple bullet list.",searchTerms:["unordered","point"],icon:tr.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleBulletList().run()}},{title:"Numbered List",description:"Create a list with numbering.",searchTerms:["ordered"],icon:ts.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleOrderedList().run()}},{title:"Quote",description:"Capture a quote.",searchTerms:["blockquote"],icon:ta.A,command:e=>{let{editor:t,range:n}=e;return t.chain().focus().deleteRange(n).toggleNode("paragraph","paragraph").toggleBlockquote().run()}},{title:"Code",description:"Capture a code snippet.",searchTerms:["codeblock"],icon:tl.A,command:e=>{let{editor:t,range:n}=e;return t.chain().focus().deleteRange(n).toggleCodeBlock().run()}},{title:"Table",description:"Add a table view to organize data.",searchTerms:["table"],icon:ti.A,command:e=>{let{editor:t,range:n}=e;return t.chain().focus().deleteRange(n).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}}];return n?new e3.A(r,{keys:["title","description","searchTerms"],threshold:.2,minMatchCharLength:1}).search(n).map(e=>e.item):r},char:"/",render:()=>{let e,t;return{onStart:n=>{e=new e2.NV(tm,{props:n,editor:n.editor}),t=(0,to.Ay)(document.body,{getReferenceClientRect:()=>{var e;return(null==(e=n.clientRect)?void 0:e.call(n))||new DOMRect},appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(n){e.updateProps(n),t.setProps({getReferenceClientRect:()=>{var e;return(null==(e=n.clientRect)?void 0:e.call(n))||new DOMRect}})},onKeyDown:n=>"Escape"===n.event.key?(t.hide(),e.destroy(),!0):tp(n.event)||!1,onExit(){t.destroy(),e.destroy()}}}}}),eW.XI.configure({HTMLAttributes:{class:(0,o.cn)("relative m-0 mx-auto my-3 w-full table-fixed border-collapse overflow-hidden rounded-none text-sm")},allowTableNodeSelection:!0}),eJ.H.configure({HTMLAttributes:{class:(0,o.cn)("relative box-border min-w-[1em] border p-1 text-start align-top")}}),eX.n.configure({HTMLAttributes:{class:(0,o.cn)("relative box-border min-w-[1em] border p-1 text-start align-top")}}),eK.A.configure({HTMLAttributes:{class:(0,o.cn)("relative box-border min-w-[1em] border bg-secondary p-1 text-start align-top font-medium font-semibold text-muted-foreground")}}),eZ._.configure({HTMLAttributes:{class:"before:translate-x-[17px]"}}),eY.L.configure({HTMLAttributes:{class:"flex items-start gap-1"},nested:!0}),eQ.xJ.configure({mergeNestedSpanStyles:!0})];return(0,r.jsx)(F.Bc,{children:(0,r.jsx)("div",{className:(0,o.cn)(t,"[&_.ProseMirror-focused]:outline-none"),children:(0,r.jsx)(e2.zz,{extensions:[...i,...null!=n?n:[]],editorProps:{handleKeyDown:(e,t)=>{tp(t)}},...l})})})},tx=e=>{let{data:t,id:n,type:s,title:a}=e,{updateNodeData:l}=(0,d.VH)(),i=(0,w.useRef)(null),{project:c}=(0,x.By)();return(0,r.jsx)(V,{id:n,data:t,title:a,type:s,className:"overflow-hidden p-0",children:(0,r.jsx)("div",{className:"nowheel h-full max-h-[30rem] overflow-auto",children:(0,r.jsx)(th,{onCreate:e=>{i.current=e.editor,c&&e.editor.chain().focus().run()},immediatelyRender:!1,content:t.content,placeholder:"Start typing...",className:(0,o.cn)("prose prose-sm dark:prose-invert size-full p-6","[&_p:first-child]:mt-0","[&_p:last-child]:mb-0"),onUpdate:e=>{let{editor:t}=e;l(n,{content:t.getJSON(),text:t.getText()})}})})})};n(48493);let tg=e=>{let{className:t,from:n,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("group flex w-full items-end justify-end gap-2 py-4","user"===n?"is-user":"is-assistant flex-row-reverse justify-end","[&>div]:max-w-[80%]",t),...s})},tf=e=>{let{children:t,className:n,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col gap-2 rounded-lg px-4 py-3 text-sm","bg-muted text-foreground","group-[.is-user]:bg-primary group-[.is-user]:text-primary-foreground",n),...s,children:(0,r.jsx)("div",{className:"is-user:dark",children:t})})};var tv=n(6504),tj=n(22133);let tb={ol:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("ol",{className:(0,o.cn)("ml-4 list-outside list-decimal",s),...a,children:n})},li:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("li",{className:(0,o.cn)("py-1",s),...a,children:n})},ul:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("ul",{className:(0,o.cn)("ml-4 list-outside list-disc",s),...a,children:n})},strong:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("span",{className:(0,o.cn)("font-semibold",s),...a,children:n})},a:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("a",{className:(0,o.cn)("font-medium text-primary underline",s),target:"_blank",rel:"noreferrer",...a,children:n})},h1:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("h1",{className:(0,o.cn)("mt-6 mb-2 font-semibold text-3xl",s),...a,children:n})},h2:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("h2",{className:(0,o.cn)("mt-6 mb-2 font-semibold text-2xl",s),...a,children:n})},h3:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("h3",{className:(0,o.cn)("mt-6 mb-2 font-semibold text-xl",s),...a,children:n})},h4:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("h4",{className:(0,o.cn)("mt-6 mb-2 font-semibold text-lg",s),...a,children:n})},h5:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("h5",{className:(0,o.cn)("mt-6 mb-2 font-semibold text-base",s),...a,children:n})},h6:e=>{let{node:t,children:n,className:s,...a}=e;return(0,r.jsx)("h6",{className:(0,o.cn)("mt-6 mb-2 font-semibold text-sm",s),...a,children:n})},pre:e=>{let{node:t,className:n,children:s}=e;return(0,r.jsx)("pre",{className:(0,o.cn)("my-4 overflow-x-auto rounded-lg bg-zinc-900 p-4 text-sm text-zinc-100",n),children:s})},code:e=>{let{node:t,className:n,children:s,...a}=e;return(null==n?void 0:n.includes("language-"))?(0,r.jsx)("code",{className:(0,o.cn)("block",n),...a,children:s}):(0,r.jsx)("code",{className:"rounded bg-zinc-800 px-1.5 py-0.5 text-sm text-zinc-200",...a,children:s})}},ty=(0,w.memo)(e=>{let{className:t,options:n,children:s,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",t),...a,children:(0,r.jsx)(tv.oz,{remarkPlugins:[tj.A],components:tb,...n,children:s})})},(e,t)=>e.children===t.children);var tw=n(57259);function tN(e){let{...t}=e;return(0,r.jsx)(tw.bL,{"data-slot":"collapsible",...t})}function tk(e){let{...t}=e;return(0,r.jsx)(tw.R6,{"data-slot":"collapsible-trigger",...t})}function tz(e){let{...t}=e;return(0,r.jsx)(tw.Ke,{"data-slot":"collapsible-content",...t})}var tA=n(28446);let tC=e=>{let{className:t,...n}=e;return(0,r.jsx)(tN,{className:(0,o.cn)("not-prose mb-4 text-primary text-xs",t),...n})},t_=e=>{let{className:t,count:n,children:s,...a}=e;return(0,r.jsx)(tk,{className:"flex items-center gap-2",...a,children:null!=s?s:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"font-medium",children:["Used ",n," sources"]}),(0,r.jsx)(ed.A,{className:"h-4 w-4"})]})})},tS=e=>{let{className:t,...n}=e;return(0,r.jsx)(tz,{className:(0,o.cn)("mt-3 flex flex-col gap-2",t),...n})},tE=e=>{let{href:t,title:n,children:s,...a}=e;return(0,r.jsx)("a",{href:t,className:"flex items-center gap-2",target:"_blank",rel:"noreferrer",...a,children:null!=s?s:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tA.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"block font-medium",children:n})]})})};var tT=n(48751);let tD=(0,n(99732).A)();var tL=n(40674),tR=n(12507);let tI=e=>{var t,n,s,a,l;let{data:i,id:o,type:c,title:u}=e,{updateNodeData:m,getNodes:p,getEdges:h}=(0,d.VH)(),{project:g}=(0,x.By)(),{models:f}=(0,tT.G)(),j=null!=(a=i.model)?a:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});return t?t[0]:"o3"})(f),b=useAnalytics(),[y,N]=useReasoning(),{sendMessage:k,messages:z,setMessages:A,status:C,stop:_}=(0,tL.Y_)({transport:new tR.rL({api:"/api/chat"}),onError:e=>(0,$.H)("Error generating text",e),onFinish:e=>{var t,n,r,s;let{message:a}=e;m(o,{generated:{text:null!=(r=null==(t=a.parts.find(e=>"text"===e.type))?void 0:t.text)?r:"",sources:null!=(s=null==(n=a.parts)?void 0:n.filter(e=>"source-url"===e.type))?s:[]},updatedAt:new Date().toISOString()}),N(e=>({...e,isGenerating:!1})),ea.oR.success("Text generated successfully"),setTimeout(()=>(0,el.j)("credits"),5e3)}}),S=(0,w.useCallback)(async()=>{var e,t;let n=(0,v.FB)({id:o},p(),h()),r=getTextFromTextNodes(n),s=getTranscriptionFromAudioNodes(n),a=getImagesFromImageNodes(n),l=getDescriptionsFromImageNodes(n),d=getTweetContentFromTweetNodes(n),u=getFilesFromFileNodes(n);if(console.log("\uD83D\uDCDD TEXT NODE GENERATING:",{nodeId:o,nodeType:c,incomingNodes:n,textPrompts:r,audioPrompts:s,images:a,imageDescriptions:l,tweetContent:d,files:u,instructions:i.instructions,model:j}),!r.length&&!s.length&&!i.instructions)return void(0,$.H)("Error generating text","No prompts found");let m=[];i.instructions&&m.push("--- Instructions ---",i.instructions),r.length&&m.push("--- Text Prompts ---",...r),s.length&&m.push("--- Audio Prompts ---",...s),l.length&&m.push("--- Image Descriptions ---",...l),d.length&&m.push("--- Tweet Content ---",...d),b.track("canvas","node","generate",{type:c,promptLength:m.join("\n").length,model:j,instructionsLength:null!=(t=null==(e=i.instructions)?void 0:e.length)?t:0,imageCount:a.length,fileCount:u.length});let x=[];for(let e of a)x.push({mediaType:e.type,url:e.url,type:"file"});for(let e of u)x.push({mediaType:e.type,url:e.url,type:"file"});A([]),await k({text:m.join("\n"),files:x},{body:{modelId:j}})},[k,i.instructions,h,p,o,j,c,b.track,A]),E=(0,w.useCallback)(e=>{navigator.clipboard.writeText(e),ea.oR.success("Copied to clipboard")},[]),T=(0,w.useMemo)(()=>{var e,t;let n=[];if(n.push({children:(0,r.jsx)(ex,{value:j,options:f,className:"w-[200px] rounded-full",onChange:e=>m(o,{model:e})},o)}),"submitted"===C||"streaming"===C)n.push({tooltip:"Stop",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-full",onClick:_,disabled:!(null==g?void 0:g.id),children:(0,r.jsx)(eL.A,{size:12})})});else if(z.length||(null==(e=i.generated)?void 0:e.text)){let e=z.length?z.filter(e=>"assistant"===e.role).map(e=>{var t,n;return null!=(n=null==(t=e.parts.find(e=>"text"===e.type))?void 0:t.text)?n:""}).join("\n"):null==(t=i.generated)?void 0:t.text;n.push({tooltip:"Regenerate",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-full",onClick:S,disabled:!(null==g?void 0:g.id),children:(0,r.jsx)(et.A,{size:12})})}),n.push({tooltip:"Copy",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-full",disabled:!e,onClick:()=>E(null!=e?e:""),variant:"ghost",children:(0,r.jsx)(O.A,{size:12})})})}else n.push({tooltip:"Generate",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-full",onClick:S,disabled:!(null==g?void 0:g.id),children:(0,r.jsx)(en.A,{size:12})})});return i.updatedAt&&n.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(i.updatedAt))),children:(0,r.jsx)(X.$,{size:"icon",variant:"ghost",className:"rounded-full",children:(0,r.jsx)(es.A,{size:12})})}),n},[null==(t=i.generated)?void 0:t.text,i.updatedAt,S,m,j,o,z,null==g?void 0:g.id,C,_,E,f]),D=z.filter(e=>"user"!==e.role);return(0,w.useEffect)(()=>{z.some(e=>e.parts.some(e=>"reasoning"===e.type))&&!y.isReasoning&&"streaming"===C&&N({isReasoning:!0,isGenerating:!0})},[z,y,C,N]),(0,r.jsxs)(V,{id:o,data:i,title:u,type:c,toolbar:T,children:[(0,r.jsxs)("div",{className:"nowheel h-full max-h-[30rem] flex-1 overflow-auto rounded-t-3xl rounded-b-xl bg-secondary p-4",children:["submitted"===C&&(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(G,{className:"h-4 w-60 animate-pulse rounded-lg"}),(0,r.jsx)(G,{className:"h-4 w-40 animate-pulse rounded-lg"}),(0,r.jsx)(G,{className:"h-4 w-50 animate-pulse rounded-lg"})]}),(null==(n=i.generated)?void 0:n.text)&&!D.length&&"submitted"!==C&&(0,r.jsx)(tv.oz,{children:i.generated.text}),!(null==(s=i.generated)?void 0:s.text)&&!D.length&&"submitted"!==C&&(0,r.jsx)("div",{className:"flex aspect-video w-full items-center justify-center bg-secondary",children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(en.A,{size:12,className:"-translate-y-px inline"})," ","to generate text"]})}),!!D.length&&"submitted"!==C&&D.map(e=>{var t,n,s;return(0,r.jsx)(tg,{from:"assistant"===e.role?"assistant":"user",className:"p-0 [&>div]:max-w-none",children:(0,r.jsxs)("div",{children:[!!(null==(t=e.parts.filter(e=>"source-url"===e.type))?void 0:t.length)&&(0,r.jsxs)(tC,{children:[(0,r.jsx)(t_,{count:e.parts.filter(e=>"source-url"===e.type).length}),(0,r.jsx)(tS,{children:e.parts.filter(e=>"source-url"===e.type).map(e=>{let{url:t,title:n}=e;return(0,r.jsx)(tE,{href:t,title:null!=n?n:new URL(t).hostname},null!=t?t:"")})})]}),(0,r.jsx)(tf,{className:"bg-transparent p-0",children:(0,r.jsx)(ty,{children:null!=(s=null==(n=e.parts.find(e=>"text"===e.type))?void 0:n.text)?s:""})})]})},e.id)})]}),(0,r.jsx)(K.T,{value:null!=(l=i.instructions)?l:"",onChange:e=>m(o,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"}),(0,r.jsx)(tD.In,{children:z.flatMap(e=>e.parts.filter(e=>"reasoning"===e.type).flatMap(e=>{var t;return null!=(t=e.text)?t:""}))})]})},tM=(0,_.createServerReference)("7fe0e41262b036c4c5662fca23fc77825bc3d2d504",_.callServer,void 0,_.findSourceMapURL,"getTweetData");var tO=n(5834),tH=n(49236);let tP=e=>{var t;let{data:n,id:s,type:a,title:l}=e,[i,c]=(0,w.useState)(""),{updateNodeData:u}=(0,d.VH)(),[m,p]=(0,w.useState)(!1),h=async e=>{if(e.preventDefault(),i&&!m){p(!0);try{let e=await tM(i);if("error"in e)throw Error(e.error);u(s,{content:{id:i,text:e.text,author:e.author,date:e.date}})}catch(e){(0,$.H)("Error fetching tweet",e)}finally{p(!1)}}};return(0,r.jsx)(V,{id:s,data:n,type:a,title:l,children:(null==(t=n.content)?void 0:t.id)?(0,r.jsx)("div",{className:(0,o.cn)("[&_.react-tweet-theme]:m-0!","[&_.react-tweet-theme]:rounded-3xl!"),children:(0,r.jsx)(tH.Y,{id:n.content.id})}):(0,r.jsxs)("form",{onSubmit:h,className:"flex items-center gap-2 p-1",children:[(0,r.jsx)(tO.p,{type:"text",placeholder:"Tweet ID",value:i,onChange:e=>{let{target:t}=e;return c(t.value)},className:"rounded-full"}),(0,r.jsx)(X.$,{type:"submit",className:"rounded-full",disabled:m,children:m?(0,r.jsx)(q.A,{className:"animate-spin"}):"Submit"})]})})},tF=e=>{let{data:t,id:n,type:s,title:a}=e,{updateNodeData:l}=(0,d.VH)(),[o,c]=(0,w.useState)(),[u,m]=(0,w.useState)(!1),p=async e=>{if(!u)try{if(!e.length)throw Error("No file selected");m(!0),c(e);let[t]=e;console.log("\uD83D\uDCE4 Uploading video to Cloudinary...");let r=await i(t,"flow_generator/videos");l(n,{content:{url:r.url,type:t.type}}),console.log("✅ VIDEO UPLOADED TO CLOUDINARY:",{nodeId:n,fileName:t.name,cloudinaryUrl:r.url,fileSize:t.size})}catch(e){(0,$.H)("Error uploading video",e)}finally{m(!1)}};return(0,r.jsxs)(V,{id:n,data:t,type:s,title:a,children:[u&&(0,r.jsx)(G,{className:"flex aspect-video w-full animate-pulse items-center justify-center",children:(0,r.jsx)(q.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!u&&t.content&&(0,r.jsx)("video",{src:t.content.url,className:"h-auto w-full",autoPlay:!0,muted:!0,loop:!0}),!u&&!t.content&&(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,accept:{"video/*":[]},onDrop:p,src:o,onError:console.error,className:"rounded-none border-none bg-transparent shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{className:"p-4"}),(0,r.jsx)(U.Pi,{})]})]})},tB=(0,_.createServerReference)("7f7a90679cedc35687d6c769ad1225cfb14eea8929",_.callServer,void 0,_.findSourceMapURL,"generateVideoAction"),tV={"sora-2":{id:"sora-2",label:"Sora 2 (Fast)",chef:Q.openai,providers:[Q.openai],provider:"openai",default:!0,sizes:["1280x720","1920x1080","1080x1920","720x1280"],durations:[4,8,12,16,20],supportsReference:!0,supportsRemix:!0},"sora-2-pro":{id:"sora-2-pro",label:"Sora 2 Pro (Quality)",chef:Q.openai,providers:[Q.openai],provider:"openai",sizes:["1280x720","1920x1080","1080x1920","720x1280"],durations:[4,8,12,16,20],supportsReference:!0,supportsRemix:!0},veo3:{id:"veo3",label:"Veo 3 (Quality)",chef:Q.openai,providers:[Q.openai],provider:"kieai",aspectRatios:["16:9","9:16","Auto"],supportsReference:!0,supportsRemix:!1,generationTypes:["TEXT_2_VIDEO","FIRST_AND_LAST_FRAMES_2_VIDEO","REFERENCE_2_VIDEO"]},veo3_fast:{id:"veo3_fast",label:"Veo 3 Fast",chef:Q.openai,providers:[Q.openai],provider:"kieai",aspectRatios:["16:9","9:16","Auto"],supportsReference:!0,supportsRemix:!1,generationTypes:["TEXT_2_VIDEO","FIRST_AND_LAST_FRAMES_2_VIDEO","REFERENCE_2_VIDEO"]},"kling-v2.1":{id:"kling-v2.1",label:"Kling AI v2.1",chef:Q.openai,providers:[Q.openai],provider:"aiml",durations:[5,10],supportsReference:!0,supportsRemix:!1},"runway-gen3":{id:"runway-gen3",label:"Gen-3 Alpha",chef:Q.runway,providers:[Q.runway],provider:"runway"},"luma-dream-machine":{id:"luma-dream-machine",label:"Dream Machine",chef:Q.luma,providers:[Q.luma],provider:"luma"}};var tU=n(72799);function tG(e){let{...t}=e;return(0,r.jsx)(tU.bL,{"data-slot":"select",...t})}function t$(e){let{...t}=e;return(0,r.jsx)(tU.WT,{"data-slot":"select-value",...t})}function tq(e){let{className:t,size:n="default",children:s,...a}=e;return(0,r.jsxs)(tU.l9,{"data-slot":"select-trigger","data-size":n,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a,children:[s,(0,r.jsx)(tU.In,{asChild:!0,children:(0,r.jsx)(ed.A,{className:"size-4 opacity-50"})})]})}function tW(e){let{className:t,children:n,position:s="popper",...a}=e;return(0,r.jsx)(tU.ZL,{children:(0,r.jsxs)(tU.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...a,children:[(0,r.jsx)(tK,{}),(0,r.jsx)(tU.LM,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),(0,r.jsx)(tJ,{})]})})}function tX(e){let{className:t,children:n,...s}=e;return(0,r.jsxs)(tU.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(tU.VF,{children:(0,r.jsx)(eM.A,{className:"size-4"})})}),(0,r.jsx)(tU.p4,{children:n})]})}function tK(e){let{className:t,...n}=e;return(0,r.jsx)(tU.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(ec.A,{className:"size-4"})})}function tJ(e){let{className:t,...n}=e;return(0,r.jsx)(tU.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(ed.A,{className:"size-4"})})}let tY=["1280x720","1920x1080","1080x1920","720x1280"],tZ=e=>{let{value:t,modelId:n,onChange:s,className:a}=e,l=tV[n].sizes||tY;return(0,r.jsxs)(tG,{value:t,onValueChange:s,children:[(0,r.jsx)(tq,{className:null!=a?a:"rounded-md h-9",children:(0,r.jsx)(t$,{placeholder:"Select size"})}),(0,r.jsx)(tW,{className:"z-[1000]",children:l.map(e=>(0,r.jsx)(tX,{value:e,children:e},e))})]})},tQ=[4,8,12,16,20],t0=e=>{let{value:t,modelId:n,onChange:s,className:a}=e,l=tV[n].durations||tQ;return(0,r.jsxs)(tG,{value:t.toString(),onValueChange:e=>s(Number(e)),children:[(0,r.jsx)(tq,{className:null!=a?a:"rounded-md h-9",children:(0,r.jsx)(t$,{placeholder:"Select duration"})}),(0,r.jsx)(tW,{className:"z-[1000]",children:l.map(e=>(0,r.jsxs)(tX,{value:e.toString(),children:[e,"s"]},e))})]})},t1=e=>{var t,n,s,i,o,c,u,m,p,h,g;let{data:f,id:j,type:b,title:y}=e,{updateNodeData:N,getNodes:k,getEdges:z}=(0,d.VH)(),[A,C]=(0,w.useState)(!1),[_,S]=(0,w.useState)(0),[E,T]=(0,w.useState)(""),{project:D}=(0,x.By)(),L=null!=(c=f.model)?c:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});if(!t)throw Error("No default model found");return t[0]})(tV),R=null!=(u=f.size)?u:"1280x720",I=null!=(m=f.seconds)?m:8,M=J(),O="sora-2"===L||"sora-2-pro"===L,H=tV[L],P=(0,v.FB)({id:j},k(),z()),F=l(P),B=P.filter(e=>"video"===e.type&&e.data.content).map(e=>e.data.content),U=[...f.content?[f.content]:[],...F,...B],G=async()=>{if(!A&&(null==D?void 0:D.id))try{var e,t;let n=a(P),r=[];f.instructions&&r.push(f.instructions),r.push(...n);let s=r.join("\n\n");if(console.log("\uD83C\uDFAC VIDEO NODE GENERATING:",{nodeId:j,nodeType:b,incomingNodes:P.map(e=>({id:e.id,type:e.type,data:e.data})),textPrompts:n,textPromptsCount:n.length,uploadedMedia:f.content,incomingImages:F,incomingVideos:B,allReferenceMedia:U,totalReferenceMedia:U.length,instructions:f.instructions,combinedPrompt:s,model:L}),!s&&!U.length)throw Error("No input provided (need text prompt or reference media)");C(!0),S(0),T("Preparing..."),M.track("canvas","node","generate",{type:b,promptLength:s.length,textPromptsLength:n.length,model:L,instructionsLength:null!=(t=null==(e=f.instructions)?void 0:e.length)?t:0,referenceMediaCount:U.length,hasUploadedMedia:!!f.content});let l=await eD(U);T("Submitting...");let i=await tB({modelId:L,prompt:s,referenceMedia:l,nodeId:j,projectId:D.id,size:R,seconds:I});if("error"in i)throw Error(i.error);N(j,i.nodeData),ea.oR.success("Video generated successfully"),setTimeout(()=>(0,el.j)("credits"),5e3)}catch(e){(0,$.H)("Error generating video",e)}finally{C(!1),S(0),T("")}},W=[{children:(0,r.jsx)(ex,{value:L,options:tV,className:"w-[200px] rounded-md h-9",onChange:e=>N(j,{model:e})},j)},...O&&H.sizes?[{children:(0,r.jsx)(tZ,{value:R,modelId:L,onChange:e=>N(j,{size:e}),className:"w-[120px] rounded-md h-9"})}]:[],...O&&H.durations?[{children:(0,r.jsx)(t0,{value:I,modelId:L,onChange:e=>N(j,{seconds:e}),className:"w-[80px] rounded-md h-9"})}]:[],A?{tooltip:"Generating...",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-md h-9",disabled:!0,children:(0,r.jsx)(q.A,{className:"animate-spin",size:12})})}:{tooltip:(null==(t=f.generated)?void 0:t.url)?"Regenerate":"Generate",children:(0,r.jsx)(X.$,{size:"icon",className:"rounded-md h-9",onClick:G,disabled:A||!(null==D?void 0:D.id),children:(null==(n=f.generated)?void 0:n.url)?(0,r.jsx)(et.A,{size:12}):(0,r.jsx)(en.A,{size:12})})}];return(null==(s=f.generated)?void 0:s.url)&&W.push({tooltip:"Download",children:(0,r.jsx)(X.$,{variant:"ghost",size:"icon",className:"rounded-md h-9",onClick:()=>Y(f.generated,j,"mp4"),children:(0,r.jsx)(er.A,{size:12})})}),f.updatedAt&&W.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(f.updatedAt))),children:(0,r.jsx)(X.$,{size:"icon",variant:"ghost",className:"rounded-md h-9",children:(0,r.jsx)(es.A,{size:12})})}),(0,r.jsxs)(V,{id:j,data:f,type:b,title:y,toolbar:W,children:[U.length>0&&(0,r.jsxs)("div",{className:"border-b border-border bg-secondary/50 p-3",children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["\uD83C\uDFAC Reference Media (",U.length,")"]}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap",children:U.map((e,t)=>(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden border border-border",children:[e.type.startsWith("image")?(0,r.jsx)(eA.default,{src:e.url,alt:"Reference ".concat(t+1),width:64,height:64,className:"w-full h-full object-cover"}):(0,r.jsx)("video",{src:e.url,className:"w-full h-full object-cover",muted:!0}),(0,r.jsx)("div",{className:"absolute top-0 right-0 bg-black/70 text-white text-[10px] px-1",children:0===t&&f.content?"\uD83D\uDCE4":"\uD83D\uDD17"})]},t))})]}),A&&(0,r.jsx)("div",{className:"flex aspect-video w-full items-center justify-center rounded-b-xl bg-secondary/50 relative",children:(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-3 z-10",children:[(0,r.jsx)(q.A,{size:32,className:"animate-spin text-primary"}),(0,r.jsxs)("div",{className:"text-center space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:E||"Generating..."}),O&&(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[R," • ",I,"s • ",H.label]})]}),_>0&&(0,r.jsx)("div",{className:"w-48 h-2 bg-secondary rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-primary transition-all duration-300",style:{width:"".concat(_,"%")}})})]})}),!A&&!(null==(i=f.generated)?void 0:i.url)&&(0,r.jsx)("div",{className:"flex aspect-video w-full items-center justify-center rounded-b-xl bg-secondary",children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(en.A,{size:12,className:"-translate-y-px inline"})," to generate video"]})}),(null==(o=f.generated)?void 0:o.url)&&!A&&(0,r.jsx)("video",{src:f.generated.url,width:null!=(p=f.width)?p:800,height:null!=(h=f.height)?h:450,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full rounded-b-xl object-cover"}),(0,r.jsx)(K.T,{value:null!=(g=f.instructions)?g:"",onChange:e=>N(j,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"})]})},t2={image:e=>{let t=(0,d.d)({id:e.id,handleType:"target"}).length?eF:eC;return(0,r.jsx)(t,{...e,title:"Image"})},text:e=>{let t=(0,d.d)({id:e.id,handleType:"target"}).length?tI:tx;return(0,r.jsx)(t,{...e,title:"Text"})},drop:e=>{let{data:t,id:n}=e,{addNodes:s,deleteElements:a,getNode:l,addEdges:i,getNodeConnections:o}=(0,d.VH)(),c=(0,w.useRef)(null);return(0,w.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a({nodes:[{id:n}]})},t=e=>{let t=c.current;t&&!t.contains(e.target)&&a({nodes:[{id:n}]})};return window.addEventListener("keydown",e),setTimeout(()=>{window.addEventListener("click",t)},50),()=>{window.removeEventListener("keydown",e),window.removeEventListener("click",t)}},[a,n]),(0,r.jsx)("div",{ref:c,children:(0,r.jsx)(V,{id:n,data:t,type:"drop",title:"Add a new node",children:(0,r.jsxs)(em.uB,{className:"rounded-lg",children:[(0,r.jsx)(em.G7,{placeholder:"Type a command or search..."}),(0,r.jsxs)(em.oI,{children:[(0,r.jsx)(em.xL,{children:"No results found."}),(0,r.jsx)(em.L$,{heading:"Add node",children:eN.o.filter(e=>"file"!==e.id&&"tweet"!==e.id).map(e=>(0,r.jsxs)(em.h_,{onSelect:()=>((e,r)=>{let d=l(n),c=(null==d?void 0:d.position)||{x:0,y:0},u=o({nodeId:n});a({nodes:[{id:n}]});let m=(0,y.Ak)(),{data:p,...h}=null!=r?r:{};for(let n of(s({id:m,type:e,position:c,data:{...p||{}},origin:[0,.5],...h}),u))i({id:(0,y.Ak)(),source:t.isSource?m:n.source,target:t.isSource?n.source:m,type:"animated"})})(e.id,e.data),children:[(0,r.jsx)(e.icon,{size:16}),e.label]},e.id))})]})]})})})},video:e=>{let t=(0,d.d)({id:e.id,handleType:"target"}).length?t1:tF;return(0,r.jsx)(t,{...e,title:"Video"})},audio:e=>{let t=(0,d.d)({id:e.id,handleType:"target"}).length?ew:W;return(0,r.jsx)(t,{...e,title:"Audio"})},file:e=>(0,r.jsx)(ez,{...e,title:"File"}),tweet:e=>(0,r.jsx)(tP,{...e,title:"Tweet"})};var t5=n(8597),t4=n(79158);let t3=()=>{let{mouseMode:e,setMouseMode:t}=(0,f.kX)();return(0,r.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 z-[60]",children:(0,r.jsx)("div",{className:"bg-black border border-gray-700/50 rounded-2xl p-1 shadow-lg backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"relative flex flex-col w-8 h-16",children:[(0,r.jsx)("div",{className:"absolute inset-1 rounded-xl bg-gray-800/50"}),(0,r.jsx)("div",{className:"absolute w-6 h-6 rounded-lg bg-blue-600 shadow-lg transition-transform duration-300 z-10 ".concat("select"===e?"top-1 left-1":"bottom-1 left-1")}),(0,r.jsx)("div",{className:"relative z-20 w-6 h-6 rounded-lg flex items-center justify-center cursor-pointer transition-colors duration-300 mt-1 ml-1 ".concat("select"===e?"text-white":"text-gray-500"),onClick:()=>t("select"),title:"Selection Mode",children:(0,r.jsx)(t5.A,{className:"h-3.5 w-3.5"})}),(0,r.jsx)("div",{className:"relative z-20 w-6 h-6 rounded-lg flex items-center justify-center cursor-pointer transition-colors duration-300 mb-1 ml-1 ".concat("pan"===e?"text-white":"text-gray-500"),onClick:()=>t("pan"),title:"Pan Mode",children:(0,r.jsx)(t4.A,{className:"h-3.5 w-3.5"})})]})})})},t6=e=>{var t,n;let{children:a,readOnly:l,...i}=e,{project:o,updateProject:c}=(0,x.By)(),{mouseMode:u}=(0,f.kX)(),{onConnect:m,onConnectStart:p,onConnectEnd:A,onEdgesChange:_,onNodesChange:S,nodes:E,edges:I,...M}=null!=i?i:{},O=null==o?void 0:o.content,[H,P]=(0,w.useState)(null!=(t=null!=E?E:null==O?void 0:O.nodes)?t:[]),[F,B]=(0,w.useState)(null!=(n=null!=I?I:null==O?void 0:O.edges)?n:[]);(0,w.useEffect)(()=>{if(null==o?void 0:o.content){var e,t;let n=o.content;P(null!=(e=n.nodes)?e:[]),B(null!=(t=n.edges)?t:[])}},[null==o?void 0:o.id]);let[V,U]=(0,w.useState)([]),{getEdges:G,toObject:$,screenToFlowPosition:q,getNodes:W,getNode:X,updateNode:K}=(0,d.VH)(),[J,Y]=(0,w.useState)({isSaving:!1,lastSaved:null}),Z=(0,k.YQ)(async()=>{if(!J.isSaving&&(null==o?void 0:o.userId)&&(null==o?void 0:o.id))try{Y(e=>({...e,isSaving:!0}));let e=$();await s.k.save(o.id,e),Y(e=>({...e,lastSaved:new Date}))}catch(e){console.error("Error saving workspace",e)}finally{Y(e=>({...e,isSaving:!1}))}},1e3),Q=(0,w.useCallback)(e=>{if(l){let t=e.filter(e=>"select"===e.type);t.length>0&&P(e=>(0,d._0)(t,e));return}P(t=>{let n=(0,d._0)(e,t);return Z(),null==S||S(e),n})},[l,Z,S]),ee=(0,w.useCallback)(e=>{if(l){let t=e.filter(e=>"select"===e.type);t.length>0&&B(e=>(0,d.zW)(t,e));return}B(t=>{let n=(0,d.zW)(e,t);return Z(),null==_||_(e),n})},[l,Z,_]),et=(0,w.useCallback)(e=>{if(l)return;let t=X(e.source),n=X(e.target);console.log("\uD83D\uDD17 NODE CONNECTION MADE:",{source:{id:null==t?void 0:t.id,type:null==t?void 0:t.type,data:null==t?void 0:t.data},target:{id:null==n?void 0:n.id,type:null==n?void 0:n.type,data:null==n?void 0:n.data},connection:{sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}});let r={id:(0,y.Ak)(),type:"animated",...e};B(e=>e.concat(r)),Z(),null==m||m(e)},[l,Z,m,X]),en=(0,w.useCallback)((e,t)=>{let{data:n,...r}=null!=t?t:{},s={id:(0,y.Ak)(),type:e,data:{...n||{}},position:{x:0,y:0},origin:[0,.5],...r};return P(e=>e.concat(s)),Z(),s.id},[Z]),er=(0,w.useCallback)(e=>{let t=X(e);if(!t||!t.type)return;let{id:n,...r}=t,s=en(t.type,{...r,position:{x:t.position.x+200,y:t.position.y+200},selected:!0});setTimeout(()=>{K(e,{selected:!1}),K(s,{selected:!0})},0)},[en,X,K]),es=(0,w.useCallback)((e,t)=>{if(!t.isValid){var n,r;let{clientX:s,clientY:a}="changedTouches"in e?e.changedTouches[0]:e,l=null==(n=t.fromNode)?void 0:n.id,i=(null==(r=t.fromHandle)?void 0:r.type)==="source";if(!l)return;let o=en("drop",{position:q({x:s,y:a}),data:{isSource:!i}});B(e=>e.concat({id:(0,y.Ak)(),source:i?l:o,target:i?o:l,type:"temporary"}))}},[en,q]),ea=(0,w.useCallback)(e=>{let t=W(),n=G(),r=t.find(t=>t.id===e.target);if(e.source){let n=t.find(t=>t.id===e.source);if(!n||!r)return console.log("❌ INVALID CONNECTION: Source or target not found",{source:null==n?void 0:n.type,target:null==r?void 0:r.type}),!1;if(!((e,t)=>"video"!==e.type&&("audio"!==e.type||"text"===t.type))(n,r))return console.log("❌ INVALID CONNECTION: Invalid source-target pair",{source:n.type,target:r.type,reason:"isValidSourceTarget returned false"}),!1;console.log("✅ VALID CONNECTION CHECK:",{source:{id:n.id,type:n.type},target:{id:r.id,type:r.type}})}let s=function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(a.has(r.id))return!1;for(let l of(a.add(r.id),(0,v.RM)(r,t,n)))if(l.id===e.source||s(l,a))return!0};return!!r&&r.id!==e.source&&!s(r)},[W,G]),el=(0,w.useCallback)(()=>{P(e=>e.filter(e=>"drop"!==e.type)),B(e=>e.filter(e=>"temporary"!==e.type)),Z()},[Z]),ei=(0,w.useCallback)(e=>{if(!(e.target instanceof HTMLElement))return;let{x:t,y:n}=q({x:e.clientX,y:e.clientY});en("drop",{position:{x:t,y:n}})},[en,q]),eo=(0,w.useCallback)(()=>{P(e=>e.map(e=>({...e,selected:!0})))},[]),ed=(0,w.useCallback)(()=>{let e=W().filter(e=>e.selected);e.length>0&&U(e)},[W]),ec=(0,w.useCallback)(()=>{if(0===V.length)return;let e=V.map(e=>({...e,id:(0,y.Ak)(),position:{x:e.position.x+200,y:e.position.y+200},selected:!0}));P(e=>e.map(e=>({...e,selected:!1}))),P(t=>[...t,...e])},[V]),eu=(0,w.useCallback)(()=>{for(let e of W().filter(e=>e.selected))er(e.id)},[W,er]),em=(0,w.useCallback)(e=>{e.target instanceof HTMLElement&&e.target.classList.contains("react-flow__pane")||e.preventDefault()},[]);return(0,N.vC)("meta+a",eo,{enableOnContentEditable:!1,preventDefault:!0}),(0,N.vC)("meta+d",eu,{enableOnContentEditable:!1,preventDefault:!0}),(0,N.vC)("meta+c",ed,{enableOnContentEditable:!1,preventDefault:!0}),(0,N.vC)("meta+v",ec,{enableOnContentEditable:!1,preventDefault:!0}),(0,r.jsx)(h.G,{addNode:en,duplicateNode:er,children:(0,r.jsx)(g,{children:(0,r.jsxs)(T,{children:[(0,r.jsx)(D,{onContextMenu:em,children:(0,r.jsx)("div",{className:"h-full w-full ".concat("pan"===u?"cursor-grab active:cursor-grabbing":"cursor-default"),children:(0,r.jsxs)(d.Gc,{deleteKeyCode:l?null:["Backspace","Delete"],nodes:H,onNodesChange:Q,edges:F,onEdgesChange:ee,onConnectStart:l?void 0:el,onConnect:l?void 0:et,onConnectEnd:l?void 0:es,nodeTypes:t2,edgeTypes:C,isValidConnection:l?()=>!1:ea,connectionLineComponent:z,panOnScroll:"pan"===u,fitView:!0,zoomOnDoubleClick:!1,panOnDrag:"pan"===u,selectionOnDrag:"select"===u&&!l,onDoubleClick:l?void 0:ei,nodesDraggable:"select"===u&&!l,nodesConnectable:"select"===u&&!l,elementsSelectable:"select"===u,...M,children:[(0,r.jsx)(d.VS,{}),(0,r.jsx)(t3,{}),a]})})}),(0,r.jsxs)(L,{children:[(0,r.jsxs)(R,{onClick:ei,children:[(0,r.jsx)(j.A,{size:12}),(0,r.jsx)("span",{children:"Add a new node"})]}),(0,r.jsxs)(R,{onClick:eo,children:[(0,r.jsx)(b.A,{size:12}),(0,r.jsx)("span",{children:"Select all"})]})]})]})})})}},13652:(e,t,n)=>{n.d(t,{T:()=>a});var r=n(95155);n(12115);var s=n(64269);function a(e){let{className:t,...n}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...n})}},28611:(e,t,n)=>{n.d(t,{Bc:()=>l,ZI:()=>d,k$:()=>o,m_:()=>i});var r=n(95155);n(12115);var s=n(26852),a=n(64269);function l(e){let{delayDuration:t=0,...n}=e;return(0,r.jsx)(s.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...n})}function i(e){let{...t}=e;return(0,r.jsx)(l,{children:(0,r.jsx)(s.bL,{"data-slot":"tooltip",...t})})}function o(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"tooltip-trigger",...t})}function d(e){let{className:t,sideOffset:n=0,children:l,...i}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{"data-slot":"tooltip-content",sideOffset:n,className:(0,a.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[l,(0,r.jsx)(s.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},39056:(e,t,n)=>{n.d(t,{R:()=>a}),n(95155);var r=n(12115);let s=(0,r.createContext)({plan:"pro",isSubscribed:!0}),a=()=>{let e=(0,r.useContext)(s);if(!e)throw Error("useSubscription must be used within SubscriptionProvider");return e}},48751:(e,t,n)=>{n.d(t,{G:()=>l,L:()=>i});var r=n(95155),s=n(12115);let a=(0,s.createContext)(void 0),l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useGateway must be used within GatewayProvider");return e},i=e=>{let{children:t,models:n}=e;return(0,r.jsx)(a.Provider,{value:{textModels:n},children:t})}},51543:(e,t,n)=>{n.d(t,{SQ:()=>o,_2:()=>d,lp:()=>c,mB:()=>u,rI:()=>l,ty:()=>i});var r=n(95155);n(12115);var s=n(56348),a=n(64269);function l(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"dropdown-menu",...t})}function i(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"dropdown-menu-trigger",...t})}function o(e){let{className:t,sideOffset:n=4,...l}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsx)(s.UC,{"data-slot":"dropdown-menu-content",sideOffset:n,className:(0,a.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...l})})}function d(e){let{className:t,inset:n,variant:l="default",...i}=e;return(0,r.jsx)(s.q7,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":l,className:(0,a.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i})}function c(e){let{className:t,inset:n,...l}=e;return(0,r.jsx)(s.JU,{"data-slot":"dropdown-menu-label","data-inset":n,className:(0,a.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...l})}function u(e){let{className:t,...n}=e;return(0,r.jsx)(s.wv,{"data-slot":"dropdown-menu-separator",className:(0,a.cn)("bg-border -mx-1 my-1 h-px",t),...n})}},59603:(e,t,n)=>{n.d(t,{H2:()=>g,kX:()=>x,sq:()=>h});var r=n(95155),s=n(22539),a=n(12115),l=n(41498),i=n(35299),o=n(5917),d=n(46046),c=n(67168),u=n(30080),m=n(18720);let p=(0,a.createContext)(null),h=e=>{let{children:t}=e,[n,s]=(0,a.useState)("select");return(0,r.jsx)(p.Provider,{value:{mouseMode:n,setMouseMode:s},children:t})},x=()=>{let e=(0,a.useContext)(p);if(!e)throw Error("useMouseMode must be used within MouseModeProvider");return e},g=(0,a.memo)(()=>{let{project:e}=(0,c.By)(),{toObject:t}=(0,s.VH)(),[n,p]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!1),g=(0,a.useCallback)(async()=>{if((null==e?void 0:e.id)&&!n){p(!0);try{let n=t();await u.k.save(e.id,n),x(!0),m.oR.success("Workspace saved successfully!"),setTimeout(()=>{x(!1)},2e3)}catch(e){console.error("Error saving workspace",e),m.oR.error("Failed to save workspace")}finally{p(!1)}}},[e,t,n]);return(0,r.jsx)(s.H2,{orientation:"horizontal",className:"flex-col! rounded-lg border border-gray-700/50 bg-gray-900/95 p-1 shadow-lg backdrop-blur-sm sm:flex-row! [&_button]:!bg-gray-800/80 [&_button]:!text-white [&_button]:!border-gray-600/50 [&_button]:hover:!bg-gray-700/90 [&_button]:rounded-md [&_button]:m-0.5 [&_svg]:!text-white",showInteractive:!1,children:(0,r.jsx)(l.$,{variant:"ghost",size:"icon",onClick:g,disabled:n,className:"h-8 w-8 rounded-md",title:"Save workspace",children:n?(0,r.jsx)(i.A,{className:"h-4 w-4 animate-spin"}):h?(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(d.A,{className:"h-4 w-4"})})})})},60681:(e,t,n)=>{n.d(t,{$U:()=>f,D5:()=>v,G3:()=>m,Ms:()=>p,Zq:()=>b,ex:()=>g,h5:()=>h,oK:()=>x,x4:()=>j});var r=n(95155),s=n(41498),a=n(65949),l=n(88313),i=n(64269),o=n(23558),d=n(74054),c=n(12115);let u=(0,c.createContext)({data:[],type:"item",value:"",onValueChange:()=>{},open:!1,onOpenChange:()=>{},width:200,setWidth:()=>{}}),m=e=>{let{data:t,type:n,defaultValue:s,value:a,onValueChange:i,defaultOpen:d=!1,open:m,onOpenChange:p,...h}=e,[x,g]=(0,o.i)({defaultProp:null!=s?s:"",prop:a,onChange:i}),[f,v]=(0,o.i)({defaultProp:d,prop:m,onChange:p}),[j,b]=(0,c.useState)(200);return(0,r.jsx)(u.Provider,{value:{type:n,value:x,onValueChange:g,open:f,onOpenChange:v,data:t,width:j,setWidth:b},children:(0,r.jsx)(l.AM,{...h,open:f,onOpenChange:v})})},p=e=>{var t;let{children:n,...a}=e,{value:i,data:o,type:m,setWidth:p}=(0,c.useContext)(u),h=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let e=new ResizeObserver(e=>{for(let t of e){let e=t.target.offsetWidth;e&&(null==p||p(e))}});return h.current&&e.observe(h.current),()=>{e.disconnect()}},[p]),(0,r.jsx)(l.Wv,{asChild:!0,children:(0,r.jsx)(s.$,{variant:"outline",...a,ref:h,children:null!=n?n:(0,r.jsxs)("span",{className:"flex w-full items-center justify-between gap-2",children:[i?null==(t=o.find(e=>e.value===i))?void 0:t.label:"Select ".concat(m,"..."),(0,r.jsx)(d.A,{size:16,className:"shrink-0 text-muted-foreground"})]})})})},h=e=>{let{className:t,popoverOptions:n,...s}=e,{width:o}=(0,c.useContext)(u);return(0,r.jsx)(l.hl,{className:(0,i.cn)("p-0",t),style:{width:o},...n,children:(0,r.jsx)(a.uB,{...s})})},x=e=>{let{type:t}=(0,c.useContext)(u);return(0,r.jsx)(a.G7,{placeholder:"Search ".concat(t,"..."),...e})},g=e=>(0,r.jsx)(a.oI,{...e}),f=e=>{let{children:t,...n}=e,{type:s}=(0,c.useContext)(u);return(0,r.jsx)(a.xL,{...n,children:null!=t?t:"No ".concat(s," found.")})},v=e=>(0,r.jsx)(a.L$,{...e}),j=e=>{let{value:t,onValueChange:n,onOpenChange:s}=(0,c.useContext)(u);return(0,r.jsx)(a.h_,{onSelect:e=>{n(e),s(!1)},...e})},b=e=>(0,r.jsx)(a.fx,{...e})},65949:(e,t,n)=>{n.d(t,{G7:()=>o,L$:()=>u,fx:()=>m,h_:()=>p,oI:()=>d,uB:()=>i,xL:()=>c});var r=n(95155);n(12115);var s=n(41808),a=n(86651),l=n(64269);function i(e){let{className:t,...n}=e;return(0,r.jsx)(s.uB,{"data-slot":"command",className:(0,l.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...n})}function o(e){let{className:t,...n}=e;return(0,r.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,r.jsx)(a.A,{className:"size-4 shrink-0 opacity-50"}),(0,r.jsx)(s.uB.Input,{"data-slot":"command-input",className:(0,l.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...n})]})}function d(e){let{className:t,...n}=e;return(0,r.jsx)(s.uB.List,{"data-slot":"command-list",className:(0,l.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...n})}function c(e){let{...t}=e;return(0,r.jsx)(s.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function u(e){let{className:t,...n}=e;return(0,r.jsx)(s.uB.Group,{"data-slot":"command-group",className:(0,l.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...n})}function m(e){let{className:t,...n}=e;return(0,r.jsx)(s.uB.Separator,{"data-slot":"command-separator",className:(0,l.cn)("bg-border -mx-1 h-px",t),...n})}function p(e){let{className:t,...n}=e;return(0,r.jsx)(s.uB.Item,{"data-slot":"command-item",className:(0,l.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}n(64814)},67168:(e,t,n)=>{n.d(t,{By:()=>l,Np:()=>i});var r=n(95155),s=n(12115);let a=(0,s.createContext)({project:null,updateProject:()=>{},setProject:()=>{}}),l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useProject must be used within a ProjectProvider");return e},i=e=>{let{children:t,data:n}=e,[l,i]=(0,s.useState)(n);(0,s.useEffect)(()=>{i(n)},[n]);let o=(0,s.useCallback)(e=>{i(t=>({...t,...e,updatedAt:new Date}))},[]),d=(0,s.useCallback)(e=>{i(e)},[]);return(0,r.jsx)(a.Provider,{value:{project:l,updateProject:o,setProject:d},children:t})}},75093:(e,t,n)=>{n.d(t,{Pi:()=>p,mR:()=>u,qq:()=>h});var r=n(95155),s=n(41498),a=n(64269),l=n(21786),i=n(12115),o=n(11636);let d=e=>{let t=["B","KB","MB","GB","TB","PB"],n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;return"".concat(n.toFixed(2)).concat(t[r])},c=(0,i.createContext)(void 0),u=e=>{let{accept:t,maxFiles:n=1,maxSize:l,minSize:i,onDrop:d,onError:u,disabled:m,src:p,className:h,children:x,...g}=e,{getRootProps:f,getInputProps:v,isDragActive:j}=(0,o.VB)({accept:t,maxFiles:n,maxSize:l,minSize:i,onError:u,disabled:m,onDrop:(e,t,n)=>{if(t.length>0){var r,s;let e=null==(s=t.at(0))||null==(r=s.errors.at(0))?void 0:r.message;null==u||u(Error(e));return}null==d||d(e,t,n)},...g});return(0,r.jsx)(c.Provider,{value:{src:p,accept:t,maxSize:l,minSize:i,maxFiles:n},children:(0,r.jsxs)(s.$,{type:"button",disabled:m,variant:"outline",className:(0,a.cn)("relative h-auto w-full flex-col overflow-hidden p-8",j&&"outline-none ring-1 ring-ring",h),...f(),children:[(0,r.jsx)("input",{...v(),disabled:m}),x]})},JSON.stringify(p))},m=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("useDropzoneContext must be used within a Dropzone");return e},p=e=>{let{children:t,className:n}=e,{src:s}=m();return s?t||(0,r.jsxs)("div",{className:(0,a.cn)("flex flex-col items-center justify-center",n),children:[(0,r.jsx)("div",{className:"flex size-8 items-center justify-center rounded-md bg-muted text-muted-foreground",children:(0,r.jsx)(l.A,{size:16})}),(0,r.jsx)("p",{className:"my-2 w-full truncate font-medium text-sm",children:s.length>3?"".concat(new Intl.ListFormat("en").format(s.slice(0,3).map(e=>e.name))," and ").concat(s.length-3," more"):new Intl.ListFormat("en").format(s.map(e=>e.name))}),(0,r.jsx)("p",{className:"w-full text-muted-foreground text-xs",children:"Drag and drop or click to replace"})]}):null},h=e=>{let{children:t,className:n}=e,{src:s,accept:i,maxSize:o,minSize:c,maxFiles:u}=m();if(s)return null;if(t)return t;let p="";return i&&(p+="Accepts ",p+=new Intl.ListFormat("en").format(Object.keys(i))),c&&o?p+=" between ".concat(d(c)," and ").concat(d(o)):c?p+=" at least ".concat(d(c)):o&&(p+=" less than ".concat(d(o))),(0,r.jsxs)("div",{className:(0,a.cn)("flex flex-col items-center justify-center",n),children:[(0,r.jsx)("div",{className:"flex size-8 items-center justify-center rounded-md bg-muted text-muted-foreground",children:(0,r.jsx)(l.A,{size:16})}),(0,r.jsxs)("p",{className:"my-2 w-full truncate font-medium text-sm",children:["Upload ",1===u?"a file":"files"]}),(0,r.jsx)("p",{className:"w-full truncate text-muted-foreground text-xs",children:"Drag and drop or click to upload"}),p&&(0,r.jsxs)("p",{className:"text-muted-foreground text-xs",children:[p,"."]})]})}},80965:(e,t,n)=>{n.d(t,{H:()=>r});function r(e,t){console.error(e,t)}},81808:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(48800),s=n(42196),a=n(525),l=n(60890);let i=[{id:"text",label:"Text",icon:r.A},{id:"image",label:"Image",icon:s.A},{id:"audio",label:"Audio",icon:a.A},{id:"video",label:"Video",icon:l.A}]},87068:(e,t,n)=>{n.d(t,{G:()=>l,o:()=>i});var r=n(95155),s=n(12115);let a=(0,s.createContext)(void 0);function l(e){let{children:t,addNode:n,duplicateNode:s}=e;return(0,r.jsx)(a.Provider,{value:{addNode:n,duplicateNode:s},children:t})}function i(){let e=(0,s.useContext)(a);if(!e)throw Error("useNodeOperations must be used within NodeOperationsProvider");return e}},88313:(e,t,n)=>{n.d(t,{AM:()=>l,Wv:()=>i,hl:()=>o});var r=n(95155);n(12115);var s=n(31138),a=n(64269);function l(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"popover",...t})}function i(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"popover-trigger",...t})}function o(e){let{className:t,align:n="center",sideOffset:l=4,...i}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsx)(s.UC,{"data-slot":"popover-content",align:n,sideOffset:l,className:(0,a.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...i})})}}}]);