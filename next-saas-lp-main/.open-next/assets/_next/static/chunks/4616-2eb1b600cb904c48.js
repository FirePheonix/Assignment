"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4616],{5834:(e,t,n)=>{n.d(t,{p:()=>l});var r=n(95155);n(12115);var a=n(64269);function l(e){let{className:t,type:n,...l}=e;return(0,r.jsx)("input",{type:n,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}},13652:(e,t,n)=>{n.d(t,{T:()=>l});var r=n(95155);n(12115);var a=n(64269);function l(e){let{className:t,...n}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...n})}},28611:(e,t,n)=>{n.d(t,{Bc:()=>s,ZI:()=>d,k$:()=>o,m_:()=>i});var r=n(95155);n(12115);var a=n(26852),l=n(64269);function s(e){let{delayDuration:t=0,...n}=e;return(0,r.jsx)(a.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...n})}function i(e){let{...t}=e;return(0,r.jsx)(s,{children:(0,r.jsx)(a.bL,{"data-slot":"tooltip",...t})})}function o(e){let{...t}=e;return(0,r.jsx)(a.l9,{"data-slot":"tooltip-trigger",...t})}function d(e){let{className:t,sideOffset:n=0,children:s,...i}=e;return(0,r.jsx)(a.ZL,{children:(0,r.jsxs)(a.UC,{"data-slot":"tooltip-content",sideOffset:n,className:(0,l.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[s,(0,r.jsx)(a.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},34616:(e,t,n)=>{n.d(t,{H:()=>rD});var r=n(95155),a=n(30080);let l=e=>e.filter(e=>{var t;let n=e.data;return"text"===e.type&&((null==(t=n.generated)?void 0:t.text)||n.text)}).map(e=>{var t;let n=e.data;return(null==(t=n.generated)?void 0:t.text)||n.text}),s=e=>e.filter(e=>{var t;let n=e.data;return"image"===e.type&&(n.content||(null==(t=n.generated)?void 0:t.url))}).map(e=>{var t;let n=e.data;return(null==(t=n.generated)?void 0:t.url)?{url:n.generated.url,type:n.generated.type||"image/png"}:n.content}),i=e=>e.filter(e=>"image"===e.type&&e.data.description).map(e=>e.data.description),o=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let t=localStorage.getItem("auth_token"),n=new FormData;n.append("image",e),n.append("purpose","flow_generator_image");let r=await fetch("".concat("http://127.0.0.1:8000","/api/ai/upload-to-cloudinary/"),{method:"POST",headers:{...t&&{Authorization:"Token ".concat(t)}},body:n});if(!r.ok){let e=await r.json().catch(()=>({error:"Upload failed"}));throw Error(e.error||"Upload failed: ".concat(r.statusText))}let a=await r.json();return console.log("✅ File uploaded to Cloudinary:",a.url),{url:a.url,type:e.type}}catch(n){console.error("❌ File upload failed:",n);let t=URL.createObjectURL(e);return console.warn("⚠️ Using temporary blob URL as fallback:",t),{url:t,type:e.type}}};var d=n(64269),c=n(22539),u=n(92001),m=n(42196),p=n(60890),h=n(11636),x=n(87068),g=n(67168);let f=e=>{let{children:t}=e,{getViewport:n}=(0,c.VH)(),{addNode:a}=(0,x.o)(),{project:l}=(0,g.By)(),s=(0,h.VB)({noClick:!0,autoFocus:!1,noKeyboard:!0,disabled:!l,onDrop:async e=>{let t=await Promise.all(e.map(async e=>({name:e.name,data:await o(e,"files")}))),r=n(),l=-r.x/r.zoom+window.innerWidth/2/r.zoom,s=-r.y/r.zoom+window.innerHeight/2/r.zoom;for(let{data:e,name:n}of t){let t="file";e.type.startsWith("image/")?t="image":e.type.startsWith("video/")?t="video":e.type.startsWith("audio/")&&(t="audio"),a(t,{data:{content:{url:e.url,type:e.type,name:n}},position:{x:l,y:s}})}}});return(0,r.jsxs)("div",{...s.getRootProps(),className:"size-full",children:[(0,r.jsx)("input",{...s.getInputProps(),className:"pointer-events-none hidden select-none"}),(0,r.jsxs)("div",{className:(0,d.cn)("absolute inset-0 z-[999999] flex flex-col items-center justify-center gap-6 bg-background/70 text-foreground backdrop-blur-xl transition-all",s.isDragActive?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:[(0,r.jsxs)("div",{className:"-space-x-4 relative isolate flex items-center",children:[(0,r.jsx)("div",{className:"-rotate-12 flex aspect-square translate-y-2 items-center justify-center rounded-md bg-background p-3 shadow-xl",children:(0,r.jsx)(u.A,{size:24,className:"text-muted-foreground"})}),(0,r.jsx)("div",{className:"z-10 flex aspect-square items-center justify-center rounded-md bg-background p-3 shadow-xl",children:(0,r.jsx)(m.A,{size:24,className:"text-muted-foreground"})}),(0,r.jsx)("div",{className:"flex aspect-square translate-y-2 rotate-12 items-center justify-center rounded-md bg-background p-3 shadow-xl",children:(0,r.jsx)(p.A,{size:24,className:"text-muted-foreground"})})]}),(0,r.jsx)("p",{className:"font-medium text-xl tracking-tight",children:"Drop files to create nodes"})]}),t]})};var v=n(59603),b=n(76122),j=n(6191),y=n(53606),w=n(35805),N=n(12115),A=n(85507),k=n(34357);let C=e=>{let{fromX:t,fromY:n,toX:a,toY:l}=e;return(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{fill:"none",stroke:"var(--color-ring)",strokeWidth:1,className:"animated",d:"M".concat(t,",").concat(n," C ").concat(t+(a-t)*.5,",").concat(n," ").concat(t+(a-t)*.5,",").concat(l," ").concat(a,",").concat(l)}),(0,r.jsx)("circle",{cx:a,cy:l,fill:"#fff",r:3,stroke:"var(--color-ring)",strokeWidth:1})]})},z=(e,t)=>{var n,r;let a=t===b.yX.Left?"target":"source",l=null==(r=e.internals.handleBounds)||null==(n=r[a])?void 0:n.find(e=>e.position===t);if(!l)return[0,0];let s=l.width/2,i=l.height/2;switch(t){case b.yX.Left:s=0;break;case b.yX.Right:s=l.width;break;case b.yX.Top:i=0;break;case b.yX.Bottom:i=l.height;break;default:throw Error("Invalid handle position: ".concat(t))}return[e.internals.positionAbsolute.x+l.x+s,e.internals.positionAbsolute.y+l.y+i]},_={animated:e=>{let{id:t,source:n,target:a,markerEnd:l,style:s}=e,i=(0,c.JY)(n),o=(0,c.JY)(a);if(!i||!o)return null;let{sx:d,sy:u,tx:m,ty:p,sourcePos:h,targetPos:x}=((e,t)=>{let n=b.yX.Right,[r,a]=z(e,n),l=b.yX.Left,[s,i]=z(t,l);return{sx:r,sy:a,tx:s,ty:i,sourcePos:n,targetPos:l}})(i,o),[g]=(0,b.Fp)({sourceX:d,sourceY:u,sourcePosition:h,targetX:m,targetY:p,targetPosition:x});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.tE,{id:t,path:g,markerEnd:l,style:s}),(0,r.jsx)("circle",{r:"4",fill:"var(--primary)",children:(0,r.jsx)("animateMotion",{dur:"2s",repeatCount:"indefinite",path:g})})]})},temporary:e=>{let{id:t,sourceX:n,sourceY:a,targetX:l,targetY:s,sourcePosition:i,targetPosition:o}=e,[d]=(0,c.LN)({sourceX:n,sourceY:a,sourcePosition:i,targetX:l,targetY:s,targetPosition:o});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.tE,{id:t,path:d,className:"stroke-1 stroke-ring",style:{strokeDasharray:"5, 5"}})})}};var S=n(30926);let T=(0,S.createServerReference)("7fa2c47b0f03196f5091271eb2db7af5eeb48e0e5a",S.callServer,void 0,S.findSourceMapURL,"transcribeAudioAction");var E=n(76202);function L(e){let{...t}=e;return(0,r.jsx)(E.bL,{"data-slot":"context-menu",...t})}function D(e){let{...t}=e;return(0,r.jsx)(E.l9,{"data-slot":"context-menu-trigger",...t})}function R(e){let{className:t,...n}=e;return(0,r.jsx)(E.ZL,{children:(0,r.jsx)(E.UC,{"data-slot":"context-menu-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function I(e){let{className:t,inset:n,variant:a="default",...l}=e;return(0,r.jsx)(E.q7,{"data-slot":"context-menu-item","data-inset":n,"data-variant":a,className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}function P(e){let{className:t,...n}=e;return(0,r.jsx)(E.wv,{"data-slot":"context-menu-separator",className:(0,d.cn)("bg-border -mx-1 my-1 h-px",t),...n})}var M=n(64814),O=n(75426),H=n(57828),F=n(37135),B=n(28611);let V=e=>{let{id:t,items:n}=e,{getNode:a}=(0,c.VH)(),l=a(t);return(0,r.jsx)(c.ER,{isVisible:null==l?void 0:l.selected,position:b.yX.Bottom,className:"flex items-center gap-2 rounded-lg bg-background/95 p-2 backdrop-blur-sm shadow-lg border border-border",style:{zIndex:1e3},children:null==n?void 0:n.map((e,t)=>e.tooltip?(0,r.jsxs)(B.m_,{children:[(0,r.jsx)(B.k$,{asChild:!0,children:e.children}),(0,r.jsx)(B.ZI,{side:"top",children:e.tooltip})]},e.tooltip):(0,r.jsx)(N.Fragment,{children:e.children},t))})},G=e=>{let{children:t,type:n,id:a,data:l,toolbar:s,title:i,className:o}=e,{deleteElements:u,setCenter:m,getNode:p,updateNode:h}=(0,c.VH)(),{duplicateNode:g}=(0,x.o)(),[f,v]=(0,N.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:["drop"!==n&&!!(null==s?void 0:s.length)&&(0,r.jsx)(V,{id:a,items:s}),"file"!==n&&"tweet"!==n&&(0,r.jsx)(c.h7,{type:"target",position:b.yX.Left}),(0,r.jsxs)(L,{onOpenChange:e=>{if(!e)return;let t=p(a);t&&(t.selected||h(a,{selected:!0}))},children:[(0,r.jsx)(D,{children:(0,r.jsxs)("div",{className:"relative size-full h-auto w-sm",children:["drop"!==n&&(0,r.jsx)("div",{className:"-translate-y-full -top-2 absolute right-0 left-0 flex shrink-0 items-center justify-between",children:(0,r.jsx)("p",{className:"font-mono text-muted-foreground text-xs tracking-tighter",children:i})}),(0,r.jsx)("div",{className:(0,d.cn)("node-container flex size-full flex-col divide-y rounded-[28px] bg-card p-2 ring-1 ring-border transition-all",o),style:{overflow:"visible"},children:(0,r.jsx)("div",{className:"overflow-hidden rounded-3xl bg-card",children:t})})]})}),(0,r.jsxs)(R,{children:[(0,r.jsxs)(I,{onClick:()=>g(a),children:[(0,r.jsx)(O.A,{size:12}),(0,r.jsx)("span",{children:"Duplicate"})]}),(0,r.jsxs)(I,{onClick:()=>{var e,t;let n=p(a);if(!n)return;let{x:r,y:l}=n.position;m(r+(null!=(t=null==(e=n.measured)?void 0:e.width)?t:0)/2,l,{duration:1e3})},children:[(0,r.jsx)(H.A,{size:12}),(0,r.jsx)("span",{children:"Focus"})]}),(0,r.jsx)(P,{}),(0,r.jsxs)(I,{onClick:()=>{u({nodes:[{id:a}]})},variant:"destructive",children:[(0,r.jsx)(F.A,{size:12}),(0,r.jsx)("span",{children:"Delete"})]}),!1]})]}),"video"!==n&&(0,r.jsx)(c.h7,{type:"source",position:b.yX.Right}),(0,r.jsx)(M.lG,{open:f,onOpenChange:v,children:(0,r.jsxs)(M.Cf,{children:[(0,r.jsxs)(M.c7,{children:[(0,r.jsx)(M.L3,{children:"Node data"}),(0,r.jsxs)(M.rr,{children:["Data for node"," ",(0,r.jsx)("code",{className:"rounded-sm bg-secondary px-2 py-1 font-mono",children:a})]})]}),(0,r.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-black p-4 text-sm text-white",children:JSON.stringify(l,null,2)})]})})]})};var U=n(75093);function q(e){let{className:t,...n}=e;return(0,r.jsx)("div",{"data-slot":"skeleton",className:(0,d.cn)("bg-accent animate-pulse rounded-md",t),...n})}var $=n(80965),W=n(35299);let X=e=>{let{data:t,id:n,type:a,title:l}=e,{updateNodeData:s}=(0,c.VH)(),[i,d]=(0,N.useState)(),{project:u}=(0,g.By)(),[m,p]=(0,N.useState)(!1),h=async e=>{if(!m&&(null==u?void 0:u.id))try{if(!e.length)throw Error("No file selected");p(!0),d(e);let[t]=e,{url:r,type:a}=await o(t,"files");s(n,{content:{url:r,type:a}});let l=await T(r,null==u?void 0:u.id);if("error"in l)throw Error(l.error);s(n,{transcript:l.transcript})}catch(e){(0,$.H)("Error uploading video",e)}finally{p(!1)}};return(0,r.jsxs)(G,{id:n,data:t,type:a,title:l,children:[m&&(0,r.jsx)(q,{className:"flex h-[50px] w-full animate-pulse items-center justify-center",children:(0,r.jsx)(W.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!m&&t.content&&(0,r.jsx)("audio",{src:t.content.url,controls:!0,className:"w-full rounded-none"}),!m&&!t.content&&(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,accept:{"audio/*":[]},onDrop:h,src:i,onError:console.error,className:"rounded-none border-none bg-transparent shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{}),(0,r.jsx)(U.Pi,{})]})]})};var K=n(41498),J=n(13652);function Y(){return{track:(e,t,n,r)=>{console.log("Analytics:",{category:e,action:t,label:n,props:r})}}}let Q=(e,t,n)=>{if(!e)return void console.error("No content to download");let r="string"==typeof e?e:e.url,a="".concat(t,".").concat(n);if(r.startsWith("data:")){let e=document.createElement("a");e.href=r,e.download=a,document.body.appendChild(e),e.click(),document.body.removeChild(e);return}fetch(r).then(e=>e.blob()).then(e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}).catch(e=>{console.error("Download failed:",e)})},Z=()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDD16"}),ee={openai:{id:"openai",name:"OpenAI",icon:Z},anthropic:{id:"anthropic",name:"Anthropic",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDDE0"})},google:{id:"google",name:"Google",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD0D"})},meta:{id:"meta",name:"Meta",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDC64"})},xai:{id:"xai",name:"xAI",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"✖️"})},groq:{id:"groq",name:"Groq",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"⚙️"})},mistral:{id:"mistral",name:"Mistral",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83C\uDF2C️"})},luma:{id:"luma",name:"Luma",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCA1"})},minimax:{id:"minimax",name:"Minimax",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"⚡"})},cohere:{id:"cohere",name:"Cohere",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD17"})},deepseek:{id:"deepseek",name:"DeepSeek",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD0E"})},runway:{id:"runway",name:"Runway",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDEEB"})},together:{id:"together",name:"Together",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDD1D"})},replicate:{id:"replicate",name:"Replicate",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"})},perplexity:{id:"perplexity",name:"Perplexity",icon:()=>(0,r.jsx)("span",{className:"text-lg",children:"\uD83C\uDFAF"})},elevenlabs:{id:"elevenlabs",name:"ElevenLabs",icon:Z}},et={eleven_turbo_v2_5:{label:"Turbo v2.5 (AI/ML API)",chef:ee.elevenlabs,providers:[ee.elevenlabs],priceIndicator:"lowest",default:!0,voices:["Rachel","Drew","Aria","Domi","Sarah","Laura","Emily","Elli","Charlotte","Alice","Matilda","Jessica","Grace","Lily","Serena","Nicole","Jessie","Glinda","Mimi","Antoni","Clyde","Paul","Dave","Roger","Fin","Thomas","Charlie","George","Callum","Patrick","River","Harry","Liam","Josh","Arnold","Joseph","Will","Jeremy","Eric","Michael","Ethan","Chris","Brian","Daniel","Adam","Bill","Sam","Giovanni"]},"openai-tts-1":{label:"OpenAI TTS 1",chef:ee.openai,providers:[ee.openai],priceIndicator:"low",voices:["alloy","echo","fable","onyx","nova","shimmer"]},"openai-tts-1-hd":{label:"OpenAI TTS 1 HD",chef:ee.openai,providers:[ee.openai],priceIndicator:"low",voices:["alloy","echo","fable","onyx","nova","shimmer"]}};var en=n(48314),er=n(85921),ea=n(39867),el=n(26983),es=n(18720),ei=n(31342),eo=n(39056),ed=n(53694),ec=n(24033),eu=n(12108),em=n(38627),ep=n(65949);let eh=e=>{let{data:t}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(t.icon,{className:"size-4 shrink-0"}),(0,r.jsx)("span",{className:"block truncate",children:t.name})]})},ex=e=>{let{data:t,chef:n,className:a}=e;return t.icon?(0,r.jsx)(t.icon,{className:(0,d.cn)("size-4 shrink-0",a)}):(0,r.jsx)(n.icon,{className:(0,d.cn)("size-4 shrink-0",a)})},eg=e=>{let{id:t,value:n,options:a,width:l=250,className:s,onChange:i,disabled:o}=e,[c,u]=(0,N.useState)(!1),{plan:m}=(0,eo.R)(),p=a[n];(0,N.useEffect)(()=>{n&&!a[n]&&(null==i||i(Object.keys(a)[0]))},[n,a,i]);let h=Object.entries(a).reduce((e,t)=>{let[n,r]=t,a=r.chef.id;return e[a]||(e[a]={}),e[a][n]=r,e},{}),x=Object.keys(h).sort((e,t)=>{var n,r,a;let l=null==(n=Object.values(ee).find(t=>t.id===e))?void 0:n.name.toLowerCase(),s=null==(r=Object.values(ee).find(e=>e.id===t))?void 0:r.name.toLowerCase();return null!=(a=null==l?void 0:l.localeCompare(null!=s?s:""))?a:0});return(0,r.jsxs)(M.lG,{open:c,onOpenChange:u,children:[(0,r.jsx)(M.zM,{className:s,id:t,style:{width:l},disabled:o,asChild:!0,children:(0,r.jsx)(K.$,{variant:"outline",className:"w-full rounded-md h-9",children:p&&(0,r.jsxs)("div",{className:"flex w-full items-center gap-2 overflow-hidden",children:[(0,r.jsx)(ex,{data:p,chef:p.chef}),(0,r.jsx)("span",{className:"block truncate",children:p.label})]})})}),(0,r.jsxs)(M.Cf,{className:"p-0",children:[(0,r.jsx)(M.c7,{className:"sr-only",children:(0,r.jsx)(M.L3,{children:"Select a model"})}),(0,r.jsxs)(ep.uB,{children:[(0,r.jsx)("div",{className:"[&>div]:h-12",children:(0,r.jsx)(ep.G7,{placeholder:"Search for a model..."})}),(0,r.jsxs)(ep.oI,{children:[(0,r.jsx)(ep.xL,{}),x.map(e=>(0,r.jsx)(ep.L$,{heading:(0,r.jsx)(eh,{data:e in ee?ee[e]:ee.unknown}),children:Object.entries(h[e]).map(t=>{let[a,l]=t;return(0,r.jsxs)(ep.h_,{value:a,onSelect:()=>{null==i||i(a),u(!1)},disabled:((e,t)=>!!e.disabled||(!t||"hobby"===t)&&("highest"===e.priceIndicator||"high"===e.priceIndicator))(l,m),className:(0,d.cn)(n===a&&"bg-primary text-primary-foreground data-[selected=true]:bg-primary/80 data-[selected=true]:text-primary-foreground"),children:[(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 overflow-hidden",children:[(0,r.jsx)(ex,{data:l,chef:e in ee?ee[e]:ee.unknown,className:n===a?"text-primary-foreground":""}),(0,r.jsx)("span",{className:"block truncate",children:l.label})]}),l.providers.map((e,t)=>(0,r.jsx)("div",{className:(0,d.cn)(t&&"opacity-50"),children:(0,r.jsx)("div",{className:(0,d.cn)("flex size-4 items-center justify-center rounded-full bg-secondary",n===a&&"bg-primary-foreground/10"),children:(0,r.jsx)(e.icon,{className:(0,d.cn)("size-3 shrink-0",n===a?"text-primary-foreground":"text-muted-foreground")})})},e.id)),l.priceIndicator?(0,r.jsxs)(B.m_,{children:[(0,r.jsx)(B.k$,{asChild:!0,children:(0,r.jsx)("div",{children:((e,t)=>{switch(e){case"lowest":return(0,r.jsx)(ed.A,{size:16,className:(0,d.cn)("text-green-500 dark:text-green-400",t)});case"low":return(0,r.jsx)(ec.A,{size:16,className:(0,d.cn)("text-blue-500 dark:text-blue-400",t)});case"high":return(0,r.jsx)(eu.A,{size:16,className:(0,d.cn)("text-orange-500 dark:text-orange-400",t)});case"highest":return(0,r.jsx)(em.A,{size:16,className:(0,d.cn)("text-red-500 dark:text-red-400",t)});default:return null}})(l.priceIndicator,n===a?"text-primary-foreground":"")})}),(0,r.jsx)(B.ZI,{side:"right",children:(0,r.jsx)("p",{children:(e=>{switch(e){case"lowest":return"This model uses a lot less credits.";case"low":return"This model uses less credits.";case"high":return"This model uses more credits.";case"highest":return"This model uses a lot of credits.";default:return""}})(l.priceIndicator)})})]}):(0,r.jsx)("div",{className:"size-4"})]},a)})},e))]})]})]})]})};var ef=n(60681);let ev=e=>{let{value:t,options:n,width:a=250,className:l,onChange:s,disabled:i}=e,[o,c]=(0,N.useState)(!1),{plan:u}=(0,eo.R)(),m=n.find(e=>e===t);return(0,r.jsxs)(ef.G3,{open:o,onOpenChange:c,value:t,onValueChange:s,data:n.map(e=>({label:e,value:(0,d.Z)(e)})),type:"model",children:[(0,r.jsx)(ef.Ms,{className:l,style:{width:a},disabled:i,children:m&&(0,r.jsx)("div",{className:"flex w-full items-center gap-2 overflow-hidden",children:(0,r.jsx)("span",{className:"block truncate capitalize",children:m})})}),(0,r.jsxs)(ef.h5,{popoverOptions:{sideOffset:8},children:[(0,r.jsx)(ef.oK,{}),(0,r.jsxs)(ef.ex,{children:[(0,r.jsx)(ef.$U,{}),(0,r.jsx)(ef.D5,{children:n.map(e=>(0,r.jsx)(ef.x4,{value:e,onSelect:()=>{null==s||s(e),c(!1)},className:(0,d.cn)(t===e&&"bg-primary text-primary-foreground data-[selected=true]:bg-primary/80 data-[selected=true]:text-primary-foreground"),children:(0,r.jsx)("div",{className:"flex items-center gap-2 overflow-hidden",children:(0,r.jsx)("span",{className:"block truncate capitalize",children:e})})},e))})]})]})]})},eb="http://127.0.0.1:8000";function ej(){if("undefined"==typeof document)return null;let e=document.cookie.split(";").find(e=>e.trim().startsWith("csrftoken="));return e?e.split("=")[1]:null}async function ey(){if(!ej())try{await fetch("".concat(eb,"/api/auth/csrf/"),{method:"GET",credentials:"include"})}catch(e){}}async function ew(e){try{let t=localStorage.getItem("auth_token");console.log("Audio generation - Token available:",!!t),await ey();let n=ej();console.log("Audio generation - CSRF token available:",!!n);let r=new FormData;r.append("text",e.text),e.voice&&r.append("voice",e.voice),e.output_format&&r.append("output_format",e.output_format),void 0!==e.stability&&r.append("stability",e.stability.toString()),void 0!==e.similarity_boost&&r.append("similarity_boost",e.similarity_boost.toString()),void 0!==e.use_speaker_boost&&r.append("use_speaker_boost",e.use_speaker_boost.toString()),void 0!==e.style&&r.append("style",e.style.toString()),void 0!==e.speed&&r.append("speed",e.speed.toString());let a=await fetch("".concat(eb,"/api/ai/generate-audio/"),{method:"POST",credentials:"include",headers:{...n&&{"X-CSRFToken":n},...t&&{Authorization:"Token ".concat(t)}},body:r});if(!a.ok){let e="Failed to generate audio";try{let t=await a.json();e=t.error||t.detail||JSON.stringify(t)}catch(t){e="HTTP ".concat(a.status,": ").concat(a.statusText)}return console.error("Audio generation error:",e),{success:!1,error:e}}return await a.json()}catch(e){return console.error("Error generating audio from text:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}let eN=e=>{var t,n,a,s,o,d,u,m;let{data:p,id:h,type:x,title:f}=e,{updateNodeData:v,getNodes:j,getEdges:y}=(0,c.VH)(),[w,A]=(0,N.useState)(!1),{project:k}=(0,g.By)(),C=null!=(d=p.model)?d:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});if(!t)throw Error("No default model found");return t[0]})(et),z=et[C],_=Y(),S=async()=>{if(!w&&(null==k?void 0:k.id))try{var e,t,n;let r=(0,b.FB)({id:h},j(),y()),a=l(r),s=i(r);if(!a.length&&!s.length&&!p.instructions)throw Error("No prompts found");A(!0);let o=[...a,...s].join("\n");p.instructions,p.instructions&&!o.length&&(o=p.instructions),_.track("canvas","node","generate",{type:x,promptLength:o.length,model:C,instructionsLength:null!=(t=null==(e=p.instructions)?void 0:e.length)?t:0,voice:null!=(n=p.voice)?n:null});let d=await ew({text:o,voice:p.voice,output_format:"mp3_44100_128"});if(!d.success||!d.audio_url)throw Error(d.error||"Failed to generate audio");v(h,{generated:{url:d.audio_url},updatedAt:Date.now()}),es.oR.success("Audio generated successfully"),setTimeout(()=>(0,ei.j)("credits"),5e3)}catch(e){(0,$.H)("Error generating audio",e)}finally{A(!1)}},T=[{children:(0,r.jsx)(eg,{value:C,options:et,className:"w-[200px] rounded-full",onChange:e=>v(h,{model:e})},h)}];return(null==z||null==(t=z.voices)?void 0:t.length)&&T.push({children:(0,r.jsx)(ev,{value:null!=(u=p.voice)?u:z.voices[0],options:z.voices,className:"w-[200px] rounded-full",onChange:e=>v(h,{voice:e})},h)}),T.push(w?{tooltip:"Generating...",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",disabled:!0,children:(0,r.jsx)(W.A,{className:"animate-spin",size:12})})}:{tooltip:(null==(n=p.generated)?void 0:n.url)?"Regenerate":"Generate",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",onClick:S,disabled:w||!(null==k?void 0:k.id),children:(null==(a=p.generated)?void 0:a.url)?(0,r.jsx)(en.A,{size:12}):(0,r.jsx)(er.A,{size:12})})}),p.generated&&T.push({tooltip:"Download",children:(0,r.jsx)(K.$,{variant:"ghost",size:"icon",className:"rounded-full",onClick:()=>Q(p.generated,h,"mp3"),children:(0,r.jsx)(ea.A,{size:12})})}),p.updatedAt&&T.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(p.updatedAt))),children:(0,r.jsx)(K.$,{size:"icon",variant:"ghost",className:"rounded-full",children:(0,r.jsx)(el.A,{size:12})})}),(0,r.jsxs)(G,{id:h,data:p,type:x,title:f,toolbar:T,children:[w&&(0,r.jsx)(q,{className:"flex h-[50px] w-full animate-pulse items-center justify-center",children:(0,r.jsx)(W.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!w&&!(null==(s=p.generated)?void 0:s.url)&&(0,r.jsx)("div",{className:"flex h-[50px] w-full items-center justify-center rounded-full bg-secondary",children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(er.A,{size:12,className:"-translate-y-px inline"})," to generate audio"]})}),!w&&(null==(o=p.generated)?void 0:o.url)&&(0,r.jsx)("audio",{src:p.generated.url,controls:!0,className:"w-full rounded-none"}),(0,r.jsx)(J.T,{value:null!=(m=p.instructions)?m:"",onChange:e=>v(h,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"})]})};var eA=n(85778),ek=n(5917);let eC=[{id:"plaintext",label:"Plain Text"},{id:"abap",label:"ABAP"},{id:"apex",label:"Apex"},{id:"azcli",label:"Azure CLI"},{id:"bat",label:"Batch"},{id:"bicep",label:"Bicep"},{id:"cameligo",label:"CameLIGO"},{id:"clojure",label:"Clojure"},{id:"coffeescript",label:"CoffeeScript"},{id:"c",label:"C"},{id:"cpp",label:"C++"},{id:"csharp",label:"C#"},{id:"csp",label:"CSP"},{id:"css",label:"CSS"},{id:"cypher",label:"Cypher"},{id:"dart",label:"Dart"},{id:"dockerfile",label:"Dockerfile"},{id:"ecl",label:"ECL"},{id:"elixir",label:"Elixir"},{id:"flow9",label:"Flow9"},{id:"fsharp",label:"F#"},{id:"freemarker2",label:"FreeMarker2"},{id:"go",label:"Go"},{id:"graphql",label:"GraphQL"},{id:"handlebars",label:"Handlebars"},{id:"hcl",label:"HCL"},{id:"html",label:"HTML"},{id:"ini",label:"INI"},{id:"java",label:"Java"},{id:"javascript",label:"JavaScript"},{id:"julia",label:"Julia"},{id:"kotlin",label:"Kotlin"},{id:"less",label:"LESS"},{id:"lexon",label:"Lexon"},{id:"lua",label:"Lua"},{id:"liquid",label:"Liquid"},{id:"m3",label:"M3"},{id:"markdown",label:"Markdown"},{id:"mdx",label:"MDX"},{id:"mips",label:"MIPS"},{id:"msdax",label:"MSDAX"},{id:"mysql",label:"MySQL"},{id:"objective-c",label:"Objective-C"},{id:"pascal",label:"Pascal"},{id:"pascaligo",label:"PascaLIGO"},{id:"perl",label:"Perl"},{id:"pgsql",label:"PostgreSQL"},{id:"php",label:"PHP"},{id:"pla",label:"PLA"},{id:"postiats",label:"PostiATS"},{id:"powerquery",label:"Power Query"},{id:"powershell",label:"PowerShell"},{id:"proto",label:"Protocol Buffers"},{id:"pug",label:"Pug"},{id:"python",label:"Python"},{id:"qsharp",label:"Q#"},{id:"r",label:"R"},{id:"razor",label:"Razor"},{id:"redis",label:"Redis"},{id:"redshift",label:"Redshift"},{id:"restructuredtext",label:"reStructuredText"},{id:"ruby",label:"Ruby"},{id:"rust",label:"Rust"},{id:"sb",label:"SB"},{id:"scala",label:"Scala"},{id:"scheme",label:"Scheme"},{id:"scss",label:"SCSS"},{id:"shell",label:"Shell"},{id:"sol",label:"Solidity"},{id:"aes",label:"AES"},{id:"sparql",label:"SPARQL"},{id:"sql",label:"SQL"},{id:"st",label:"Structured Text"},{id:"swift",label:"Swift"},{id:"systemverilog",label:"SystemVerilog"},{id:"verilog",label:"Verilog"},{id:"tcl",label:"Tcl"},{id:"twig",label:"Twig"},{id:"typescript",label:"TypeScript"},{id:"typespec",label:"TypeSpec"},{id:"vb",label:"Visual Basic"},{id:"wgsl",label:"WGSL"},{id:"xml",label:"XML"},{id:"yaml",label:"YAML"},{id:"json",label:"JSON"}],ez=e=>{let{id:t,value:n,width:a=200,className:l,onChange:s}=e,[i,o]=(0,N.useState)(!1);return(0,r.jsxs)(ef.G3,{open:i,onOpenChange:o,data:eC.map(e=>({label:e.label,value:e.id})),type:"language",value:n,onValueChange:s,children:[(0,r.jsx)(ef.Ms,{id:t,className:"rounded-full",style:{width:a}}),(0,r.jsxs)(ef.h5,{className:(0,d.cn)("p-0",l),children:[(0,r.jsx)(ef.oK,{}),(0,r.jsxs)(ef.ex,{children:[(0,r.jsx)(ef.$U,{}),(0,r.jsx)(ef.D5,{children:eC.map(e=>(0,r.jsxs)(ef.x4,{value:e.id,onSelect:()=>{null==s||s(e.id),o(!1)},children:[e.label,(0,r.jsx)(ek.A,{className:(0,d.cn)("ml-auto size-4",n===e.id?"opacity-100":"opacity-0")})]},e.id))})]})]})]})},e_=e=>{var t,n,a,l;let{data:s,id:i,type:o,title:d}=e,{updateNodeData:u}=(0,c.VH)(),m=[{children:(0,r.jsx)(ez,{value:null!=(l=null==(t=s.content)?void 0:t.language)?l:"javascript",onChange:e=>{var t;u(i,{content:{text:null==(t=s.content)?void 0:t.text,language:e}})},className:"w-[200px] rounded-full"})}];return(0,r.jsx)(G,{id:i,data:s,title:d,type:o,toolbar:m,children:(0,r.jsx)(eA.Ay,{className:"aspect-square w-full",language:null==(n=s.content)?void 0:n.language,value:null==(a=s.content)?void 0:a.text,onChange:e=>{var t;u(i,{content:{text:e,language:null==(t=s.content)?void 0:t.language}})},theme:"vs-dark",options:{minimap:{enabled:!1}}})})},eS=(0,N.createContext)(void 0);var eT=n(40674),eE=n(12507),eL=n(59e3);let eD=e=>{var t,n,a,s,o,d,u,m;let{data:p,id:h,type:x,title:f}=e,{updateNodeData:v,getNodes:j,getEdges:y}=(0,c.VH)(),{project:w}=(0,g.By)(),{models:A}=(()=>{let e=(0,N.useContext)(eS);if(!e)throw Error("useGateway must be used within GatewayProvider");return e})(),k=null!=(o=p.model)?o:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});return t?t[0]:"claude-3-5-sonnet"})(A),C=null!=(d=null==(t=p.generated)?void 0:t.language)?d:"javascript",z=Y(),{messages:_,sendMessage:S,setMessages:T,status:E,stop:L}=(0,eT.Y_)({transport:new eE.rL({api:"/api/code"}),onError:e=>(0,$.H)("Error generating text",e),onFinish:e=>{var t,n;let{message:r}=e;v(h,{generated:{text:null!=(n=null==(t=r.parts.find(e=>"text"===e.type))?void 0:t.text)?n:""},updatedAt:new Date().toISOString()}),es.oR.success("Text generated successfully"),setTimeout(()=>(0,ei.j)("credits"),5e3)}}),D=(0,N.useCallback)(()=>{var e,t,n;let r=(0,b.FB)({id:h},j(),y()),a=l(r),s=r.filter(e=>"audio"===e.type&&e.data.transcription).map(e=>e.data.transcription),o=r.filter(e=>"code"===e.type&&e.data.code).map(e=>e.data.code),d=i(r);if(!a.length&&!s.length&&!o.length&&!d.length&&!p.instructions)return void(0,$.H)("Error generating code","No prompts found");let c=["--- Instructions ---",null!=(t=p.instructions)?t:"None.","--- Text Prompts ---",...a.join("\n"),"--- Audio Prompts ---",...s.join("\n"),"--- Image Descriptions ---",...d.join("\n"),"--- Code Prompts ---",...o.map((e,t)=>"--- Prompt ".concat(t+1," ---\n            Language: ").concat(e.language,"\n            Code: ").concat(e.text,"\n            "))];z.track("canvas","node","generate",{type:x,promptLength:c.join("\n").length,model:k,instructionsLength:null!=(n=null==(e=p.instructions)?void 0:e.length)?n:0}),T([]),S({text:c.join("\n")},{body:{modelId:k,language:C}})},[p.instructions,h,j,y,S,T,z,k,x]),R=(0,N.useCallback)(e=>{var t;v(h,{generated:{text:null==(t=p.generated)?void 0:t.text,language:e}})},[null==(n=p.generated)?void 0:n.text,h,v]),I=(0,N.useMemo)(()=>{var e;let t=[{children:(0,r.jsx)(ez,{value:C,onChange:R,className:"w-[200px] rounded-full"})},{children:(0,r.jsx)(eg,{value:k,options:A,className:"w-[200px] rounded-full",onChange:e=>v(h,{model:e})},h)}];return"submitted"===E||"streaming"===E?t.push({tooltip:"Stop",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",onClick:L,disabled:!(null==w?void 0:w.id),children:(0,r.jsx)(eL.A,{size:12})})}):_.length||(null==(e=p.generated)?void 0:e.text)?t.push({tooltip:"Regenerate",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",onClick:D,disabled:!(null==w?void 0:w.id),children:(0,r.jsx)(en.A,{size:12})})}):t.push({tooltip:"Generate",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",onClick:D,disabled:!(null==w?void 0:w.id),children:(0,r.jsx)(er.A,{size:12})})}),p.updatedAt&&t.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(p.updatedAt))),children:(0,r.jsx)(K.$,{size:"icon",variant:"ghost",className:"rounded-full",children:(0,r.jsx)(el.A,{size:12})})}),t},[h,v,L,p,D,R,E,_,null==w?void 0:w.id,k,C,A]),P=_.filter(e=>"user"!==e.role);return(0,r.jsxs)(G,{id:h,data:p,title:f,type:x,toolbar:I,children:[(0,r.jsx)(eA.Ay,{className:"aspect-square w-full overflow-hidden rounded-b-xl",language:C,value:P.length?null!=(u=null==(a=P[0].parts.find(e=>"text"===e.type))?void 0:a.text)?u:"":null==(s=p.generated)?void 0:s.text,onChange:e=>{v(h,{generated:{text:e,language:C}})},theme:"vs-dark",loading:(0,r.jsx)("div",{className:"dark aspect-square size-full",children:(0,r.jsx)(q,{className:"size-full"})}),options:{readOnly:!0,minimap:{enabled:!1}}}),(0,r.jsx)(J.T,{value:null!=(m=p.instructions)?m:"",onChange:e=>v(h,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"})]})};var eR=n(81808);let eI=e=>{let{name:t,type:n,url:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{size:16,className:"text-muted-foreground"}),(0,r.jsx)("span",{className:"truncate font-medium text-sm",children:t})]}),"application/pdf"===n?(0,r.jsx)("div",{className:"relative aspect-[3/4] w-full overflow-hidden rounded border",children:(0,r.jsx)("iframe",{src:"".concat(a,"#view=FitH"),className:"absolute inset-0 h-full w-full",title:"PDF Preview"})}):(0,r.jsx)("div",{className:"flex items-center justify-center rounded border p-4",children:(0,r.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary text-sm hover:underline",children:[(0,r.jsx)(u.A,{size:16}),(0,r.jsx)("span",{children:"Download File"})]})})]})},eP=e=>{let{data:t,id:n,type:a,title:l}=e,{updateNodeData:s}=(0,c.VH)(),[i,d]=(0,N.useState)(),[u,m]=(0,N.useState)(!1),p=async e=>{if(!u)try{if(!e.length)throw Error("No file selected");if(e.some(e=>e.type.startsWith("audio")))throw Error("Please use the audio node to upload audio files.");if(e.some(e=>e.type.startsWith("video")))throw Error("Please use the video node to upload video files.");if(e.some(e=>e.type.startsWith("image")))throw Error("Please use the image node to upload image files.");m(!0),d(e);let[t]=e,{url:r,type:a}=await o(t,"files");s(n,{content:{url:r,name:t.name,type:a}})}catch(e){(0,$.H)("Error uploading video",e)}finally{m(!1)}};return(0,r.jsx)(G,{id:n,data:t,type:a,title:l,children:(0,r.jsx)("div",{className:"p-4",children:t.content?(0,r.jsx)(eI,{...t.content}):(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,onDrop:p,src:i,onError:console.error,className:"rounded-none border-none bg-transparent shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{}),(0,r.jsx)(U.Pi,{children:i&&i.length>0&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(eI,{name:i[0].name,type:i[0].type,url:URL.createObjectURL(i[0])}),(0,r.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-lg bg-black/50",children:(0,r.jsx)(W.A,{className:"size-12 animate-spin text-white"})})]})})]})})})};var eM=n(15239);let eO=e=>{var t,n;let{data:a,id:l,type:s,title:i}=e,{updateNodeData:d}=(0,c.VH)(),{project:u}=(0,g.By)(),[m,p]=(0,N.useState)(),[h,x]=(0,N.useState)(!1),f=async e=>{if(!h&&(null==u?void 0:u.id))try{if(!e.length)throw Error("No file selected");x(!0),p(e);let[t]=e;console.log("\uD83D\uDCE4 Uploading image to Cloudinary...");let n=await o(t,"flow_generator/images");d(l,{content:{url:n.url,type:t.type}}),console.log("✅ IMAGE UPLOADED TO CLOUDINARY:",{nodeId:l,fileName:t.name,cloudinaryUrl:n.url,fileSize:t.size})}catch(e){(0,$.H)("Error uploading image",e)}finally{x(!1)}};return(0,r.jsxs)(G,{id:l,data:a,type:s,title:i,children:[h&&(0,r.jsx)(q,{className:"flex aspect-video w-full animate-pulse items-center justify-center",children:(0,r.jsx)(W.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!h&&a.content&&(0,r.jsx)(eM.default,{src:a.content.url,alt:"Image",width:null!=(t=a.width)?t:1e3,height:null!=(n=a.height)?n:1e3,className:"h-auto w-full"}),!h&&!a.content&&(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,accept:{"image/*":[]},onDrop:f,src:m,onError:console.error,className:"rounded-none border-none bg-transparent p-0 shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{className:"p-4"}),(0,r.jsx)(U.Pi,{})]})]})},eH=(0,S.createServerReference)("7f6b41a2af5772741c679ee3f9c7aaba0889198736",S.callServer,void 0,S.findSourceMapURL,"editImageAction"),eF=(0,S.createServerReference)("7f28718ddb7a46f37c15e5ada8e5559ead15a20dcd",S.callServer,void 0,S.findSourceMapURL,"generateImageAction"),eB={"gpt-image-1":{label:"GPT Image 1",chef:ee.openai,providers:[{...ee.openai,modelId:"gpt-image-1",getCost:e=>{if(!(null==e?void 0:e.size))throw Error("Size is required");if("1024x1024"===e.size)return .08;if("1024x1792"===e.size||"1792x1024"===e.size)return .12;if("1536x1024"===e.size||"1024x1536"===e.size)return .1;throw Error("Size is not supported")}}],sizes:["1024x1024","1024x1536","1536x1024","1024x1792","1792x1024"],supportsEdit:!0,providerOptions:{openai:{quality:"high"}},default:!0},"dall-e-3":{label:"DALL-E 3",chef:ee.openai,providers:[{...ee.openai,modelId:"dall-e-3",getCost:e=>{if(!(null==e?void 0:e.size))throw Error("Size is required");if("1024x1024"===e.size)return .08;if("1024x1792"===e.size||"1792x1024"===e.size)return .12;throw Error("Size is not supported")}}],sizes:["1024x1024","1024x1792","1792x1024"],providerOptions:{openai:{quality:"hd"}}},"dall-e-2":{label:"DALL-E 2",chef:ee.openai,providers:[{...ee.openai,modelId:"dall-e-2",getCost:e=>{if(!(null==e?void 0:e.size))throw Error("Size is required");if("1024x1024"===e.size)return .02;if("512x512"===e.size)return .018;if("256x256"===e.size)return .016;throw Error("Size is not supported")}}],sizes:["1024x1024","512x512","256x256"],priceIndicator:"low"}};async function eV(e){return e.startsWith("data:")?e:new Promise((t,n)=>{fetch(e).then(e=>e.blob()).then(e=>{let r=new FileReader;r.onloadend=()=>{"string"==typeof r.result?t(r.result):n(Error("Failed to convert blob to data URL"))},r.onerror=n,r.readAsDataURL(e)}).catch(n)})}async function eG(e){return await Promise.all(e.map(async e=>{try{return{url:await eV(e.url),type:e.type}}catch(e){throw console.error("Error converting image to base64:",e),e}}))}var eU=n(3455),eq=n(77397);let e$=e=>{let[t,n]=e.split("x").map(Number);return t===n?(0,r.jsx)(eL.A,{size:16,className:"text-muted-foreground"}):t>n?(0,r.jsx)(eU.A,{size:16,className:"text-muted-foreground"}):(0,r.jsx)(eq.A,{size:16,className:"text-muted-foreground"})},eW=e=>{let[t,n]=e.split("x").map(Number);return(0,r.jsxs)("div",{className:"flex items-center gap-1 truncate",children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"\xd7"}),(0,r.jsx)("span",{children:n})]})},eX=e=>{let{id:t,value:n,width:a=200,options:l,className:s,onChange:i}=e,[o,c]=(0,N.useState)(!1);return(0,r.jsxs)(ef.G3,{open:o,onOpenChange:c,data:l.map(e=>({label:e,value:e})),type:"size",value:n,onValueChange:i,children:[(0,r.jsx)(ef.Ms,{id:t,className:"rounded-md h-9",style:{width:a},children:(0,r.jsxs)("div",{className:"flex w-full items-center gap-2",children:[e$(n),eW(n)]})}),(0,r.jsxs)(ef.h5,{className:(0,d.cn)("p-0",s),children:[(0,r.jsx)(ef.oK,{}),(0,r.jsxs)(ef.ex,{children:[(0,r.jsx)(ef.$U,{}),(0,r.jsx)(ef.D5,{children:l.map(e=>(0,r.jsxs)(ef.x4,{value:e,onSelect:()=>{null==i||i(e),c(!1)},children:[e$(e),eW(e),(0,r.jsx)(ek.A,{className:(0,d.cn)("ml-auto size-4",n===e?"opacity-100":"opacity-0")})]},e))})]})]})]})},eK=e=>{var t,n,a,i,o,d;let{data:u,id:m,type:p,title:h}=e,{updateNodeData:x,getNodes:f,getEdges:v}=(0,c.VH)(),[j,y]=(0,N.useState)(!1),{project:w}=(0,g.By)(),A=s((0,b.FB)({id:m},f(),v())),k=A.length>0,C=null!=(i=u.model)?i:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});if(!t)throw Error("No default model found");return t[0]})(eB),z=Y(),_=eB[C],S=null!=(o=u.size)?o:null==_||null==(t=_.sizes)?void 0:t.at(0),T=[...u.content?[u.content]:[],...A],E=(0,N.useCallback)(async()=>{if(j||!(null==w?void 0:w.id))return;let e=(0,b.FB)({id:m},f(),v()),t=l(e),n=[];u.instructions&&n.push(u.instructions),n.push(...t);let r=n.join("\n\n");console.log("\uD83C\uDFA8 IMAGE NODE GENERATING:",{nodeId:m,nodeType:p,incomingNodes:e.map(e=>({id:e.id,type:e.type,data:e.data})),textPrompts:t,textPromptsCount:t.length,uploadedImage:u.content,incomingImages:A,allReferenceImages:T,totalReferenceImages:T.length,instructions:u.instructions,combinedPrompt:r,model:C,size:S});try{var a,s;let e;if(!r&&!T.length)throw Error("No input provided (need text prompt or reference images)");y(!0),z.track("canvas","node","generate",{type:p,textPromptsLength:t.length,imagePromptsLength:T.length,hasUploadedImage:!!u.content,model:C,instructionsLength:null!=(s=null==(a=u.instructions)?void 0:a.length)?s:0});let n=localStorage.getItem("auth_token");if(T.length){console.log("\uD83D\uDD04 Converting blob URLs to base64...");let t=await eG(T);console.log("✅ Conversion complete:",{originalCount:T.length,convertedCount:t.length,samples:t.map(e=>({type:e.type,urlPrefix:e.url.substring(0,50)+"..."}))}),e=await eH({images:t,prompt:r,nodeId:m,projectId:w.id,modelId:C,size:S,authToken:n||void 0})}else e=await eF({prompt:r,modelId:C,instructions:u.instructions,projectId:w.id,nodeId:m,size:S,authToken:n||void 0});if("error"in e)throw Error(e.error);x(m,e.nodeData),es.oR.success("Image generated successfully"),setTimeout(()=>(0,ei.j)("credits"),5e3)}catch(e){(0,$.H)("Error generating image",e)}finally{y(!1)}},[j,null==w?void 0:w.id,S,m,z,p,u.instructions,u.content,v,C,f,x,T,A]),L=(0,N.useMemo)(()=>{var e,t,n,a;let l=Object.fromEntries(Object.entries(eB).map(e=>{let[t,n]=e;return[t,{...n,disabled:k?!n.supportsEdit:n.disabled}]})),s=[{children:(0,r.jsx)(eg,{value:C,options:l,id:m,className:"w-[200px]",onChange:e=>x(m,{model:e})})}];return(null==_||null==(e=_.sizes)?void 0:e.length)&&s.push({children:(0,r.jsx)(eX,{value:null!=S?S:"",options:null!=(a=null==_?void 0:_.sizes)?a:[],id:m,className:"w-[200px]",onChange:e=>x(m,{size:e})})}),s.push(j?{tooltip:"Generating...",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-md h-9 w-9",disabled:!0,children:(0,r.jsx)(W.A,{className:"animate-spin",size:12})})}:{tooltip:(null==(t=u.generated)?void 0:t.url)?"Regenerate":"Generate",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-md h-9 w-9",onClick:E,disabled:j||!(null==w?void 0:w.id),children:(null==(n=u.generated)?void 0:n.url)?(0,r.jsx)(en.A,{size:12}):(0,r.jsx)(er.A,{size:12})})}),u.generated&&s.push({tooltip:"Download",children:(0,r.jsx)(K.$,{variant:"ghost",size:"icon",className:"rounded-md h-9 w-9",onClick:()=>Q(u.generated,m,"png"),children:(0,r.jsx)(ea.A,{size:12})})}),u.updatedAt&&s.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(u.updatedAt))),children:(0,r.jsx)(K.$,{size:"icon",variant:"ghost",className:"rounded-md h-9 w-9",children:(0,r.jsx)(el.A,{size:12})})}),s},[C,k,m,x,null==_?void 0:_.sizes,S,j,u.generated,u.updatedAt,E,null==w?void 0:w.id]),D=(0,N.useMemo)(()=>{if(!u.size)return"1/1";let[e,t]=u.size.split("x").map(Number);return"".concat(e,"/").concat(t)},[u.size]);return(0,r.jsxs)(G,{id:m,data:u,type:p,title:h,toolbar:L,children:[T.length>0&&(0,r.jsxs)("div",{className:"border-b border-border bg-secondary/50 p-3",children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["\uD83D\uDCF8 Reference Images (",T.length,")"]}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap",children:T.map((e,t)=>(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden border border-border",children:[(0,r.jsx)(eM.default,{src:e.url,alt:"Reference ".concat(t+1),width:64,height:64,className:"w-full h-full object-cover"}),(0,r.jsx)("div",{className:"absolute top-0 right-0 bg-black/70 text-white text-[10px] px-1",children:0===t&&u.content?"\uD83D\uDCE4":"\uD83D\uDD17"})]},t))})]}),j&&(0,r.jsx)(q,{className:"flex w-full animate-pulse items-center justify-center rounded-b-xl",style:{aspectRatio:D},children:(0,r.jsx)(W.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!j&&!(null==(n=u.generated)?void 0:n.url)&&(0,r.jsx)("div",{className:"flex w-full items-center justify-center rounded-b-xl bg-secondary p-4",style:{aspectRatio:D},children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(er.A,{size:12,className:"-translate-y-px inline"})," to create an image"]})}),!j&&(null==(a=u.generated)?void 0:a.url)&&(0,r.jsx)(eM.default,{src:u.generated.url,alt:"Generated image",width:1e3,height:1e3,className:"w-full rounded-b-xl object-cover"}),(0,r.jsx)(J.T,{value:null!=(d=u.instructions)?d:"",onChange:e=>x(m,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"})]})};n(51543),n(88313);var eJ=n(76908),eY=n(30232),eQ=n(93777),eZ=n(77004),e0=n(55404),e1=n(31363),e2=n(75699),e5=n(22984),e4=n(79371),e3=n(78336),e6=n(85210),e9=n(67327),e8=n(8624),e7=n(30554),te=n(51876),tt=n(46098),tn=n(64015),tr=n(88065),ta=n(93736),tl=n(8023),ts=n(64832),ti=n(48800),to=n(61194),td=n(45833),tc=n(57456),tu=n(70355),tm=n(80003),tp=n(97239),th=n(72161),tx=n(9602),tg=n(41669),tf=n(58543);let tv=new te.hs("slash"),tb=eJ.bP.create({name:"slash",priority:101,addOptions(){return{HTMLAttributes:{},renderText(e){var t;let{options:n,node:r}=e;return"".concat(n.suggestion.char).concat(null!=(t=r.attrs.label)?t:r.attrs.id)},deleteTriggerWithBackspace:!1,renderHTML(e){var t;let{options:n,node:r}=e;return["span",(0,eJ.KV)(this.HTMLAttributes,n.HTMLAttributes),"".concat(n.suggestion.char).concat(null!=(t=r.attrs.label)?t:r.attrs.id)]},suggestion:{char:"/",pluginKey:tv,command:e=>{var t,n,r;let{editor:a,range:l,props:s}=e,i=a.view.state.selection.$to.nodeAfter;(null==i||null==(t=i.text)?void 0:t.startsWith(" "))&&(l.to+=1),a.chain().focus().insertContentAt(l,[{type:this.name,attrs:s},{type:"text",text:" "}]).run(),null==(r=a.view.dom.ownerDocument.defaultView)||null==(n=r.getSelection())||n.collapseToEnd()},allow:e=>{let{state:t,range:n}=e,r=t.doc.resolve(n.from),a=t.schema.nodes[this.name];return!!r.parent.type.contentMatch.matchType(a)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}}),parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{node:t,HTMLAttributes:n}=e,r={...this.options};r.HTMLAttributes=(0,eJ.KV)({"data-type":this.name},this.options.HTMLAttributes,n);let a=this.options.renderHTML({options:r,node:t});return"string"==typeof a?["span",(0,eJ.KV)({"data-type":this.name},this.options.HTMLAttributes,n),a]:a},renderText(e){let{node:t}=e;return this.options.renderText({options:this.options,node:t})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(e=>{let{tr:t,state:n}=e,r=!1,{selection:a}=n,{empty:l,anchor:s}=a;return!!l&&(n.doc.nodesBetween(s-1,s,(e,n)=>{if(e.type.name===this.name)return r=!0,t.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",n,n+e.nodeSize),!1}),r)})}},addProseMirrorPlugins(){return[(0,tr.Ay)({editor:this.editor,...this.options.suggestion})]}}),tj=(0,tl.$)(ts.l),ty=e=>{let{items:t,editor:n,range:a}=e;return(0,r.jsxs)(ep.uB,{id:"slash-command",className:"border shadow",onKeyDown:e=>{e.stopPropagation()},children:[(0,r.jsx)(ep.xL,{className:"flex w-full items-center justify-center p-4 text-muted-foreground text-sm",children:(0,r.jsx)("p",{children:"No results"})}),(0,r.jsx)(ep.oI,{children:t.map(e=>(0,r.jsxs)(ep.h_,{onSelect:()=>e.command({editor:n,range:a}),className:"flex items-center gap-3 pr-3",children:[(0,r.jsx)("div",{className:"flex size-9 shrink-0 items-center justify-center rounded border bg-secondary",children:(0,r.jsx)(e.icon,{size:16,className:"text-muted-foreground"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium text-sm",children:e.title}),(0,r.jsx)("span",{className:"text-muted-foreground text-xs",children:e.description})]})]},e.title))})]})},tw=e=>{if(["ArrowUp","ArrowDown","Enter"].includes(e.key)){let t=document.querySelector("#slash-command");if(t)return e.preventDefault(),t.dispatchEvent(new KeyboardEvent("keydown",{key:e.key,cancelable:!0,bubbles:!0})),!0}},tN=e=>{let{className:t,extensions:n,limit:a,placeholder:l,...s}=e,i=[tn.A.configure({codeBlock:!1,bulletList:{HTMLAttributes:{class:(0,d.cn)("list-outside list-disc pl-4")}},orderedList:{HTMLAttributes:{class:(0,d.cn)("list-outside list-decimal pl-4")}},listItem:{HTMLAttributes:{class:(0,d.cn)("leading-normal")}},blockquote:{HTMLAttributes:{class:(0,d.cn)("border-l border-l-2 pl-2")}},code:{HTMLAttributes:{class:(0,d.cn)("rounded-md bg-muted px-1.5 py-1 font-medium font-mono"),spellcheck:"false"}},horizontalRule:{HTMLAttributes:{class:(0,d.cn)("mt-4 mb-6 border-muted-foreground border-t")}},dropcursor:{color:"var(--border)",width:4}}),e7.Ay,eZ.A.configure({placeholder:l,emptyEditorClass:"before:text-muted-foreground before:content-[attr(data-placeholder)] before:float-left before:h-0 before:pointer-events-none"}),eY.A.configure({limit:a}),eQ.A.configure({lowlight:tj,HTMLAttributes:{class:(0,d.cn)("rounded-md border p-4 text-sm","bg-background text-foreground","[&_.hljs-doctag]:text-[#d73a49] [&_.hljs-keyword]:text-[#d73a49] [&_.hljs-meta_.hljs-keyword]:text-[#d73a49] [&_.hljs-template-tag]:text-[#d73a49] [&_.hljs-template-variable]:text-[#d73a49] [&_.hljs-type]:text-[#d73a49] [&_.hljs-variable.language_]:text-[#d73a49]","[&_.hljs-title.class_.inherited__]:text-[#6f42c1] [&_.hljs-title.class_]:text-[#6f42c1] [&_.hljs-title.function_]:text-[#6f42c1] [&_.hljs-title]:text-[#6f42c1]","[&_.hljs-attr]:text-[#005cc5] [&_.hljs-attribute]:text-[#005cc5] [&_.hljs-literal]:text-[#005cc5] [&_.hljs-meta]:text-[#005cc5] [&_.hljs-number]:text-[#005cc5] [&_.hljs-operator]:text-[#005cc5] [&_.hljs-selector-attr]:text-[#005cc5] [&_.hljs-selector-class]:text-[#005cc5] [&_.hljs-selector-id]:text-[#005cc5] [&_.hljs-variable]:text-[#005cc5]","[&_.hljs-meta_.hljs-string]:text-[#032f62] [&_.hljs-regexp]:text-[#032f62] [&_.hljs-string]:text-[#032f62]","[&_.hljs-built_in]:text-[#e36209] [&_.hljs-symbol]:text-[#e36209]","[&_.hljs-code]:text-[#6a737d] [&_.hljs-comment]:text-[#6a737d] [&_.hljs-formula]:text-[#6a737d]","[&_.hljs-name]:text-[#22863a] [&_.hljs-quote]:text-[#22863a] [&_.hljs-selector-pseudo]:text-[#22863a] [&_.hljs-selector-tag]:text-[#22863a]","[&_.hljs-subst]:text-[#24292e]","[&_.hljs-section]:font-bold [&_.hljs-section]:text-[#005cc5]","[&_.hljs-bullet]:text-[#735c0f]","[&_.hljs-emphasis]:text-[#24292e] [&_.hljs-emphasis]:italic","[&_.hljs-strong]:font-bold [&_.hljs-strong]:text-[#24292e]","[&_.hljs-addition]:bg-[#f0fff4] [&_.hljs-addition]:text-[#22863a]","[&_.hljs-deletion]:bg-[#ffeef0] [&_.hljs-deletion]:text-[#b31d28]")}}),e1.A,e0.A,tb.configure({suggestion:{items:async e=>{let{editor:t,query:n}=e,r=await [{title:"Text",description:"Just start typing with plain text.",searchTerms:["p","paragraph"],icon:ti.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleNode("paragraph","paragraph").run()}},{title:"To-do List",description:"Track tasks with a to-do list.",searchTerms:["todo","task","list","check","checkbox"],icon:to.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleTaskList().run()}},{title:"Heading 1",description:"Big section heading.",searchTerms:["title","big","large"],icon:td.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:1}).run()}},{title:"Heading 2",description:"Medium section heading.",searchTerms:["subtitle","medium"],icon:tc.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:2}).run()}},{title:"Heading 3",description:"Small section heading.",searchTerms:["subtitle","small"],icon:tu.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:3}).run()}},{title:"Bullet List",description:"Create a simple bullet list.",searchTerms:["unordered","point"],icon:tm.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleBulletList().run()}},{title:"Numbered List",description:"Create a list with numbering.",searchTerms:["ordered"],icon:tp.A,command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleOrderedList().run()}},{title:"Quote",description:"Capture a quote.",searchTerms:["blockquote"],icon:th.A,command:e=>{let{editor:t,range:n}=e;return t.chain().focus().deleteRange(n).toggleNode("paragraph","paragraph").toggleBlockquote().run()}},{title:"Code",description:"Capture a code snippet.",searchTerms:["codeblock"],icon:tx.A,command:e=>{let{editor:t,range:n}=e;return t.chain().focus().deleteRange(n).toggleCodeBlock().run()}},{title:"Table",description:"Add a table view to organize data.",searchTerms:["table"],icon:tg.A,command:e=>{let{editor:t,range:n}=e;return t.chain().focus().deleteRange(n).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}}];return n?new ta.A(r,{keys:["title","description","searchTerms"],threshold:.2,minMatchCharLength:1}).search(n).map(e=>e.item):r},char:"/",render:()=>{let e,t;return{onStart:n=>{e=new tt.NV(ty,{props:n,editor:n.editor}),t=(0,tf.Ay)(document.body,{getReferenceClientRect:()=>{var e;return(null==(e=n.clientRect)?void 0:e.call(n))||new DOMRect},appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(n){e.updateProps(n),t.setProps({getReferenceClientRect:()=>{var e;return(null==(e=n.clientRect)?void 0:e.call(n))||new DOMRect}})},onKeyDown:n=>"Escape"===n.event.key?(t.hide(),e.destroy(),!0):tw(n.event)||!1,onExit(){t.destroy(),e.destroy()}}}}}),e2.XI.configure({HTMLAttributes:{class:(0,d.cn)("relative m-0 mx-auto my-3 w-full table-fixed border-collapse overflow-hidden rounded-none text-sm")},allowTableNodeSelection:!0}),e3.H.configure({HTMLAttributes:{class:(0,d.cn)("relative box-border min-w-[1em] border p-1 text-start align-top")}}),e5.n.configure({HTMLAttributes:{class:(0,d.cn)("relative box-border min-w-[1em] border p-1 text-start align-top")}}),e4.A.configure({HTMLAttributes:{class:(0,d.cn)("relative box-border min-w-[1em] border bg-secondary p-1 text-start align-top font-medium font-semibold text-muted-foreground")}}),e9._.configure({HTMLAttributes:{class:"before:translate-x-[17px]"}}),e6.L.configure({HTMLAttributes:{class:"flex items-start gap-1"},nested:!0}),e8.xJ.configure({mergeNestedSpanStyles:!0})];return(0,r.jsx)(B.Bc,{children:(0,r.jsx)("div",{className:(0,d.cn)(t,"[&_.ProseMirror-focused]:outline-none"),children:(0,r.jsx)(tt.zz,{extensions:[...i,...null!=n?n:[]],editorProps:{handleKeyDown:(e,t)=>{tw(t)}},...s})})})},tA=e=>{let{data:t,id:n,type:a,title:l}=e,{updateNodeData:s}=(0,c.VH)(),i=(0,N.useRef)(null),{project:o}=(0,g.By)();return(0,r.jsx)(G,{id:n,data:t,title:l,type:a,className:"overflow-hidden p-0",children:(0,r.jsx)("div",{className:"nowheel h-full max-h-[30rem] overflow-auto",children:(0,r.jsx)(tN,{onCreate:e=>{i.current=e.editor,o&&e.editor.chain().focus().run()},immediatelyRender:!1,content:t.content,placeholder:"Start typing...",className:(0,d.cn)("prose prose-sm dark:prose-invert size-full p-6","[&_p:first-child]:mt-0","[&_p:last-child]:mb-0"),onUpdate:e=>{let{editor:t}=e;s(n,{content:t.getJSON(),text:t.getText()})}})})})};n(48493);let tk=e=>{let{className:t,from:n,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("group flex w-full items-end justify-end gap-2 py-4","user"===n?"is-user":"is-assistant flex-row-reverse justify-end","[&>div]:max-w-[80%]",t),...a})},tC=e=>{let{children:t,className:n,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col gap-2 rounded-lg px-4 py-3 text-sm","bg-muted text-foreground","group-[.is-user]:bg-primary group-[.is-user]:text-primary-foreground",n),...a,children:(0,r.jsx)("div",{className:"is-user:dark",children:t})})};var tz=n(72799);function t_(e){let{...t}=e;return(0,r.jsx)(tz.bL,{"data-slot":"select",...t})}function tS(e){let{...t}=e;return(0,r.jsx)(tz.WT,{"data-slot":"select-value",...t})}function tT(e){let{className:t,size:n="default",children:a,...l}=e;return(0,r.jsxs)(tz.l9,{"data-slot":"select-trigger","data-size":n,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[a,(0,r.jsx)(tz.In,{asChild:!0,children:(0,r.jsx)(ec.A,{className:"size-4 opacity-50"})})]})}function tE(e){let{className:t,children:n,position:a="popper",...l}=e;return(0,r.jsx)(tz.ZL,{children:(0,r.jsxs)(tz.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...l,children:[(0,r.jsx)(tD,{}),(0,r.jsx)(tz.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),(0,r.jsx)(tR,{})]})})}function tL(e){let{className:t,children:n,...a}=e;return(0,r.jsxs)(tz.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(tz.VF,{children:(0,r.jsx)(ek.A,{className:"size-4"})})}),(0,r.jsx)(tz.p4,{children:n})]})}function tD(e){let{className:t,...n}=e;return(0,r.jsx)(tz.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(eu.A,{className:"size-4"})})}function tR(e){let{className:t,...n}=e;return(0,r.jsx)(tz.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(ec.A,{className:"size-4"})})}var tI=n(28529),tP=n(9386),tM=n(58939),tO=n(5294),tH=n(82544),tF=n(2524),tB=n(60476),tV=n(64547),tG=n(57018),tU=n(10295),tq=n(7666),t$=n(81100),tW=n(88027),tX=n(42805),tK=n(71270),tJ=n(24308),tY=n(18295),tQ=n(18976),tZ=n(65965),t0=n(56220),t1=n(73425),t2=n(99161),t5=n(54531),t4=n(46055),t3=n(88447),t6=n(90974),t9=n(29833),t8=n(98629),t7=n(62100),ne=n(94548),nt=n(97142),nn=n(28237),nr=n(52773),na=n(57741),nl=n(42486),ns=n(83516),ni=n(6007),no=n(55572),nd=n(99050),nc=n(89555),nu=n(41447),nm=n(5145),np=n(18765),nh=n(88327),nx=n(22138),ng=n(25297),nf=n(14638),nv=n(83104),nb=n(68587),nj=n(12801),ny=n(12089),nw=n(47013),nN=n(73061),nA=n(37602),nk=n(78692),nC=n(86231),nz=n(71275),n_=n(42363),nS=n(35986),nT=n(43301),nE=n(36566),nL=n(12170),nD=n(7175),nR=n(71422),nI=n(37126),nP=n(22821),nM=n(1579),nO=n(46253),nH=n(23558),nF=n(76455),nB=n(4179);let nV={".env":tI.A,"*.astro":tP.A,"biome.json":tM.A,".bowerrc":tO.A,"bun.lockb":tH.A,"*.c":tF.A,"*.cpp":tB.A,".circleci/config.yml":tV.A,"*.coffee":tG.A,"*.module.css":tU.A,"*.css":tq.A,"*.dart":t$.A,Dockerfile:tW.A,"docusaurus.config.js":tX.A,".editorconfig":tK.A,".eslintrc":tJ.A,"eslint.config.*":tJ.A,"gatsby-config.*":tY.A,".gitignore":tQ.A,"*.go":tZ.A,"*.graphql":t0.A,"*.sh":t1.A,"Gruntfile.*":t2.A,"gulpfile.*":t5.A,"*.hbs":t4.A,"*.html":t3.A,"*.js":t6.A,"*.json":t9.A,"*.test.js":t8.A,"*.less":t7.A,"*.md":ne.A,"*.mdx":nt.A,"mintlify.json":nn.A,"mocha.opts":nr.A,"*.mustache":t4.A,"*.sql":na.A,"next.config.*":nl.A,"*.pl":ns.A,"*.php":ni.A,"postcss.config.*":no.A,"prettier.config.*":nd.A,"*.prisma":nc.A,"*.pug":nu.A,"*.py":nm.A,"*.r":np.A,"*.rb":nh.A,"*.jsx":nx.A,"*.tsx":nx.A,"readme.md":ng.A,"*.rdb":nf.A,"remix.config.*":nv.A,"*.riv":nb.A,"rollup.config.*":nj.A,"sanity.config.*":ny.A,"*.sass":nw.A,"*.scss":nw.A,"*.sc":nN.A,"*.scala":nN.A,"sentry.client.config.*":nA.A,"components.json":nk.A,"storybook.config.*":nC.A,"stylelint.config.*":nz.A,".sublime-settings":n_.A,"*.svelte":nS.A,"*.svg":nT.A,"*.swift":nE.A,"tailwind.config.*":nL.A,"*.toml":nD.A,"*.ts":nR.A,"vercel.json":nI.A,"vite.config.*":nP.A,"*.vue":nM.A,"*.wasm":nO.A},nG=(0,d.cn)("[&_code]:[counter-reset:line]","[&_code]:[counter-increment:line_0]","[&_.line]:before:content-[counter(line)]","[&_.line]:before:inline-block","[&_.line]:before:[counter-increment:line]","[&_.line]:before:w-4","[&_.line]:before:mr-4","[&_.line]:before:text-[13px]","[&_.line]:before:text-right","[&_.line]:before:text-muted-foreground/50","[&_.line]:before:font-mono","[&_.line]:before:select-none"),nU=(0,d.cn)("dark:[&_.shiki]:!text-[var(--shiki-dark)]","dark:[&_.shiki]:!bg-[var(--shiki-dark-bg)]","dark:[&_.shiki]:![font-style:var(--shiki-dark-font-style)]","dark:[&_.shiki]:![font-weight:var(--shiki-dark-font-weight)]","dark:[&_.shiki]:![text-decoration:var(--shiki-dark-text-decoration)]","dark:[&_.shiki_span]:!text-[var(--shiki-dark)]","dark:[&_.shiki_span]:![font-style:var(--shiki-dark-font-style)]","dark:[&_.shiki_span]:![font-weight:var(--shiki-dark-font-weight)]","dark:[&_.shiki_span]:![text-decoration:var(--shiki-dark-text-decoration)]"),nq=(0,d.cn)("[&_.line.highlighted]:bg-blue-50","[&_.line.highlighted]:after:bg-blue-500","[&_.line.highlighted]:after:absolute","[&_.line.highlighted]:after:left-0","[&_.line.highlighted]:after:top-0","[&_.line.highlighted]:after:bottom-0","[&_.line.highlighted]:after:w-0.5","dark:[&_.line.highlighted]:!bg-blue-500/10"),n$=(0,d.cn)("[&_.line.diff]:after:absolute","[&_.line.diff]:after:left-0","[&_.line.diff]:after:top-0","[&_.line.diff]:after:bottom-0","[&_.line.diff]:after:w-0.5","[&_.line.diff.add]:bg-emerald-50","[&_.line.diff.add]:after:bg-emerald-500","[&_.line.diff.remove]:bg-rose-50","[&_.line.diff.remove]:after:bg-rose-500","dark:[&_.line.diff.add]:!bg-emerald-500/10","dark:[&_.line.diff.remove]:!bg-rose-500/10"),nW=(0,d.cn)("[&_code:has(.focused)_.line]:blur-[2px]","[&_code:has(.focused)_.line.focused]:blur-none"),nX=(0,d.cn)("[&_.highlighted-word]:bg-blue-50","dark:[&_.highlighted-word]:!bg-blue-500/10"),nK=(0,d.cn)("mt-0 bg-background text-sm","[&_pre]:py-4","[&_.shiki]:!bg-[var(--shiki-bg)]","[&_code]:w-full","[&_code]:grid","[&_code]:overflow-x-auto","[&_code]:bg-transparent","[&_.line]:px-4","[&_.line]:w-full","[&_.line]:relative"),nJ=(0,N.createContext)({value:void 0,onValueChange:void 0,data:[]}),nY=e=>{let{value:t,onValueChange:n,defaultValue:a,className:l,data:s,...i}=e,[o,c]=(0,nH.i)({defaultProp:null!=a?a:"",prop:t,onChange:n});return(0,r.jsx)(nJ.Provider,{value:{value:o,onValueChange:c,data:s},children:(0,r.jsx)("div",{className:(0,d.cn)("size-full overflow-hidden rounded-md border",l),...i})})},nQ=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-row items-center border-b bg-secondary p-1",t),...n})},nZ=e=>{let{className:t,children:n,...a}=e,{data:l}=(0,N.useContext)(nJ);return(0,r.jsx)("div",{className:(0,d.cn)("flex grow flex-row items-center gap-2",t),...a,children:l.map(n)})},n0=e=>{var t;let{className:n,icon:a,value:l,children:s,...i}=e,{value:o}=(0,N.useContext)(nJ),d=null==(t=Object.entries(nV).find(e=>{let[t]=e;return new RegExp("^".concat(t.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"),"$")).test(s)}))?void 0:t[1],c=null!=a?a:d;return l!==o?null:(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-secondary px-4 py-1.5 text-muted-foreground text-xs",...i,children:[c&&(0,r.jsx)(c,{className:"h-4 w-4 shrink-0"}),(0,r.jsx)("span",{className:"flex-1 truncate",children:s})]})},n1=e=>{let{value:t,onValueChange:n}=(0,N.useContext)(nJ);return(0,r.jsx)(t_,{value:t,onValueChange:n,...e})},n2=e=>{let{className:t,...n}=e;return(0,r.jsx)(tT,{className:(0,d.cn)("w-fit border-none text-muted-foreground text-xs shadow-none",t),...n})},n5=e=>(0,r.jsx)(tS,{...e}),n4=e=>{let{children:t,...n}=e,{data:a}=(0,N.useContext)(nJ);return(0,r.jsx)(tE,{...n,children:a.map(t)})},n3=e=>{let{className:t,...n}=e;return(0,r.jsx)(tL,{className:(0,d.cn)("text-sm",t),...n})},n6=e=>{var t;let{asChild:n,onCopy:a,onError:l,timeout:s=2e3,children:i,className:o,...c}=e,[u,m]=(0,N.useState)(!1),{data:p,value:h}=(0,N.useContext)(nJ),x=null==(t=p.find(e=>e.language===h))?void 0:t.code,g=()=>{navigator.clipboard.writeText&&x&&navigator.clipboard.writeText(x).then(()=>{m(!0),null==a||a(),setTimeout(()=>m(!1),s)},l)};if(n)return(0,N.cloneElement)(i,{onClick:g});let f=u?ek.A:O.A;return(0,r.jsx)(K.$,{variant:"ghost",size:"icon",onClick:g,className:(0,d.cn)("shrink-0",o),...c,children:null!=i?i:(0,r.jsx)(f,{size:14,className:"text-muted-foreground"})})},n9=e=>{let{children:t,...n}=e;return(0,r.jsx)("div",{...n,children:(0,r.jsx)("pre",{className:"w-full",children:(0,r.jsx)("code",{children:null==t?void 0:t.toString().split("\n").map((e,t)=>(0,r.jsx)("span",{className:"line",children:e},t))})})})},n8=e=>{let{children:t,...n}=e,{data:a}=(0,N.useContext)(nJ);return(0,r.jsx)("div",{...n,children:a.map(t)})},n7=e=>{let{children:t,lineNumbers:n=!0,className:a,value:l,...s}=e,{value:i}=(0,N.useContext)(nJ);return l!==i?null:(0,r.jsx)("div",{className:(0,d.cn)(nK,nq,n$,nW,nX,nU,n&&nG,a),...s,children:t})},re=e=>{let{children:t,themes:n,language:a,syntaxHighlighting:l=!0,...s}=e,[i,o]=(0,N.useState)(null);return((0,N.useEffect)(()=>{l&&((e,t,n)=>(0,nB.Yz)(e,{lang:null!=t?t:"typescript",themes:null!=n?n:{light:"github-light",dark:"github-dark-default"},transformers:[(0,nF.Bi)({matchAlgorithm:"v3"}),(0,nF.Ot)({matchAlgorithm:"v3"}),(0,nF.Gv)({matchAlgorithm:"v3"}),(0,nF.Kf)({matchAlgorithm:"v3"}),(0,nF.q1)({matchAlgorithm:"v3"})]}))(t,a,n).then(o).catch(console.error)},[t,n,l,a]),l&&i)?(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:i},...s}):(0,r.jsx)(n9,{children:t})};var rt=n(52576),rn=n(97866);let rr={ol:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("ol",{className:(0,d.cn)("ml-4 list-outside list-decimal",a),...l,children:n})},li:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("li",{className:(0,d.cn)("py-1",a),...l,children:n})},ul:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("ul",{className:(0,d.cn)("ml-4 list-outside list-disc",a),...l,children:n})},strong:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("span",{className:(0,d.cn)("font-semibold",a),...l,children:n})},a:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("a",{className:(0,d.cn)("font-medium text-primary underline",a),target:"_blank",rel:"noreferrer",...l,children:n})},h1:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("h1",{className:(0,d.cn)("mt-6 mb-2 font-semibold text-3xl",a),...l,children:n})},h2:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("h2",{className:(0,d.cn)("mt-6 mb-2 font-semibold text-2xl",a),...l,children:n})},h3:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("h3",{className:(0,d.cn)("mt-6 mb-2 font-semibold text-xl",a),...l,children:n})},h4:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("h4",{className:(0,d.cn)("mt-6 mb-2 font-semibold text-lg",a),...l,children:n})},h5:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("h5",{className:(0,d.cn)("mt-6 mb-2 font-semibold text-base",a),...l,children:n})},h6:e=>{let{node:t,children:n,className:a,...l}=e;return(0,r.jsx)("h6",{className:(0,d.cn)("mt-6 mb-2 font-semibold text-sm",a),...l,children:n})},pre:e=>{var t;let{node:n,className:a,children:l}=e,s="javascript";if("string"==typeof(null==n||null==(t=n.properties)?void 0:t.className)&&(s=n.properties.className.replace("language-","")),!("object"==typeof l&&null!==l&&"type"in l&&"code"===l.type))return(0,r.jsx)("pre",{children:l});let i=[{language:s,filename:"index.js",code:l.props.children}];return(0,r.jsxs)(nY,{className:(0,d.cn)("my-4 h-auto",a),data:i,defaultValue:i[0].language,children:[(0,r.jsxs)(nQ,{children:[(0,r.jsx)(nZ,{children:e=>(0,r.jsx)(n0,{value:e.language,children:e.filename},e.language)}),(0,r.jsxs)(n1,{children:[(0,r.jsx)(n2,{children:(0,r.jsx)(n5,{})}),(0,r.jsx)(n4,{children:e=>(0,r.jsx)(n3,{value:e.language,children:e.language},e.language)})]}),(0,r.jsx)(n6,{onCopy:()=>console.log("Copied code to clipboard"),onError:()=>console.error("Failed to copy code to clipboard")})]}),(0,r.jsx)(n8,{children:e=>(0,r.jsx)(n7,{value:e.language,children:(0,r.jsx)(re,{language:e.language,children:e.code})},e.language)})]})}},ra=(0,N.memo)(e=>{let{className:t,options:n,children:a,...l}=e;return(0,r.jsx)("div",{className:(0,d.cn)("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",t),...l,children:(0,r.jsx)(rt.oz,{remarkPlugins:[rn.A],components:rr,...n,children:a})})},(e,t)=>e.children===t.children);var rl=n(57259);function rs(e){let{...t}=e;return(0,r.jsx)(rl.bL,{"data-slot":"collapsible",...t})}function ri(e){let{...t}=e;return(0,r.jsx)(rl.R6,{"data-slot":"collapsible-trigger",...t})}function ro(e){let{...t}=e;return(0,r.jsx)(rl.Ke,{"data-slot":"collapsible-content",...t})}var rd=n(28446);let rc=e=>{let{className:t,...n}=e;return(0,r.jsx)(rs,{className:(0,d.cn)("not-prose mb-4 text-primary text-xs",t),...n})},ru=e=>{let{className:t,count:n,children:a,...l}=e;return(0,r.jsx)(ri,{className:"flex items-center gap-2",...l,children:null!=a?a:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"font-medium",children:["Used ",n," sources"]}),(0,r.jsx)(ec.A,{className:"h-4 w-4"})]})})},rm=e=>{let{className:t,...n}=e;return(0,r.jsx)(ro,{className:(0,d.cn)("mt-3 flex flex-col gap-2",t),...n})},rp=e=>{let{href:t,title:n,children:a,...l}=e;return(0,r.jsx)("a",{href:t,className:"flex items-center gap-2",target:"_blank",rel:"noreferrer",...l,children:null!=a?a:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(rd.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"block font-medium",children:n})]})})};var rh=n(48751);let rx=(0,n(99732).A)(),rg=e=>{var t,n,a,l,s;let{data:i,id:o,type:d,title:u}=e,{updateNodeData:m,getNodes:p,getEdges:h}=(0,c.VH)(),{project:x}=(0,g.By)(),{models:f}=(0,rh.G)(),v=null!=(l=i.model)?l:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});return t?t[0]:"o3"})(f),j=useAnalytics(),[y,w]=useReasoning(),{sendMessage:A,messages:k,setMessages:C,status:z,stop:_}=(0,eT.Y_)({transport:new eE.rL({api:"/api/chat"}),onError:e=>(0,$.H)("Error generating text",e),onFinish:e=>{var t,n,r,a;let{message:l}=e;m(o,{generated:{text:null!=(r=null==(t=l.parts.find(e=>"text"===e.type))?void 0:t.text)?r:"",sources:null!=(a=null==(n=l.parts)?void 0:n.filter(e=>"source-url"===e.type))?a:[]},updatedAt:new Date().toISOString()}),w(e=>({...e,isGenerating:!1})),es.oR.success("Text generated successfully"),setTimeout(()=>(0,ei.j)("credits"),5e3)}}),S=(0,N.useCallback)(async()=>{var e,t;let n=(0,b.FB)({id:o},p(),h()),r=getTextFromTextNodes(n),a=getTranscriptionFromAudioNodes(n),l=getImagesFromImageNodes(n),s=getDescriptionsFromImageNodes(n),c=getTweetContentFromTweetNodes(n),u=getFilesFromFileNodes(n);if(console.log("\uD83D\uDCDD TEXT NODE GENERATING:",{nodeId:o,nodeType:d,incomingNodes:n,textPrompts:r,audioPrompts:a,images:l,imageDescriptions:s,tweetContent:c,files:u,instructions:i.instructions,model:v}),!r.length&&!a.length&&!i.instructions)return void(0,$.H)("Error generating text","No prompts found");let m=[];i.instructions&&m.push("--- Instructions ---",i.instructions),r.length&&m.push("--- Text Prompts ---",...r),a.length&&m.push("--- Audio Prompts ---",...a),s.length&&m.push("--- Image Descriptions ---",...s),c.length&&m.push("--- Tweet Content ---",...c),j.track("canvas","node","generate",{type:d,promptLength:m.join("\n").length,model:v,instructionsLength:null!=(t=null==(e=i.instructions)?void 0:e.length)?t:0,imageCount:l.length,fileCount:u.length});let x=[];for(let e of l)x.push({mediaType:e.type,url:e.url,type:"file"});for(let e of u)x.push({mediaType:e.type,url:e.url,type:"file"});C([]),await A({text:m.join("\n"),files:x},{body:{modelId:v}})},[A,i.instructions,h,p,o,v,d,j.track,C]),T=(0,N.useCallback)(e=>{navigator.clipboard.writeText(e),es.oR.success("Copied to clipboard")},[]),E=(0,N.useMemo)(()=>{var e,t;let n=[];if(n.push({children:(0,r.jsx)(eg,{value:v,options:f,className:"w-[200px] rounded-full",onChange:e=>m(o,{model:e})},o)}),"submitted"===z||"streaming"===z)n.push({tooltip:"Stop",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",onClick:_,disabled:!(null==x?void 0:x.id),children:(0,r.jsx)(eL.A,{size:12})})});else if(k.length||(null==(e=i.generated)?void 0:e.text)){let e=k.length?k.filter(e=>"assistant"===e.role).map(e=>{var t,n;return null!=(n=null==(t=e.parts.find(e=>"text"===e.type))?void 0:t.text)?n:""}).join("\n"):null==(t=i.generated)?void 0:t.text;n.push({tooltip:"Regenerate",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",onClick:S,disabled:!(null==x?void 0:x.id),children:(0,r.jsx)(en.A,{size:12})})}),n.push({tooltip:"Copy",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",disabled:!e,onClick:()=>T(null!=e?e:""),variant:"ghost",children:(0,r.jsx)(O.A,{size:12})})})}else n.push({tooltip:"Generate",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-full",onClick:S,disabled:!(null==x?void 0:x.id),children:(0,r.jsx)(er.A,{size:12})})});return i.updatedAt&&n.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(i.updatedAt))),children:(0,r.jsx)(K.$,{size:"icon",variant:"ghost",className:"rounded-full",children:(0,r.jsx)(el.A,{size:12})})}),n},[null==(t=i.generated)?void 0:t.text,i.updatedAt,S,m,v,o,k,null==x?void 0:x.id,z,_,T,f]),L=k.filter(e=>"user"!==e.role);return(0,N.useEffect)(()=>{k.some(e=>e.parts.some(e=>"reasoning"===e.type))&&!y.isReasoning&&"streaming"===z&&w({isReasoning:!0,isGenerating:!0})},[k,y,z,w]),(0,r.jsxs)(G,{id:o,data:i,title:u,type:d,toolbar:E,children:[(0,r.jsxs)("div",{className:"nowheel h-full max-h-[30rem] flex-1 overflow-auto rounded-t-3xl rounded-b-xl bg-secondary p-4",children:["submitted"===z&&(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(q,{className:"h-4 w-60 animate-pulse rounded-lg"}),(0,r.jsx)(q,{className:"h-4 w-40 animate-pulse rounded-lg"}),(0,r.jsx)(q,{className:"h-4 w-50 animate-pulse rounded-lg"})]}),(null==(n=i.generated)?void 0:n.text)&&!L.length&&"submitted"!==z&&(0,r.jsx)(rt.oz,{children:i.generated.text}),!(null==(a=i.generated)?void 0:a.text)&&!L.length&&"submitted"!==z&&(0,r.jsx)("div",{className:"flex aspect-video w-full items-center justify-center bg-secondary",children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(er.A,{size:12,className:"-translate-y-px inline"})," ","to generate text"]})}),!!L.length&&"submitted"!==z&&L.map(e=>{var t,n,a;return(0,r.jsx)(tk,{from:"assistant"===e.role?"assistant":"user",className:"p-0 [&>div]:max-w-none",children:(0,r.jsxs)("div",{children:[!!(null==(t=e.parts.filter(e=>"source-url"===e.type))?void 0:t.length)&&(0,r.jsxs)(rc,{children:[(0,r.jsx)(ru,{count:e.parts.filter(e=>"source-url"===e.type).length}),(0,r.jsx)(rm,{children:e.parts.filter(e=>"source-url"===e.type).map(e=>{let{url:t,title:n}=e;return(0,r.jsx)(rp,{href:t,title:null!=n?n:new URL(t).hostname},null!=t?t:"")})})]}),(0,r.jsx)(tC,{className:"bg-transparent p-0",children:(0,r.jsx)(ra,{children:null!=(a=null==(n=e.parts.find(e=>"text"===e.type))?void 0:n.text)?a:""})})]})},e.id)})]}),(0,r.jsx)(J.T,{value:null!=(s=i.instructions)?s:"",onChange:e=>m(o,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"}),(0,r.jsx)(rx.In,{children:k.flatMap(e=>e.parts.filter(e=>"reasoning"===e.type).flatMap(e=>{var t;return null!=(t=e.text)?t:""}))})]})},rf=(0,S.createServerReference)("7fe0e41262b036c4c5662fca23fc77825bc3d2d504",S.callServer,void 0,S.findSourceMapURL,"getTweetData");var rv=n(5834),rb=n(49236);let rj=e=>{var t;let{data:n,id:a,type:l,title:s}=e,[i,o]=(0,N.useState)(""),{updateNodeData:u}=(0,c.VH)(),[m,p]=(0,N.useState)(!1),h=async e=>{if(e.preventDefault(),i&&!m){p(!0);try{let e=await rf(i);if("error"in e)throw Error(e.error);u(a,{content:{id:i,text:e.text,author:e.author,date:e.date}})}catch(e){(0,$.H)("Error fetching tweet",e)}finally{p(!1)}}};return(0,r.jsx)(G,{id:a,data:n,type:l,title:s,children:(null==(t=n.content)?void 0:t.id)?(0,r.jsx)("div",{className:(0,d.cn)("[&_.react-tweet-theme]:m-0!","[&_.react-tweet-theme]:rounded-3xl!"),children:(0,r.jsx)(rb.Y,{id:n.content.id})}):(0,r.jsxs)("form",{onSubmit:h,className:"flex items-center gap-2 p-1",children:[(0,r.jsx)(rv.p,{type:"text",placeholder:"Tweet ID",value:i,onChange:e=>{let{target:t}=e;return o(t.value)},className:"rounded-full"}),(0,r.jsx)(K.$,{type:"submit",className:"rounded-full",disabled:m,children:m?(0,r.jsx)(W.A,{className:"animate-spin"}):"Submit"})]})})},ry=e=>{let{data:t,id:n,type:a,title:l}=e,{updateNodeData:s}=(0,c.VH)(),[i,d]=(0,N.useState)(),[u,m]=(0,N.useState)(!1),p=async e=>{if(!u)try{if(!e.length)throw Error("No file selected");m(!0),d(e);let[t]=e;console.log("\uD83D\uDCE4 Uploading video to Cloudinary...");let r=await o(t,"flow_generator/videos");s(n,{content:{url:r.url,type:t.type}}),console.log("✅ VIDEO UPLOADED TO CLOUDINARY:",{nodeId:n,fileName:t.name,cloudinaryUrl:r.url,fileSize:t.size})}catch(e){(0,$.H)("Error uploading video",e)}finally{m(!1)}};return(0,r.jsxs)(G,{id:n,data:t,type:a,title:l,children:[u&&(0,r.jsx)(q,{className:"flex aspect-video w-full animate-pulse items-center justify-center",children:(0,r.jsx)(W.A,{size:16,className:"size-4 animate-spin text-muted-foreground"})}),!u&&t.content&&(0,r.jsx)("video",{src:t.content.url,className:"h-auto w-full",autoPlay:!0,muted:!0,loop:!0}),!u&&!t.content&&(0,r.jsxs)(U.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,accept:{"video/*":[]},onDrop:p,src:i,onError:console.error,className:"rounded-none border-none bg-transparent shadow-none hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent",children:[(0,r.jsx)(U.qq,{className:"p-4"}),(0,r.jsx)(U.Pi,{})]})]})},rw=(0,S.createServerReference)("7f7a90679cedc35687d6c769ad1225cfb14eea8929",S.callServer,void 0,S.findSourceMapURL,"generateVideoAction"),rN={"sora-2":{id:"sora-2",label:"Sora 2 (Fast)",chef:ee.openai,providers:[ee.openai],provider:"openai",default:!0,sizes:["1280x720","1920x1080","1080x1920","720x1280"],durations:[4,8,12,16,20],supportsReference:!0,supportsRemix:!0},"sora-2-pro":{id:"sora-2-pro",label:"Sora 2 Pro (Quality)",chef:ee.openai,providers:[ee.openai],provider:"openai",sizes:["1280x720","1920x1080","1080x1920","720x1280"],durations:[4,8,12,16,20],supportsReference:!0,supportsRemix:!0},veo3:{id:"veo3",label:"Veo 3 (Quality)",chef:ee.openai,providers:[ee.openai],provider:"kieai",aspectRatios:["16:9","9:16","Auto"],supportsReference:!0,supportsRemix:!1,generationTypes:["TEXT_2_VIDEO","FIRST_AND_LAST_FRAMES_2_VIDEO","REFERENCE_2_VIDEO"]},veo3_fast:{id:"veo3_fast",label:"Veo 3 Fast",chef:ee.openai,providers:[ee.openai],provider:"kieai",aspectRatios:["16:9","9:16","Auto"],supportsReference:!0,supportsRemix:!1,generationTypes:["TEXT_2_VIDEO","FIRST_AND_LAST_FRAMES_2_VIDEO","REFERENCE_2_VIDEO"]},"kling-v2.1":{id:"kling-v2.1",label:"Kling AI v2.1",chef:ee.openai,providers:[ee.openai],provider:"aiml",durations:[5,10],supportsReference:!0,supportsRemix:!1},"runway-gen3":{id:"runway-gen3",label:"Gen-3 Alpha",chef:ee.runway,providers:[ee.runway],provider:"runway"},"luma-dream-machine":{id:"luma-dream-machine",label:"Dream Machine",chef:ee.luma,providers:[ee.luma],provider:"luma"}},rA=["1280x720","1920x1080","1080x1920","720x1280"],rk=e=>{let{value:t,modelId:n,onChange:a,className:l}=e,s=rN[n].sizes||rA;return(0,r.jsxs)(t_,{value:t,onValueChange:a,children:[(0,r.jsx)(tT,{className:null!=l?l:"rounded-md h-9",children:(0,r.jsx)(tS,{placeholder:"Select size"})}),(0,r.jsx)(tE,{className:"z-[1000]",children:s.map(e=>(0,r.jsx)(tL,{value:e,children:e},e))})]})},rC=[4,8,12,16,20],rz=e=>{let{value:t,modelId:n,onChange:a,className:l}=e,s=rN[n].durations||rC;return(0,r.jsxs)(t_,{value:t.toString(),onValueChange:e=>a(Number(e)),children:[(0,r.jsx)(tT,{className:null!=l?l:"rounded-md h-9",children:(0,r.jsx)(tS,{placeholder:"Select duration"})}),(0,r.jsx)(tE,{className:"z-[1000]",children:s.map(e=>(0,r.jsxs)(tL,{value:e.toString(),children:[e,"s"]},e))})]})},r_=e=>{var t,n,a,i,o,d,u,m,p,h,x;let{data:f,id:v,type:j,title:y}=e,{updateNodeData:w,getNodes:A,getEdges:k}=(0,c.VH)(),[C,z]=(0,N.useState)(!1),[_,S]=(0,N.useState)(0),[T,E]=(0,N.useState)(""),{project:L}=(0,g.By)(),D=null!=(d=f.model)?d:(e=>{let t=Object.entries(e).find(e=>{let[t,n]=e;return n.default});if(!t)throw Error("No default model found");return t[0]})(rN),R=null!=(u=f.size)?u:"1280x720",I=null!=(m=f.seconds)?m:8,P=Y(),M="sora-2"===D||"sora-2-pro"===D,O=rN[D],H=(0,b.FB)({id:v},A(),k()),F=s(H),B=H.filter(e=>"video"===e.type&&e.data.content).map(e=>e.data.content),V=[...f.content?[f.content]:[],...F,...B],U=async()=>{if(!C&&(null==L?void 0:L.id))try{var e,t;let n=l(H),r=[];f.instructions&&r.push(f.instructions),r.push(...n);let a=r.join("\n\n");if(console.log("\uD83C\uDFAC VIDEO NODE GENERATING:",{nodeId:v,nodeType:j,incomingNodes:H.map(e=>({id:e.id,type:e.type,data:e.data})),textPrompts:n,textPromptsCount:n.length,uploadedMedia:f.content,incomingImages:F,incomingVideos:B,allReferenceMedia:V,totalReferenceMedia:V.length,instructions:f.instructions,combinedPrompt:a,model:D}),!a&&!V.length)throw Error("No input provided (need text prompt or reference media)");z(!0),S(0),E("Preparing..."),P.track("canvas","node","generate",{type:j,promptLength:a.length,textPromptsLength:n.length,model:D,instructionsLength:null!=(t=null==(e=f.instructions)?void 0:e.length)?t:0,referenceMediaCount:V.length,hasUploadedMedia:!!f.content});let s=await eG(V);E("Submitting...");let i=await rw({modelId:D,prompt:a,referenceMedia:s,nodeId:v,projectId:L.id,size:R,seconds:I});if("error"in i)throw Error(i.error);w(v,i.nodeData),es.oR.success("Video generated successfully"),setTimeout(()=>(0,ei.j)("credits"),5e3)}catch(e){(0,$.H)("Error generating video",e)}finally{z(!1),S(0),E("")}},q=[{children:(0,r.jsx)(eg,{value:D,options:rN,className:"w-[200px] rounded-md h-9",onChange:e=>w(v,{model:e})},v)},...M&&O.sizes?[{children:(0,r.jsx)(rk,{value:R,modelId:D,onChange:e=>w(v,{size:e}),className:"w-[120px] rounded-md h-9"})}]:[],...M&&O.durations?[{children:(0,r.jsx)(rz,{value:I,modelId:D,onChange:e=>w(v,{seconds:e}),className:"w-[80px] rounded-md h-9"})}]:[],C?{tooltip:"Generating...",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-md h-9",disabled:!0,children:(0,r.jsx)(W.A,{className:"animate-spin",size:12})})}:{tooltip:(null==(t=f.generated)?void 0:t.url)?"Regenerate":"Generate",children:(0,r.jsx)(K.$,{size:"icon",className:"rounded-md h-9",onClick:U,disabled:C||!(null==L?void 0:L.id),children:(null==(n=f.generated)?void 0:n.url)?(0,r.jsx)(en.A,{size:12}):(0,r.jsx)(er.A,{size:12})})}];return(null==(a=f.generated)?void 0:a.url)&&q.push({tooltip:"Download",children:(0,r.jsx)(K.$,{variant:"ghost",size:"icon",className:"rounded-md h-9",onClick:()=>Q(f.generated,v,"mp4"),children:(0,r.jsx)(ea.A,{size:12})})}),f.updatedAt&&q.push({tooltip:"Last updated: ".concat(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(f.updatedAt))),children:(0,r.jsx)(K.$,{size:"icon",variant:"ghost",className:"rounded-md h-9",children:(0,r.jsx)(el.A,{size:12})})}),(0,r.jsxs)(G,{id:v,data:f,type:j,title:y,toolbar:q,children:[V.length>0&&(0,r.jsxs)("div",{className:"border-b border-border bg-secondary/50 p-3",children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["\uD83C\uDFAC Reference Media (",V.length,")"]}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap",children:V.map((e,t)=>(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden border border-border",children:[e.type.startsWith("image")?(0,r.jsx)(eM.default,{src:e.url,alt:"Reference ".concat(t+1),width:64,height:64,className:"w-full h-full object-cover"}):(0,r.jsx)("video",{src:e.url,className:"w-full h-full object-cover",muted:!0}),(0,r.jsx)("div",{className:"absolute top-0 right-0 bg-black/70 text-white text-[10px] px-1",children:0===t&&f.content?"\uD83D\uDCE4":"\uD83D\uDD17"})]},t))})]}),C&&(0,r.jsx)("div",{className:"flex aspect-video w-full items-center justify-center rounded-b-xl bg-secondary/50 relative",children:(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-3 z-10",children:[(0,r.jsx)(W.A,{size:32,className:"animate-spin text-primary"}),(0,r.jsxs)("div",{className:"text-center space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:T||"Generating..."}),M&&(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[R," • ",I,"s • ",O.label]})]}),_>0&&(0,r.jsx)("div",{className:"w-48 h-2 bg-secondary rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-primary transition-all duration-300",style:{width:"".concat(_,"%")}})})]})}),!C&&!(null==(i=f.generated)?void 0:i.url)&&(0,r.jsx)("div",{className:"flex aspect-video w-full items-center justify-center rounded-b-xl bg-secondary",children:(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Press ",(0,r.jsx)(er.A,{size:12,className:"-translate-y-px inline"})," to generate video"]})}),(null==(o=f.generated)?void 0:o.url)&&!C&&(0,r.jsx)("video",{src:f.generated.url,width:null!=(p=f.width)?p:800,height:null!=(h=f.height)?h:450,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full rounded-b-xl object-cover"}),(0,r.jsx)(J.T,{value:null!=(x=f.instructions)?x:"",onChange:e=>w(v,{instructions:e.target.value}),placeholder:"Enter instructions",className:"shrink-0 resize-none rounded-none border-none bg-transparent! shadow-none focus-visible:ring-0"})]})},rS={image:e=>{let t=(0,c.d)({id:e.id,handleType:"target"}).length?eK:eO;return(0,r.jsx)(t,{...e,title:"Image"})},text:e=>{let t=(0,c.d)({id:e.id,handleType:"target"}).length?rg:tA;return(0,r.jsx)(t,{...e,title:"Text"})},drop:e=>{let{data:t,id:n}=e,{addNodes:a,deleteElements:l,getNode:s,addEdges:i,getNodeConnections:o}=(0,c.VH)(),d=(0,N.useRef)(null);return(0,N.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l({nodes:[{id:n}]})},t=e=>{let t=d.current;t&&!t.contains(e.target)&&l({nodes:[{id:n}]})};return window.addEventListener("keydown",e),setTimeout(()=>{window.addEventListener("click",t)},50),()=>{window.removeEventListener("keydown",e),window.removeEventListener("click",t)}},[l,n]),(0,r.jsx)("div",{ref:d,children:(0,r.jsx)(G,{id:n,data:t,type:"drop",title:"Add a new node",children:(0,r.jsxs)(ep.uB,{className:"rounded-lg",children:[(0,r.jsx)(ep.G7,{placeholder:"Type a command or search..."}),(0,r.jsxs)(ep.oI,{children:[(0,r.jsx)(ep.xL,{children:"No results found."}),(0,r.jsx)(ep.L$,{heading:"Add node",children:eR.o.filter(e=>"file"!==e.id&&"tweet"!==e.id).map(e=>(0,r.jsxs)(ep.h_,{onSelect:()=>((e,r)=>{let d=s(n),c=(null==d?void 0:d.position)||{x:0,y:0},u=o({nodeId:n});l({nodes:[{id:n}]});let m=(0,w.Ak)(),{data:p,...h}=null!=r?r:{};for(let n of(a({id:m,type:e,position:c,data:{...p||{}},origin:[0,.5],...h}),u))i({id:(0,w.Ak)(),source:t.isSource?m:n.source,target:t.isSource?n.source:m,type:"animated"})})(e.id,e.data),children:[(0,r.jsx)(e.icon,{size:16}),e.label]},e.id))})]})]})})})},video:e=>{let t=(0,c.d)({id:e.id,handleType:"target"}).length?r_:ry;return(0,r.jsx)(t,{...e,title:"Video"})},audio:e=>{let t=(0,c.d)({id:e.id,handleType:"target"}).length?eN:X;return(0,r.jsx)(t,{...e,title:"Audio"})},code:e=>{let t=(0,c.d)({id:e.id,handleType:"target"}).length?eD:e_;return(0,r.jsx)(t,{...e,title:"Code"})},file:e=>(0,r.jsx)(eP,{...e,title:"File"}),tweet:e=>(0,r.jsx)(rj,{...e,title:"Tweet"})};var rT=n(8597),rE=n(79158);let rL=()=>{let{mouseMode:e,setMouseMode:t}=(0,v.kX)();return(0,r.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 z-[60]",children:(0,r.jsx)("div",{className:"bg-black border border-gray-700/50 rounded-2xl p-1 shadow-lg backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"relative flex flex-col w-8 h-16",children:[(0,r.jsx)("div",{className:"absolute inset-1 rounded-xl bg-gray-800/50"}),(0,r.jsx)("div",{className:"absolute w-6 h-6 rounded-lg bg-blue-600 shadow-lg transition-transform duration-300 z-10 ".concat("select"===e?"top-1 left-1":"bottom-1 left-1")}),(0,r.jsx)("div",{className:"relative z-20 w-6 h-6 rounded-lg flex items-center justify-center cursor-pointer transition-colors duration-300 mt-1 ml-1 ".concat("select"===e?"text-white":"text-gray-500"),onClick:()=>t("select"),title:"Selection Mode",children:(0,r.jsx)(rT.A,{className:"h-3.5 w-3.5"})}),(0,r.jsx)("div",{className:"relative z-20 w-6 h-6 rounded-lg flex items-center justify-center cursor-pointer transition-colors duration-300 mb-1 ml-1 ".concat("pan"===e?"text-white":"text-gray-500"),onClick:()=>t("pan"),title:"Pan Mode",children:(0,r.jsx)(rE.A,{className:"h-3.5 w-3.5"})})]})})})},rD=e=>{var t,n;let{children:l,readOnly:s,...i}=e,{project:o,updateProject:d}=(0,g.By)(),{mouseMode:u}=(0,v.kX)(),{onConnect:m,onConnectStart:p,onConnectEnd:h,onEdgesChange:z,onNodesChange:S,nodes:T,edges:E,...P}=null!=i?i:{},M=null==o?void 0:o.content,[O,H]=(0,N.useState)(null!=(t=null!=T?T:null==M?void 0:M.nodes)?t:[]),[F,B]=(0,N.useState)(null!=(n=null!=E?E:null==M?void 0:M.edges)?n:[]);(0,N.useEffect)(()=>{if(null==o?void 0:o.content){var e,t;let n=o.content;H(null!=(e=n.nodes)?e:[]),B(null!=(t=n.edges)?t:[])}},[null==o?void 0:o.id]);let[V,G]=(0,N.useState)([]),{getEdges:U,toObject:q,screenToFlowPosition:$,getNodes:W,getNode:X,updateNode:K}=(0,c.VH)(),[J,Y]=(0,N.useState)({isSaving:!1,lastSaved:null}),Q=(0,k.YQ)(async()=>{if(!J.isSaving&&(null==o?void 0:o.userId)&&(null==o?void 0:o.id))try{Y(e=>({...e,isSaving:!0}));let e=q();await a.k.save(o.id,e),Y(e=>({...e,lastSaved:new Date}))}catch(e){console.error("Error saving workspace",e)}finally{Y(e=>({...e,isSaving:!1}))}},1e3),Z=(0,N.useCallback)(e=>{if(s){let t=e.filter(e=>"select"===e.type);t.length>0&&H(e=>(0,c._0)(t,e));return}H(t=>{let n=(0,c._0)(e,t);return Q(),null==S||S(e),n})},[s,Q,S]),ee=(0,N.useCallback)(e=>{if(s){let t=e.filter(e=>"select"===e.type);t.length>0&&B(e=>(0,c.zW)(t,e));return}B(t=>{let n=(0,c.zW)(e,t);return Q(),null==z||z(e),n})},[s,Q,z]),et=(0,N.useCallback)(e=>{if(s)return;let t=X(e.source),n=X(e.target);console.log("\uD83D\uDD17 NODE CONNECTION MADE:",{source:{id:null==t?void 0:t.id,type:null==t?void 0:t.type,data:null==t?void 0:t.data},target:{id:null==n?void 0:n.id,type:null==n?void 0:n.type,data:null==n?void 0:n.data},connection:{sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}});let r={id:(0,w.Ak)(),type:"animated",...e};B(e=>e.concat(r)),Q(),null==m||m(e)},[s,Q,m,X]),en=(0,N.useCallback)((e,t)=>{let{data:n,...r}=null!=t?t:{},a={id:(0,w.Ak)(),type:e,data:{...n||{}},position:{x:0,y:0},origin:[0,.5],...r};return H(e=>e.concat(a)),Q(),a.id},[Q]),er=(0,N.useCallback)(e=>{let t=X(e);if(!t||!t.type)return;let{id:n,...r}=t,a=en(t.type,{...r,position:{x:t.position.x+200,y:t.position.y+200},selected:!0});setTimeout(()=>{K(e,{selected:!1}),K(a,{selected:!0})},0)},[en,X,K]),ea=(0,N.useCallback)((e,t)=>{if(!t.isValid){var n,r;let{clientX:a,clientY:l}="changedTouches"in e?e.changedTouches[0]:e,s=null==(n=t.fromNode)?void 0:n.id,i=(null==(r=t.fromHandle)?void 0:r.type)==="source";if(!s)return;let o=en("drop",{position:$({x:a,y:l}),data:{isSource:!i}});B(e=>e.concat({id:(0,w.Ak)(),source:i?s:o,target:i?o:s,type:"temporary"}))}},[en,$]),el=(0,N.useCallback)(e=>{let t=W(),n=U(),r=t.find(t=>t.id===e.target);if(e.source){let n=t.find(t=>t.id===e.source);if(!n||!r)return console.log("❌ INVALID CONNECTION: Source or target not found",{source:null==n?void 0:n.type,target:null==r?void 0:r.type}),!1;if(!((e,t)=>"video"!==e.type&&("audio"!==e.type||"text"===t.type))(n,r))return console.log("❌ INVALID CONNECTION: Invalid source-target pair",{source:n.type,target:r.type,reason:"isValidSourceTarget returned false"}),!1;console.log("✅ VALID CONNECTION CHECK:",{source:{id:n.id,type:n.type},target:{id:r.id,type:r.type}})}let a=function(r){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(l.has(r.id))return!1;for(let s of(l.add(r.id),(0,b.RM)(r,t,n)))if(s.id===e.source||a(s,l))return!0};return!!r&&r.id!==e.source&&!a(r)},[W,U]),es=(0,N.useCallback)(()=>{H(e=>e.filter(e=>"drop"!==e.type)),B(e=>e.filter(e=>"temporary"!==e.type)),Q()},[Q]),ei=(0,N.useCallback)(e=>{if(!(e.target instanceof HTMLElement))return;let{x:t,y:n}=$({x:e.clientX,y:e.clientY});en("drop",{position:{x:t,y:n}})},[en,$]),eo=(0,N.useCallback)(()=>{H(e=>e.map(e=>({...e,selected:!0})))},[]),ed=(0,N.useCallback)(()=>{let e=W().filter(e=>e.selected);e.length>0&&G(e)},[W]),ec=(0,N.useCallback)(()=>{if(0===V.length)return;let e=V.map(e=>({...e,id:(0,w.Ak)(),position:{x:e.position.x+200,y:e.position.y+200},selected:!0}));H(e=>e.map(e=>({...e,selected:!1}))),H(t=>[...t,...e])},[V]),eu=(0,N.useCallback)(()=>{for(let e of W().filter(e=>e.selected))er(e.id)},[W,er]),em=(0,N.useCallback)(e=>{e.target instanceof HTMLElement&&e.target.classList.contains("react-flow__pane")||e.preventDefault()},[]);return(0,A.vC)("meta+a",eo,{enableOnContentEditable:!1,preventDefault:!0}),(0,A.vC)("meta+d",eu,{enableOnContentEditable:!1,preventDefault:!0}),(0,A.vC)("meta+c",ed,{enableOnContentEditable:!1,preventDefault:!0}),(0,A.vC)("meta+v",ec,{enableOnContentEditable:!1,preventDefault:!0}),(0,r.jsx)(x.G,{addNode:en,duplicateNode:er,children:(0,r.jsx)(f,{children:(0,r.jsxs)(L,{children:[(0,r.jsx)(D,{onContextMenu:em,children:(0,r.jsx)("div",{className:"h-full w-full ".concat("pan"===u?"cursor-grab active:cursor-grabbing":"cursor-default"),children:(0,r.jsxs)(c.Gc,{deleteKeyCode:s?null:["Backspace","Delete"],nodes:O,onNodesChange:Z,edges:F,onEdgesChange:ee,onConnectStart:s?void 0:es,onConnect:s?void 0:et,onConnectEnd:s?void 0:ea,nodeTypes:rS,edgeTypes:_,isValidConnection:s?()=>!1:el,connectionLineComponent:C,panOnScroll:"pan"===u,fitView:!0,zoomOnDoubleClick:!1,panOnDrag:"pan"===u,selectionOnDrag:"select"===u&&!s,onDoubleClick:s?void 0:ei,nodesDraggable:"select"===u&&!s,nodesConnectable:"select"===u&&!s,elementsSelectable:"select"===u,...P,children:[(0,r.jsx)(c.VS,{}),(0,r.jsx)(rL,{}),l]})})}),(0,r.jsxs)(R,{children:[(0,r.jsxs)(I,{onClick:ei,children:[(0,r.jsx)(j.A,{size:12}),(0,r.jsx)("span",{children:"Add a new node"})]}),(0,r.jsxs)(I,{onClick:eo,children:[(0,r.jsx)(y.A,{size:12}),(0,r.jsx)("span",{children:"Select all"})]})]})]})})})}},39056:(e,t,n)=>{n.d(t,{R:()=>l}),n(95155);var r=n(12115);let a=(0,r.createContext)({plan:"pro",isSubscribed:!0}),l=()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useSubscription must be used within SubscriptionProvider");return e}},48751:(e,t,n)=>{n.d(t,{G:()=>s,L:()=>i});var r=n(95155),a=n(12115);let l=(0,a.createContext)(void 0),s=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useGateway must be used within GatewayProvider");return e},i=e=>{let{children:t,models:n}=e;return(0,r.jsx)(l.Provider,{value:{textModels:n},children:t})}},51543:(e,t,n)=>{n.d(t,{SQ:()=>o,_2:()=>d,lp:()=>c,mB:()=>u,rI:()=>s,ty:()=>i});var r=n(95155);n(12115);var a=n(56348),l=n(64269);function s(e){let{...t}=e;return(0,r.jsx)(a.bL,{"data-slot":"dropdown-menu",...t})}function i(e){let{...t}=e;return(0,r.jsx)(a.l9,{"data-slot":"dropdown-menu-trigger",...t})}function o(e){let{className:t,sideOffset:n=4,...s}=e;return(0,r.jsx)(a.ZL,{children:(0,r.jsx)(a.UC,{"data-slot":"dropdown-menu-content",sideOffset:n,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function d(e){let{className:t,inset:n,variant:s="default",...i}=e;return(0,r.jsx)(a.q7,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":s,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i})}function c(e){let{className:t,inset:n,...s}=e;return(0,r.jsx)(a.JU,{"data-slot":"dropdown-menu-label","data-inset":n,className:(0,l.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...s})}function u(e){let{className:t,...n}=e;return(0,r.jsx)(a.wv,{"data-slot":"dropdown-menu-separator",className:(0,l.cn)("bg-border -mx-1 my-1 h-px",t),...n})}},59603:(e,t,n)=>{n.d(t,{H2:()=>g,kX:()=>x,sq:()=>h});var r=n(95155),a=n(22539),l=n(12115),s=n(41498),i=n(35299),o=n(5917),d=n(46046),c=n(67168),u=n(30080),m=n(18720);let p=(0,l.createContext)(null),h=e=>{let{children:t}=e,[n,a]=(0,l.useState)("select");return(0,r.jsx)(p.Provider,{value:{mouseMode:n,setMouseMode:a},children:t})},x=()=>{let e=(0,l.useContext)(p);if(!e)throw Error("useMouseMode must be used within MouseModeProvider");return e},g=(0,l.memo)(()=>{let{project:e}=(0,c.By)(),{toObject:t}=(0,a.VH)(),[n,p]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),g=(0,l.useCallback)(async()=>{if((null==e?void 0:e.id)&&!n){p(!0);try{let n=t();await u.k.save(e.id,n),x(!0),m.oR.success("Workspace saved successfully!"),setTimeout(()=>{x(!1)},2e3)}catch(e){console.error("Error saving workspace",e),m.oR.error("Failed to save workspace")}finally{p(!1)}}},[e,t,n]);return(0,r.jsx)(a.H2,{orientation:"horizontal",className:"flex-col! rounded-lg border border-gray-700/50 bg-gray-900/95 p-1 shadow-lg backdrop-blur-sm sm:flex-row! [&_button]:!bg-gray-800/80 [&_button]:!text-white [&_button]:!border-gray-600/50 [&_button]:hover:!bg-gray-700/90 [&_button]:rounded-md [&_button]:m-0.5 [&_svg]:!text-white",showInteractive:!1,children:(0,r.jsx)(s.$,{variant:"ghost",size:"icon",onClick:g,disabled:n,className:"h-8 w-8 rounded-md",title:"Save workspace",children:n?(0,r.jsx)(i.A,{className:"h-4 w-4 animate-spin"}):h?(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(d.A,{className:"h-4 w-4"})})})})},60681:(e,t,n)=>{n.d(t,{$U:()=>f,D5:()=>v,G3:()=>m,Ms:()=>p,Zq:()=>j,ex:()=>g,h5:()=>h,oK:()=>x,x4:()=>b});var r=n(95155),a=n(41498),l=n(65949),s=n(88313),i=n(64269),o=n(23558),d=n(74054),c=n(12115);let u=(0,c.createContext)({data:[],type:"item",value:"",onValueChange:()=>{},open:!1,onOpenChange:()=>{},width:200,setWidth:()=>{}}),m=e=>{let{data:t,type:n,defaultValue:a,value:l,onValueChange:i,defaultOpen:d=!1,open:m,onOpenChange:p,...h}=e,[x,g]=(0,o.i)({defaultProp:null!=a?a:"",prop:l,onChange:i}),[f,v]=(0,o.i)({defaultProp:d,prop:m,onChange:p}),[b,j]=(0,c.useState)(200);return(0,r.jsx)(u.Provider,{value:{type:n,value:x,onValueChange:g,open:f,onOpenChange:v,data:t,width:b,setWidth:j},children:(0,r.jsx)(s.AM,{...h,open:f,onOpenChange:v})})},p=e=>{var t;let{children:n,...l}=e,{value:i,data:o,type:m,setWidth:p}=(0,c.useContext)(u),h=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let e=new ResizeObserver(e=>{for(let t of e){let e=t.target.offsetWidth;e&&(null==p||p(e))}});return h.current&&e.observe(h.current),()=>{e.disconnect()}},[p]),(0,r.jsx)(s.Wv,{asChild:!0,children:(0,r.jsx)(a.$,{variant:"outline",...l,ref:h,children:null!=n?n:(0,r.jsxs)("span",{className:"flex w-full items-center justify-between gap-2",children:[i?null==(t=o.find(e=>e.value===i))?void 0:t.label:"Select ".concat(m,"..."),(0,r.jsx)(d.A,{size:16,className:"shrink-0 text-muted-foreground"})]})})})},h=e=>{let{className:t,popoverOptions:n,...a}=e,{width:o}=(0,c.useContext)(u);return(0,r.jsx)(s.hl,{className:(0,i.cn)("p-0",t),style:{width:o},...n,children:(0,r.jsx)(l.uB,{...a})})},x=e=>{let{type:t}=(0,c.useContext)(u);return(0,r.jsx)(l.G7,{placeholder:"Search ".concat(t,"..."),...e})},g=e=>(0,r.jsx)(l.oI,{...e}),f=e=>{let{children:t,...n}=e,{type:a}=(0,c.useContext)(u);return(0,r.jsx)(l.xL,{...n,children:null!=t?t:"No ".concat(a," found.")})},v=e=>(0,r.jsx)(l.L$,{...e}),b=e=>{let{value:t,onValueChange:n,onOpenChange:a}=(0,c.useContext)(u);return(0,r.jsx)(l.h_,{onSelect:e=>{n(e),a(!1)},...e})},j=e=>(0,r.jsx)(l.fx,{...e})},65949:(e,t,n)=>{n.d(t,{G7:()=>o,L$:()=>u,fx:()=>m,h_:()=>p,oI:()=>d,uB:()=>i,xL:()=>c});var r=n(95155);n(12115);var a=n(41808),l=n(86651),s=n(64269);function i(e){let{className:t,...n}=e;return(0,r.jsx)(a.uB,{"data-slot":"command",className:(0,s.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...n})}function o(e){let{className:t,...n}=e;return(0,r.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,r.jsx)(l.A,{className:"size-4 shrink-0 opacity-50"}),(0,r.jsx)(a.uB.Input,{"data-slot":"command-input",className:(0,s.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...n})]})}function d(e){let{className:t,...n}=e;return(0,r.jsx)(a.uB.List,{"data-slot":"command-list",className:(0,s.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...n})}function c(e){let{...t}=e;return(0,r.jsx)(a.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function u(e){let{className:t,...n}=e;return(0,r.jsx)(a.uB.Group,{"data-slot":"command-group",className:(0,s.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...n})}function m(e){let{className:t,...n}=e;return(0,r.jsx)(a.uB.Separator,{"data-slot":"command-separator",className:(0,s.cn)("bg-border -mx-1 h-px",t),...n})}function p(e){let{className:t,...n}=e;return(0,r.jsx)(a.uB.Item,{"data-slot":"command-item",className:(0,s.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}n(64814)},67168:(e,t,n)=>{n.d(t,{By:()=>s,Np:()=>i});var r=n(95155),a=n(12115);let l=(0,a.createContext)({project:null,updateProject:()=>{},setProject:()=>{}}),s=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useProject must be used within a ProjectProvider");return e},i=e=>{let{children:t,data:n}=e,[s,i]=(0,a.useState)(n);(0,a.useEffect)(()=>{i(n)},[n]);let o=(0,a.useCallback)(e=>{i(t=>({...t,...e,updatedAt:new Date}))},[]),d=(0,a.useCallback)(e=>{i(e)},[]);return(0,r.jsx)(l.Provider,{value:{project:s,updateProject:o,setProject:d},children:t})}},75093:(e,t,n)=>{n.d(t,{Pi:()=>p,mR:()=>u,qq:()=>h});var r=n(95155),a=n(41498),l=n(64269),s=n(21786),i=n(12115),o=n(11636);let d=e=>{let t=["B","KB","MB","GB","TB","PB"],n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;return"".concat(n.toFixed(2)).concat(t[r])},c=(0,i.createContext)(void 0),u=e=>{let{accept:t,maxFiles:n=1,maxSize:s,minSize:i,onDrop:d,onError:u,disabled:m,src:p,className:h,children:x,...g}=e,{getRootProps:f,getInputProps:v,isDragActive:b}=(0,o.VB)({accept:t,maxFiles:n,maxSize:s,minSize:i,onError:u,disabled:m,onDrop:(e,t,n)=>{if(t.length>0){var r,a;let e=null==(a=t.at(0))||null==(r=a.errors.at(0))?void 0:r.message;null==u||u(Error(e));return}null==d||d(e,t,n)},...g});return(0,r.jsx)(c.Provider,{value:{src:p,accept:t,maxSize:s,minSize:i,maxFiles:n},children:(0,r.jsxs)(a.$,{type:"button",disabled:m,variant:"outline",className:(0,l.cn)("relative h-auto w-full flex-col overflow-hidden p-8",b&&"outline-none ring-1 ring-ring",h),...f(),children:[(0,r.jsx)("input",{...v(),disabled:m}),x]})},JSON.stringify(p))},m=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("useDropzoneContext must be used within a Dropzone");return e},p=e=>{let{children:t,className:n}=e,{src:a}=m();return a?t||(0,r.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center",n),children:[(0,r.jsx)("div",{className:"flex size-8 items-center justify-center rounded-md bg-muted text-muted-foreground",children:(0,r.jsx)(s.A,{size:16})}),(0,r.jsx)("p",{className:"my-2 w-full truncate font-medium text-sm",children:a.length>3?"".concat(new Intl.ListFormat("en").format(a.slice(0,3).map(e=>e.name))," and ").concat(a.length-3," more"):new Intl.ListFormat("en").format(a.map(e=>e.name))}),(0,r.jsx)("p",{className:"w-full text-muted-foreground text-xs",children:"Drag and drop or click to replace"})]}):null},h=e=>{let{children:t,className:n}=e,{src:a,accept:i,maxSize:o,minSize:c,maxFiles:u}=m();if(a)return null;if(t)return t;let p="";return i&&(p+="Accepts ",p+=new Intl.ListFormat("en").format(Object.keys(i))),c&&o?p+=" between ".concat(d(c)," and ").concat(d(o)):c?p+=" at least ".concat(d(c)):o&&(p+=" less than ".concat(d(o))),(0,r.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center",n),children:[(0,r.jsx)("div",{className:"flex size-8 items-center justify-center rounded-md bg-muted text-muted-foreground",children:(0,r.jsx)(s.A,{size:16})}),(0,r.jsxs)("p",{className:"my-2 w-full truncate font-medium text-sm",children:["Upload ",1===u?"a file":"files"]}),(0,r.jsx)("p",{className:"w-full truncate text-muted-foreground text-xs",children:"Drag and drop or click to upload"}),p&&(0,r.jsxs)("p",{className:"text-muted-foreground text-xs",children:[p,"."]})]})}},80965:(e,t,n)=>{n.d(t,{H:()=>r});function r(e,t){console.error(e,t)}},81808:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(48800),a=n(42196),l=n(525),s=n(60890);let i=[{id:"text",label:"Text",icon:r.A},{id:"image",label:"Image",icon:a.A},{id:"audio",label:"Audio",icon:l.A},{id:"video",label:"Video",icon:s.A}]},87068:(e,t,n)=>{n.d(t,{G:()=>s,o:()=>i});var r=n(95155),a=n(12115);let l=(0,a.createContext)(void 0);function s(e){let{children:t,addNode:n,duplicateNode:a}=e;return(0,r.jsx)(l.Provider,{value:{addNode:n,duplicateNode:a},children:t})}function i(){let e=(0,a.useContext)(l);if(!e)throw Error("useNodeOperations must be used within NodeOperationsProvider");return e}},88313:(e,t,n)=>{n.d(t,{AM:()=>s,Wv:()=>i,hl:()=>o});var r=n(95155);n(12115);var a=n(31138),l=n(64269);function s(e){let{...t}=e;return(0,r.jsx)(a.bL,{"data-slot":"popover",...t})}function i(e){let{...t}=e;return(0,r.jsx)(a.l9,{"data-slot":"popover-trigger",...t})}function o(e){let{className:t,align:n="center",sideOffset:s=4,...i}=e;return(0,r.jsx)(a.ZL,{children:(0,r.jsx)(a.UC,{"data-slot":"popover-content",align:n,sideOffset:s,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...i})})}}}]);