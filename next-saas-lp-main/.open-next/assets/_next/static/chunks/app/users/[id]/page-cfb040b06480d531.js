(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7845],{16395:(e,t,r)=>{Promise.resolve().then(r.bind(r,75190))},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},20508:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},23664:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},35299:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37586:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},47886:(e,t,r)=>{"use strict";r.d(t,{HW:()=>s,iD:()=>n});let a="http://127.0.0.1:8000";async function s(){try{let e=localStorage.getItem("auth_token");if(!e)return null;let t=await fetch("".concat(a,"/api/auth/me/"),{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}});if(!t.ok)return(401===t.status||403===t.status)&&localStorage.removeItem("auth_token"),null;return await t.json()}catch(e){return console.error("Error fetching current user:",e),null}}async function n(e){try{var t,r;let s=await fetch("".concat(a,"/api/auth/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();return{user:null,error:(null==(t=e.non_field_errors)?void 0:t[0])||e.detail||"Login failed"}}let n=await s.json();return n.token&&(r=n.token,localStorage.setItem("auth_token",r)),{user:n.user||null,error:null}}catch(e){return console.error("Login error:",e),{user:null,error:"An unexpected error occurred"}}}},67161:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(12115);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...n,width:i,height:i,stroke:r,strokeWidth:l?24*Number(o)/Number(i):o,className:s("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...l}=r;return(0,a.createElement)(i,{ref:n,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...l})});return r.displayName="".concat(e),r}},72011:(e,t,r)=>{"use strict";r.d(t,{P:()=>i});let a="http://127.0.0.1:8000";function s(){return localStorage.getItem("auth_token")}class n{async request(e,t){let r=s();if(!r)throw Error("Not authenticated");let n=await fetch("".concat(a).concat(e),{...t,headers:{Authorization:"Token ".concat(r),...null==t?void 0:t.headers}});if(!n.ok){let e=await n.json().catch(()=>({detail:"Request failed"}));throw Error(e.detail||e.error||"Request failed")}return n.json()}async getConversations(e){let t=new URLSearchParams;return e&&"all"!==e&&t.append("type",e),this.request("/chat/api/conversations/".concat(t.toString()?"?".concat(t.toString()):""))}async getConversation(e){return this.request("/chat/api/conversations/".concat(e,"/"))}async getMessages(e){return this.request("/chat/api/conversations/".concat(e,"/messages/"))}async sendMessage(e,t,r){let n=s();if(!n)throw Error("Not authenticated");let i=new FormData;i.append("content",t),r&&i.append("image",r);let o=await fetch("".concat(a,"/chat/api/conversations/").concat(e,"/messages/"),{method:"POST",headers:{Authorization:"Token ".concat(n)},body:i});if(!o.ok)throw Error((await o.json().catch(()=>({detail:"Failed to send message"}))).detail||"Failed to send message");return o.json()}async startConversationWithUser(e){return this.request("/chat/api/start-conversation/user/".concat(e,"/"),{method:"POST"})}async startConversationWithBrand(e){return this.request("/chat/api/start-conversation/brand/".concat(e,"/"),{method:"POST"})}async getConversationStats(){return this.request("/chat/api/conversation-stats/")}createWebSocket(e){let t=s();if(!t)return null;let r="https:"===window.location.protocol?"wss:":"ws:",n=a.replace("http://","").replace("https://","");return new WebSocket("".concat(r,"//").concat(n,"/ws/conversation/").concat(e,"/?token=").concat(t))}}let i=new n},75190:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(95155),s=r(35299),n=r(20508),i=r(35626),o=r(37586),l=r(23664),c=r(67161),d=r(12115),u=r(20063),h=r(91910),m=r(47886),p=r(72011),x=r(18720);function f(){var e;let t=(0,u.useRouter)(),r=(0,u.useParams)().id,[f,g]=(0,d.useState)(null),[w,y]=(0,d.useState)(null),[j,v]=(0,d.useState)(!0),[b,k]=(0,d.useState)(!1);(0,d.useEffect)(()=>{N()},[r]);let N=async()=>{try{if(v(!0),await (0,m.HW)()){let e=await h.i.getCurrentProfile();y(e)}let e=await h.i.getProfile(parseInt(r));console.log("Loaded user profile:",e),console.log("Profile picture URL:",e.profile_picture),g(e)}catch(e){console.error("Error loading user profile:",e),x.oR.error("Failed to load user profile")}finally{v(!1)}},A=async()=>{if(f&&!b)try{k(!0);let e=await p.P.startConversationWithUser(f.id);e.created&&x.oR.success("New conversation started!"),t.push("/dashboard/chat?conversation=".concat(e.conversation.id))}catch(e){console.error("Error starting chat:",e),x.oR.error("Failed to start conversation")}finally{k(!1)}};if(j)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-black",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(s.A,{className:"w-12 h-12 animate-spin text-purple-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-400",children:"Loading profile..."})]})});if(!f)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-black",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.A,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-xl text-gray-400",children:"User not found"}),(0,a.jsx)("button",{onClick:()=>t.back(),className:"mt-4 text-purple-400 hover:text-purple-300",children:"Go back"})]})});let S=(null==w?void 0:w.id)===f.id;return(0,a.jsx)("div",{className:"min-h-screen bg-black text-white p-6",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,a.jsxs)("button",{onClick:()=>t.back(),className:"flex items-center gap-2 text-gray-400 hover:text-white transition",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),"Back"]}),(0,a.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[(0,a.jsxs)("div",{className:"flex-shrink-0",children:[f.profile_picture&&""!==f.profile_picture.trim()?(0,a.jsx)("img",{src:f.profile_picture,alt:f.username,className:"w-32 h-32 rounded-full object-cover",onError:e=>{console.error("Failed to load profile image:",f.profile_picture),e.currentTarget.style.display="none",e.currentTarget.nextElementSibling&&(e.currentTarget.nextElementSibling.style.display="flex")}}):null,(0,a.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-4xl font-bold text-white",style:{display:f.profile_picture&&""!==f.profile_picture.trim()?"none":"flex"},children:(null==(e=f.first_name)?void 0:e[0])||f.username[0]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:f.first_name&&f.last_name?"".concat(f.first_name," ").concat(f.last_name):f.username}),(0,a.jsxs)("p",{className:"text-gray-400",children:["@",f.username]})]}),!S&&w&&(0,a.jsx)("button",{onClick:A,disabled:b,className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition disabled:opacity-50",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.A,{className:"w-5 h-5 animate-spin"}),"Starting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),"Send Message"]})})]}),(0,a.jsxs)("div",{className:"flex gap-6 mb-6",children:[void 0!==f.impressions_count&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:f.impressions_count.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Profile Views"})]}),f.age&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:f.age}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Years Old"})]})]}),f.bio&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"About"}),(0,a.jsx)("p",{className:"text-white whitespace-pre-wrap",children:f.bio})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(l.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:f.email})]}),f.instagram_handle&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("a",{href:"https://instagram.com/".concat(f.instagram_handle.replace("@","")),target:"_blank",rel:"noopener noreferrer",className:"hover:text-purple-400 transition",children:f.instagram_handle})]})]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Activity"}),(0,a.jsx)("div",{className:"space-y-3 text-gray-400",children:(0,a.jsxs)("p",{className:"text-sm",children:["Member since"," ",f.created_at?new Date(f.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"N/A"]})})]}),(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Skills & Interests"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{className:"bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-sm",children:"Content Creator"}),(0,a.jsx)("span",{className:"bg-pink-500/20 text-pink-400 px-3 py-1 rounded-full text-sm",children:"Social Media"}),(0,a.jsx)("span",{className:"bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-sm",children:"Marketing"})]})]})]})]})})}},91910:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});let a="http://127.0.0.1:8000";function s(){return localStorage.getItem("auth_token")}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s();console.log("[fetchWithAuth] Token:",r?"present":"missing"),console.log("[fetchWithAuth] URL:",e);let a={"Content-Type":"application/json",...r&&{Authorization:"Token ".concat(r)},...t.headers};return console.log("[fetchWithAuth] Headers:",a),await fetch(e,{...t,headers:a})}let i={async getCurrentProfile(){let e=await n("".concat(a,"/api/users/profile/"));if(!e.ok)throw Error((await e.json().catch(()=>({detail:"Failed to get profile"}))).detail||"Failed to get profile");return await e.json()},async getProfile(e){let t=await fetch("".concat(a,"/api/users/").concat(e,"/profile/"));if(!t.ok)throw Error((await t.json().catch(()=>({detail:"User not found"}))).detail||"User not found");return await t.json()},async updateProfile(e){let t=await n("".concat(a,"/api/users/profile/"),{method:"PATCH",body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to update profile"}))).detail||"Failed to update profile");return await t.json()},async uploadProfilePicture(e){let t=s(),r=new FormData;r.append("image",e),r.append("purpose","other");let n=await fetch("".concat(a,"/api/users/upload-image/"),{method:"POST",headers:{...t&&{Authorization:"Token ".concat(t)}},body:r});if(!n.ok)throw Error((await n.json().catch(()=>({error:"Failed to upload image"}))).error||"Failed to upload image");return{url:(await n.json()).url}}}}},e=>{e.O(0,[8720,8441,1255,7358],()=>e(e.s=16395)),_N_E=e.O()}]);