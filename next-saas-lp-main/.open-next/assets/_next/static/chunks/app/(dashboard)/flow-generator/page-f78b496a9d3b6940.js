(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9171],{10308:(e,r,s)=>{"use strict";s.d(r,{J:()=>t});var a=s(12115),l=s(47886);function t(){let[e,r]=(0,a.useState)(null),[s,t]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{!async function(){try{let e=await (0,l.HW)();if(e){let s=[e.first_name,e.last_name].filter(Boolean).join(" ");r({id:e.id.toString(),email:e.email,name:s||e.username,username:e.username,first_name:e.first_name,last_name:e.last_name})}}catch(e){console.error("Error fetching user:",e)}finally{t(!1)}}()},[]),e}},34741:(e,r,s)=>{Promise.resolve().then(s.bind(s,89797))},39068:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(71847).A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},47886:(e,r,s)=>{"use strict";s.d(r,{HW:()=>l,iD:()=>t});let a="http://127.0.0.1:8000";async function l(){try{let e=localStorage.getItem("auth_token");if(!e)return null;let r=await fetch("".concat(a,"/api/auth/me/"),{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}});if(!r.ok)return(401===r.status||403===r.status)&&localStorage.removeItem("auth_token"),null;return await r.json()}catch(e){return console.error("Error fetching current user:",e),null}}async function t(e){try{var r,s;let l=await fetch("".concat(a,"/api/auth/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok){let e=await l.json();return{user:null,error:(null==(r=e.non_field_errors)?void 0:r[0])||e.detail||"Login failed"}}let t=await l.json();return t.token&&(s=t.token,localStorage.setItem("auth_token",s)),{user:t.user||null,error:null}}catch(e){return console.error("Login error:",e),{user:null,error:"An unexpected error occurred"}}}},89797:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>el});var a=s(95155),l=s(34616),t=s(67168),i=s(48751),n=s(22539),o=s(59603),c=s(81808),d=s(87068),u=s(12115),m=s(41498),h=s(28611);let p=(0,u.memo)(()=>{let{getViewport:e}=(0,n.VH)(),{addNode:r}=(0,d.o)();return(0,a.jsx)(n.Zk,{position:"bottom-center",className:"m-4 flex items-center rounded-full border bg-card/90 p-1 drop-shadow-xs backdrop-blur-sm",children:c.o.map(s=>(0,a.jsxs)(h.m_,{children:[(0,a.jsx)(h.k$,{asChild:!0,children:(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"rounded-full",onClick:()=>((s,a)=>{let l=e(),t=-l.x/l.zoom+window.innerWidth/2/l.zoom,i=-l.y/l.zoom+window.innerHeight/2/l.zoom,{data:n,...o}=null!=a?a:{};r(s,{position:{x:t,y:i},data:{...n||{}},...o})})(s.id,s.data),children:(0,a.jsx)(s.icon,{size:12})})}),(0,a.jsx)(h.ZI,{children:s.label})]},s.id))})});var x=s(52619),f=s.n(x),g=s(71847);let j=(0,g.A)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),b=()=>(0,a.jsxs)("div",{className:"flex shrink-0 items-center gap-2 px-2 text-muted-foreground",children:[(0,a.jsx)(j,{size:16}),(0,a.jsx)("span",{className:"text-nowrap text-sm",children:"Credits: ∞"})]});var w=s(51543),v=s(10308),y=s(39056),k=s(35299);let N=(0,g.A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var C=s(20063),S=s(64814),A=s(80965),z=s(47886),P=s(15239),_=s(18720),R=s(5834),W=s(75093);s(47650);var E=s(32467),F=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let s=(0,E.TL)(`Primitive.${r}`),l=u.forwardRef((e,l)=>{let{asChild:t,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(t?s:r,{...i,ref:l})});return l.displayName=`Primitive.${r}`,{...e,[r]:l}},{}),M=u.forwardRef((e,r)=>(0,a.jsx)(F.label,{...e,ref:r,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));M.displayName="Label";var O=s(64269);function L(e){let{className:r,...s}=e;return(0,a.jsx)(M,{"data-slot":"label",className:(0,O.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...s})}let D=e=>{let{open:r,setOpen:s}=e,[l,t]=(0,u.useState)(""),[i,n]=(0,u.useState)(""),[o,c]=(0,u.useState)(""),[d,h]=(0,u.useState)(!1),[p,x]=(0,u.useState)("");(0,u.useEffect)(()=>{(async()=>{let e=await (0,z.HW)();e&&(e.first_name?t("".concat(e.first_name," ").concat(e.last_name||"").trim()):e.username&&t(e.username),e.email&&n(e.email))})()},[]);let f=async e=>{if(e.preventDefault(),l.trim()&&i.trim()&&!d){h(!0);try{_.oR.info("Profile update feature coming soon"),s(!1)}catch(e){(0,A.H)("Error updating profile",e)}finally{h(!1)}}},g=async e=>{if(!d)try{if(!e.length)throw Error("No file selected");h(!0),_.oR.info("Avatar upload feature coming soon")}catch(e){(0,A.H)("Error updating avatar",e)}finally{h(!1)}};return(0,a.jsx)(S.lG,{open:r,onOpenChange:s,modal:!1,children:(0,a.jsxs)(S.Cf,{children:[(0,a.jsxs)(S.c7,{children:[(0,a.jsx)(S.L3,{children:"Profile"}),(0,a.jsx)(S.rr,{children:"Update your profile information."})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"avatar",children:"Avatar"}),(0,a.jsxs)(W.mR,{maxSize:0xa00000,minSize:1024,maxFiles:1,multiple:!1,accept:{"image/*":[]},onDrop:g,src:o?[new File([],o)]:[],onError:console.error,className:"relative aspect-square h-36 w-auto",children:[(0,a.jsx)(W.qq,{}),(0,a.jsxs)(W.Pi,{children:[o&&(0,a.jsx)(P.default,{src:o,alt:"Image preview",className:"absolute top-0 left-0 h-full w-full object-cover",unoptimized:!0,width:100,height:100}),d&&(0,a.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center",children:(0,a.jsx)(k.A,{size:24,className:"animate-spin"})})]})]})]}),(0,a.jsxs)("form",{onSubmit:f,className:"mt-2 grid gap-4","aria-disabled":d,children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"name",children:"Name"}),(0,a.jsx)(R.p,{id:"name",placeholder:"Jane Doe",value:l,onChange:e=>{let{target:r}=e;return t(r.value)},className:"text-foreground"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"email",children:"Email"}),(0,a.jsx)(R.p,{id:"email",placeholder:"jane@doe.com",value:i,type:"email",onChange:e=>{let{target:r}=e;return n(r.value)},className:"text-foreground"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"password",children:"Password"}),(0,a.jsx)(R.p,{id:"password",placeholder:"••••••••",value:p,type:"password",onChange:e=>{let{target:r}=e;return x(r.value)},className:"text-foreground"})]}),(0,a.jsx)(m.$,{type:"submit",disabled:d||!l.trim()||!i.trim(),children:"Update"})]})]})})};var I=s(48493);let $=()=>{var e,r;let[s,l]=(0,u.useState)(!1),[t,i]=(0,u.useState)(!1),n=(0,C.useRouter)(),o=(0,v.J)(),{isSubscribed:c}=(0,y.R)(),d=async()=>{await ({signOut:async()=>({error:null}),getSession:async()=>({data:{session:null},error:null}),signInWithOAuth:async()=>({data:null,error:null})}).signOut(),n.push("/login")};if(!o)return(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"rounded-full",disabled:!0,children:(0,a.jsx)(k.A,{className:"animate-spin",size:16})});let h=null!=(r=null!=(e=o.name)?e:o.email)?r:o.id,p=o.avatar,x=null==h?void 0:h.split(" ").map(e=>e.at(0)).join("").toUpperCase();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(w.rI,{open:s,onOpenChange:l,children:[(0,a.jsx)(w.ty,{asChild:!0,children:(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,a.jsxs)(I.eu,{children:[(0,a.jsx)(I.BK,{src:p}),(0,a.jsx)(I.q5,{className:"bg-primary text-primary-foreground uppercase",children:x})]})})}),(0,a.jsxs)(w.SQ,{side:"bottom",align:"end",collisionPadding:8,sideOffset:16,className:"w-52",children:[(0,a.jsxs)(w.lp,{children:[(0,a.jsxs)(I.eu,{children:[(0,a.jsx)(I.BK,{src:p}),(0,a.jsx)(I.q5,{className:"bg-primary text-primary-foreground uppercase",children:x})]}),(0,a.jsx)("p",{className:"mt-2 truncate",children:h}),o.name&&o.email&&(0,a.jsx)("p",{className:"truncate font-normal text-muted-foreground text-xs",children:o.email})]}),(0,a.jsx)(w.mB,{}),(0,a.jsx)(w._2,{onClick:e=>{e.preventDefault(),l(!1),setTimeout(()=>{i(!0)},200)},children:"Profile"}),c&&(0,a.jsx)(w._2,{asChild:!0,className:"justify-between",children:(0,a.jsxs)("a",{href:"/api/portal",target:"_blank",rel:"noopener noreferrer",children:["Billing"," ",(0,a.jsx)(N,{size:16,className:"text-muted-foreground"})]})}),(0,a.jsx)(w._2,{asChild:!0,children:(0,a.jsxs)(f(),{href:"/pricing",className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Upgrade"}),(0,a.jsx)(N,{size:16,className:"text-muted-foreground"})]})}),(0,a.jsx)(w.mB,{}),(0,a.jsx)(w._2,{asChild:!0,children:(0,a.jsxs)("a",{href:"https://github.com/haydenbleasel/tersa",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Send feedback"}),(0,a.jsx)(N,{size:16,className:"text-muted-foreground"})]})}),(0,a.jsx)(w._2,{onClick:d,children:"Logout"})]})]}),(0,a.jsx)(D,{open:t,setOpen:i})]})};var U=s(13652),H=s(39068),T=s(99708),q=s(21786),G=s(60890),B=s(65229),J=s(30080);function K(e){let{workspace:r,onPublish:s}=e,[l,t]=(0,u.useState)(!1),[i,n]=(0,u.useState)(r.description||""),[o,c]=(0,u.useState)([]),[d,h]=(0,u.useState)([]),[p,x]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),j=(0,u.useCallback)(e=>{let r=Array.from(e.target.files||[]),s=r.filter(e=>e.type.startsWith("image/")||e.type.startsWith("video/"));s.length!==r.length&&_.oR.error("Only image and video files are allowed"),c(e=>[...e,...s]),s.forEach(e=>{let r=new FileReader;r.onload=e=>{h(r=>{var s;return[...r,null==(s=e.target)?void 0:s.result]})},r.readAsDataURL(e)})},[]),b=(0,u.useCallback)(e=>{c(r=>r.filter((r,s)=>s!==e)),h(r=>r.filter((r,s)=>s!==e))},[]),w=(0,u.useCallback)(async()=>{try{if(x(!0),await J.k.publish(r.id,i),_.oR.success("Workspace published!"),o.length>0){for(let e of(g(!0),o)){let s=e.type.startsWith("image/")?"image":"video";await J.k.uploadMedia(r.id,e,s,e.name)}_.oR.success("".concat(o.length," media file(s) uploaded!"))}if(s){let e=await J.k.get(r.id);s(e)}t(!1),c([]),h([])}catch(e){console.error("Error publishing:",e),_.oR.error(e instanceof Error?e.message:"Failed to publish workspace")}finally{x(!1),g(!1)}},[r.id,i,o,s]),v=(0,u.useCallback)(async()=>{try{x(!0);let e=await J.k.unpublish(r.id);_.oR.success("Workspace unpublished"),s&&s(e),t(!1)}catch(e){console.error("Error unpublishing:",e),_.oR.error(e instanceof Error?e.message:"Failed to unpublish workspace")}finally{x(!1)}},[r.id,s]);return(0,a.jsxs)(S.lG,{open:l,onOpenChange:t,children:[(0,a.jsx)(S.zM,{asChild:!0,children:(0,a.jsx)(m.$,{variant:r.isPublic?"outline":"default",size:"sm",className:"gap-2",children:r.isPublic?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),"Published"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:"h-4 w-4"}),"Publish"]})})}),(0,a.jsxs)(S.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(S.c7,{children:[(0,a.jsx)(S.L3,{children:r.isPublic?"Manage Published Workspace":"Publish Workspace"}),(0,a.jsx)(S.rr,{children:r.isPublic?"Your workspace is publicly accessible. You can update details or unpublish it.":"Make this workspace publicly accessible. Add AI-generated images/videos to showcase your work."})]}),r.isPublic&&(0,a.jsxs)("div",{className:"rounded-lg bg-green-500/10 border border-green-500/20 p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-green-500",children:[(0,a.jsx)(H.A,{className:"h-4 w-4 inline mr-2"}),"Live at: ",(0,a.jsxs)("a",{href:"/flow-generator/".concat(r.slug),target:"_blank",className:"underline font-mono",children:["/flow-generator/",r.slug]})]}),r.viewCount>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[r.viewCount," views \xb7 ",r.cloneCount," imports"]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L,{htmlFor:"description",children:"Description"}),(0,a.jsx)(U.T,{id:"description",placeholder:"Describe what this workflow does...",value:i,onChange:e=>n(e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L,{children:"Media (Images/Videos)"}),(0,a.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4",children:[(0,a.jsx)("input",{type:"file",id:"media-upload",multiple:!0,accept:"image/*,video/*",onChange:j,className:"hidden"}),(0,a.jsxs)("label",{htmlFor:"media-upload",className:"flex flex-col items-center justify-center cursor-pointer",children:[(0,a.jsx)(q.A,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to upload images or videos"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"AI-generated content from your workflow"})]})]}),d.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-4",children:d.map((e,r)=>(0,a.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden border",children:[o[r].type.startsWith("image/")?(0,a.jsx)("img",{src:e,alt:"Preview ".concat(r+1),className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,a.jsx)(G.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsx)("button",{onClick:()=>b(r),className:"absolute top-1 right-1 p-1 bg-black/50 rounded-full hover:bg-black/70",children:(0,a.jsx)(B.A,{className:"h-4 w-4 text-white"})})]},r))}),r.media&&r.media.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Existing Media"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:r.media.map(e=>(0,a.jsx)("div",{className:"relative aspect-square rounded-lg overflow-hidden border",children:"image"===e.mediaType?(0,a.jsx)("img",{src:e.fileUrl,alt:e.title,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,a.jsx)(G.A,{className:"h-8 w-8 text-muted-foreground"})})},e.id))})]})]})]}),(0,a.jsx)(S.Es,{children:r.isPublic?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.$,{variant:"destructive",onClick:v,disabled:p,children:"Unpublish"}),(0,a.jsx)(m.$,{onClick:w,disabled:p||f,children:f?"Uploading...":p?"Saving...":"Update"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.$,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,a.jsx)(m.$,{onClick:w,disabled:p||f,children:f?"Uploading...":p?"Publishing...":"Publish"})]})})]})]})}let V=e=>{let{onWorkspaceUpdate:r}=e,{project:s,setProject:l}=(0,t.By)(),i=(0,v.J)();return i&&s?(0,a.jsxs)("div",{className:"absolute top-16 right-0 left-0 z-[50] m-4 flex items-center gap-2 sm:top-0 sm:left-auto",children:[i.id&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center rounded-full border bg-card/90 px-2 py-1 drop-shadow-xs backdrop-blur-sm",children:(0,a.jsx)(K,{workspace:s,onPublish:e=>{l(e),r&&r(e)}})}),(0,a.jsx)("div",{className:"flex items-center rounded-full border bg-card/90 p-3 drop-shadow-xs backdrop-blur-sm",children:(0,a.jsx)(u.Suspense,{fallback:(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Loading..."}),children:(0,a.jsx)(b,{})})})]}),!i.id&&(0,a.jsx)("div",{className:"flex items-center rounded-full border bg-card/90 p-0.5 drop-shadow-xs backdrop-blur-sm",children:(0,a.jsx)(m.$,{className:"rounded-full",size:"lg",asChild:!0,children:(0,a.jsx)(f(),{href:"/pricing",children:"Claim your free AI credits"})})}),(0,a.jsx)("div",{className:"flex items-center rounded-full border bg-card/90 p-1 drop-shadow-xs backdrop-blur-sm",children:(0,a.jsx)($,{})})]}):null};var Z=s(60681),Y=s(93736),Q=s(5917);let X=(0,g.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var ee=s(37135),er=s(6191);let es=e=>{var r;let{workspaces:s,currentWorkspace:l,onWorkspaceChange:t}=e,[i,n]=(0,u.useState)(!1),[o,c]=(0,u.useState)(l),[d,h]=(0,u.useState)(""),[p,x]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),[j,b]=(0,u.useState)(!1),[w,y]=(0,u.useState)(null),k=(0,C.useRouter)(),N=(0,v.J)(),z=(0,u.useMemo)(()=>new Y.A(s,{keys:["name"],minMatchCharLength:1,threshold:.3}),[s]),P=(0,u.useCallback)(async e=>{if(e.preventDefault(),!p){x(!0);try{let e=await J.k.create(d.trim());n(!1),g(!1),h(""),_.oR.success("Workspace created successfully!"),t&&t(e.id)}catch(e){(0,A.H)("Error creating workspace",e),_.oR.error("Failed to create workspace")}finally{x(!1)}}},[p,d,N,t]),W=(0,u.useCallback)(async e=>{if(e.preventDefault(),w&&!p){x(!0);try{await J.k.rename(w,d.trim()),b(!1),y(null),h(""),_.oR.success("Workspace renamed successfully!"),k.refresh()}catch(e){(0,A.H)("Error renaming workspace",e),_.oR.error("Failed to rename workspace")}finally{x(!1)}}},[w,d,p,k]),E=(0,u.useCallback)(async e=>{if(confirm("Are you sure you want to delete this workspace?"))try{if(await J.k.delete(e),_.oR.success("Workspace deleted successfully!"),e===l&&s.length>1){let r=s.find(r=>r.id!==e);r&&t&&t(r.id)}k.refresh()}catch(e){var r,a;(null==(r=e.message)?void 0:r.includes("not found"))||(null==(a=e.message)?void 0:a.includes("404"))?(_.oR.info("Workspace already deleted"),k.refresh()):((0,A.H)("Error deleting workspace",e),_.oR.error("Failed to delete workspace"))}},[l,s,t,k]),F=(0,u.useCallback)(e=>{if("new"===e)return void g(!0);if(e.startsWith("rename-")){let r=e.replace("rename-",""),a=s.find(e=>e.id===r);a&&(y(r),h(a.name),b(!0));return}if(e.startsWith("delete-"))return void E(e.replace("delete-",""));c(e),n(!1),t&&t(e)},[s,t,E]),M=(0,u.useMemo)(()=>N?[{label:"My Workspaces",data:s.filter(e=>e.userId===N.id)},{label:"Other Workspaces",data:s.filter(e=>e.userId!==N.id)}]:[],[s,N]),L=(0,u.useCallback)((e,r)=>+!!z.search(r).find(r=>r.item.id===e),[z]),D=(null==(r=s.find(e=>e.id===o))?void 0:r.name)||"Select workspace";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Z.G3,{open:i,onOpenChange:n,data:s.map(e=>({label:e.name,value:e.id})),type:"workspace",value:o,onValueChange:F,children:[(0,a.jsx)(Z.Ms,{className:"w-[280px] rounded-full border-none bg-transparent shadow-none",children:D}),(0,a.jsxs)(Z.h5,{filter:L,className:"p-0 w-[320px]",popoverOptions:{sideOffset:8},children:[(0,a.jsx)(Z.oK,{placeholder:"Search workspaces..."}),(0,a.jsxs)(Z.ex,{children:[(0,a.jsx)(Z.$U,{}),M.filter(e=>e.data.length>0).map(e=>(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(Z.D5,{heading:e.label,children:e.data.map(e=>(0,a.jsxs)(Z.x4,{value:e.id,className:"group flex items-center justify-between pr-2",children:[(0,a.jsxs)("span",{className:"flex items-center flex-1 min-w-0",children:[e.name,(0,a.jsx)(Q.A,{className:(0,O.cn)("ml-2 flex-shrink-0",o===e.id?"opacity-100":"opacity-0")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:r=>{r.stopPropagation(),y(e.id),h(e.name),b(!0),n(!1)},className:"p-1 hover:bg-accent rounded",title:"Rename workspace",children:(0,a.jsx)(X,{size:14})}),(0,a.jsx)("button",{onClick:r=>{r.stopPropagation(),E(e.id),n(!1)},className:"p-1 hover:bg-destructive/10 hover:text-destructive rounded",title:"Delete workspace",children:(0,a.jsx)(ee.A,{size:14})})]})]},e.id))}),(0,a.jsx)(Z.Zq,{})]},e.label)),(0,a.jsx)(Z.D5,{children:(0,a.jsxs)(Z.x4,{value:"new",children:[(0,a.jsx)(er.A,{size:16}),"Create new workspace"]})})]})]})]}),(0,a.jsx)(S.lG,{open:f,onOpenChange:g,modal:!1,children:(0,a.jsx)(S.Cf,{children:(0,a.jsxs)(S.c7,{children:[(0,a.jsx)(S.L3,{children:"Create new workspace"}),(0,a.jsx)(S.rr,{children:"What would you like to call your new workspace?"}),(0,a.jsxs)("form",{onSubmit:P,className:"mt-2 flex items-center gap-2","aria-disabled":p,children:[(0,a.jsx)(R.p,{placeholder:"My new workspace",value:d,onChange:e=>{let{target:r}=e;return h(r.value)},autoFocus:!0}),(0,a.jsx)(m.$,{type:"submit",disabled:p||!d.trim(),children:"Create"})]})]})})}),(0,a.jsx)(S.lG,{open:j,onOpenChange:b,modal:!1,children:(0,a.jsx)(S.Cf,{children:(0,a.jsxs)(S.c7,{children:[(0,a.jsx)(S.L3,{children:"Rename workspace"}),(0,a.jsx)(S.rr,{children:"Enter a new name for this workspace"}),(0,a.jsxs)("form",{onSubmit:W,className:"mt-2 flex items-center gap-2","aria-disabled":p,children:[(0,a.jsx)(R.p,{placeholder:"Workspace name",value:d,onChange:e=>{let{target:r}=e;return h(r.value)},autoFocus:!0}),(0,a.jsx)(m.$,{type:"submit",disabled:p||!d.trim(),children:"Rename"})]})]})})})]})};s(8301);let ea={"gpt-4o":{id:"gpt-4o",label:"GPT-4o",provider:"openai",priceIndicator:"high"},"gpt-4o-mini":{id:"gpt-4o-mini",label:"GPT-4o Mini",provider:"openai",priceIndicator:"lowest"},"claude-3-5-sonnet":{id:"claude-3-5-sonnet",label:"Claude 3.5 Sonnet",provider:"anthropic",priceIndicator:"high"}};function el(e){let[r,s]=(0,u.useState)([]),[c,d]=(0,u.useState)(null),[m,h]=(0,u.useState)(!0);(0,u.useEffect)(()=>{(async()=>{try{let e=await J.k.list();if(e.length>0)s(e),d(e[0]);else{let e=await J.k.create("My First Workspace");s([e]),d(e)}}catch(e){console.error("Error loading workspaces:",e)}finally{h(!1)}})()},[]);let x=async e=>{try{let r=await J.k.get(e);d(r),window.history.pushState(null,"","/flow-generator/".concat(r.slug));let a=await J.k.list();s(a)}catch(e){console.error("Error changing workspace:",e)}};return m||!c?(0,a.jsx)("div",{className:"h-[calc(100vh-6rem)] w-full rounded-2xl overflow-hidden border border-white/10 bg-black flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading workspace..."})}):(0,a.jsx)("div",{className:"h-[calc(100vh-6rem)] w-full overflow-hidden bg-black rounded-2xl border border-white/10",children:(0,a.jsx)(t.Np,{data:c,children:(0,a.jsx)(i.L,{models:ea,children:(0,a.jsx)(n.Ln,{children:(0,a.jsx)(o.sq,{children:(0,a.jsxs)(l.H,{readOnly:readOnly,children:[(0,a.jsx)(o.H2,{}),!readOnly&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 z-[50] flex items-center gap-2",children:(0,a.jsx)("div",{className:"flex items-center rounded-full border bg-card/90 p-1 drop-shadow-xs backdrop-blur-sm",children:(0,a.jsx)(es,{workspaces:r,currentWorkspace:c.id,onWorkspaceChange:x})})}),(0,a.jsx)(V,{onWorkspaceUpdate:e=>{d(e),s(r=>r.map(r=>r.id===e.id?e:r))}}),(0,a.jsx)(p,{})]})]})})})})})})}}},e=>{e.O(0,[6597,8803,3862,5004,277,297,8720,5239,9335,873,5983,2966,8361,7880,4616,8441,1255,7358],()=>e(e.s=34741)),_N_E=e.O()}]);