(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2791],{20508:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},35299:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},36258:(e,t,a)=>{Promise.resolve().then(a.bind(a,68972))},67161:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},68972:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(95155),l=a(12115),s=a(35299),i=a(20508),n=a(95664),o=a(67161),d=a(91910),c=a(18720);function u(){var e,t;let[a,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0),[p,x]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),b=(0,l.useRef)(null),[y,j]=(0,l.useState)({first_name:"",last_name:"",bio:"",instagram_handle:"",age:""});(0,l.useEffect)(()=>{w()},[]);let w=async()=>{try{var e;h(!0);let t=await d.i.getCurrentProfile();u(t),j({first_name:t.first_name||"",last_name:t.last_name||"",bio:t.bio||"",instagram_handle:t.instagram_handle||"",age:(null==(e=t.age)?void 0:e.toString())||""})}catch(e){console.error("Error loading profile:",e),c.oR.error("Failed to load profile")}finally{h(!1)}},v=async e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){if(!a.type.startsWith("image/"))return void c.oR.error("Please select an image file");if(a.size>2097152)return void c.oR.error("Image must be less than 2MB");try{g(!0);let{url:e}=await d.i.uploadProfilePicture(a),t=await d.i.updateProfile({profile_picture_url:e});u(t),c.oR.success("Profile picture updated!")}catch(e){console.error("Error uploading image:",e),c.oR.error("Failed to upload image")}finally{g(!1)}}},N=async e=>{e.preventDefault();try{x(!0);let e=await d.i.updateProfile({first_name:y.first_name,last_name:y.last_name,bio:y.bio,instagram_handle:y.instagram_handle,age:y.age?parseInt(y.age):void 0});u(e),c.oR.success("Profile updated successfully!")}catch(e){console.error("Error updating profile:",e),c.oR.error("Failed to update profile")}finally{x(!1)}};return m?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(s.A,{className:"w-12 h-12 animate-spin text-purple-500"})}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Settings"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage your account settings and preferences"})]}),(0,r.jsxs)("div",{className:"bg-[#121212] border border-white/10 rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-white/5",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-purple-400",children:[(0,r.jsx)(i.A,{className:"w-5 h-5"}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Profile"})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Profile Information"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Update your profile information and photo"}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(null==a?void 0:a.profile_picture)?(0,r.jsx)("img",{src:a.profile_picture,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-3xl font-bold",children:(null==a||null==(e=a.first_name)?void 0:e[0])||(null==a||null==(t=a.username)?void 0:t[0])||"U"}),f&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:(0,r.jsx)(s.A,{className:"w-6 h-6 text-white animate-spin"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{ref:b,type:"file",accept:"image/*",onChange:v,className:"hidden"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{var e;return null==(e=b.current)?void 0:e.click()},disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition disabled:opacity-50",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"Change Photo"]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"JPG, PNG or GIF. Max 2MB."})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),(0,r.jsx)("input",{type:"text",value:y.first_name,onChange:e=>j({...y,first_name:e.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"Shybham"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),(0,r.jsx)("input",{type:"text",value:y.last_name,onChange:e=>j({...y,last_name:e.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"Sharma"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),(0,r.jsx)("textarea",{value:y.bio,onChange:e=>j({...y,bio:e.target.value}),rows:4,className:"w-full px-4 py-2 bg-[#1a1a1a] border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"njknb"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instagram Handle"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:y.instagram_handle,onChange:e=>j({...y,instagram_handle:e.target.value}),className:"w-full pl-10 pr-4 py-2 bg-[#1a1a1a] border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"@_shubham.xx"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),(0,r.jsx)("input",{type:"number",value:y.age,onChange:e=>j({...y,age:e.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"20"})]}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition disabled:opacity-50 flex items-center gap-2",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})})]})})]}),(0,r.jsxs)("div",{className:"bg-[#121212] border border-white/10 rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-white/5",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Account"})}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",value:(null==a?void 0:a.email)||"",disabled:!0,className:"w-full px-4 py-2 bg-[#1a1a1a] border border-white/10 rounded-lg text-gray-400"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Username"}),(0,r.jsx)("input",{type:"text",value:(null==a?void 0:a.username)||"",disabled:!0,className:"w-full px-4 py-2 bg-[#1a1a1a] border border-white/10 rounded-lg text-gray-400"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Username cannot be changed"})]})]})]})]})}},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(12115);let l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...s,width:i,height:i,stroke:a,strokeWidth:o?24*Number(n)/Number(i):n,className:l("lucide",d),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let a=(0,r.forwardRef)((a,s)=>{let{className:n,...o}=a;return(0,r.createElement)(i,{ref:s,iconNode:t,className:l("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...o})});return a.displayName="".concat(e),a}},91910:(e,t,a)=>{"use strict";a.d(t,{i:()=>i});let r="http://127.0.0.1:8000";function l(){return localStorage.getItem("auth_token")}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=l();console.log("[fetchWithAuth] Token:",a?"present":"missing"),console.log("[fetchWithAuth] URL:",e);let r={"Content-Type":"application/json",...a&&{Authorization:"Token ".concat(a)},...t.headers};return console.log("[fetchWithAuth] Headers:",r),await fetch(e,{...t,headers:r})}let i={async getCurrentProfile(){let e=await s("".concat(r,"/api/users/profile/"));if(!e.ok)throw Error((await e.json().catch(()=>({detail:"Failed to get profile"}))).detail||"Failed to get profile");return await e.json()},async getProfile(e){let t=await fetch("".concat(r,"/api/users/").concat(e,"/profile/"));if(!t.ok)throw Error((await t.json().catch(()=>({detail:"User not found"}))).detail||"User not found");return await t.json()},async updateProfile(e){let t=await s("".concat(r,"/api/users/profile/"),{method:"PATCH",body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to update profile"}))).detail||"Failed to update profile");return await t.json()},async uploadProfilePicture(e){let t=l(),a=new FormData;a.append("image",e),a.append("purpose","other");let s=await fetch("".concat(r,"/api/users/upload-image/"),{method:"POST",headers:{...t&&{Authorization:"Token ".concat(t)}},body:a});if(!s.ok)throw Error((await s.json().catch(()=>({error:"Failed to upload image"}))).error||"Failed to upload image");return{url:(await s.json()).url}}}},95664:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])}},e=>{e.O(0,[8720,8441,1255,7358],()=>e(e.s=36258)),_N_E=e.O()}]);