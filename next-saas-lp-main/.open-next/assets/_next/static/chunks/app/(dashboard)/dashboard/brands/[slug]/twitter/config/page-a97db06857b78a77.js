(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6763],{6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},15870:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},18085:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},35626:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},42529:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},59880:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(95155),r=s(35626),n=s(97378),o=s(71847);let i=(0,o.A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);var l=s(89559);let c=(0,o.A)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var d=s(42529),h=s(6132);let u=(0,o.A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var m=s(15870),p=s(18085),x=s(52619),g=s.n(x),f=s(12115),b=s(18720);function w(){return localStorage.getItem("auth_token")}function y(e){let{params:t}=e,{slug:s}=(0,f.use)(t),[o,x]=(0,f.useState)(null),[y,j]=(0,f.useState)(null),[k,v]=(0,f.useState)(!0),[N,_]=(0,f.useState)(!1),[T,A]=(0,f.useState)(!1),[C,S]=(0,f.useState)(!1),[M,P]=(0,f.useState)({api_key:"",api_secret:"",access_token:"",access_token_secret:"",bearer_token:""}),[z,R]=(0,f.useState)("Hello from Gemnar! \uD83D\uDE80 Testing our Twitter integration. #SocialMediaManagement");(0,f.useEffect)(()=>{F()},[s]);let F=async()=>{try{let e,t=w();if(!t){console.warn("No auth token found, using fallback"),x({id:4,name:s,slug:s,has_twitter_config:!1,description:"Mock brand for ".concat(s)}),v(!1);return}let a=await fetch("http://localhost:8000/api/brands/".concat(s,"/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(t)}});if(a.ok?e=await a.json():(console.warn("Django API not available, using mock data"),e={id:1,name:s,slug:s,has_twitter_config:!1,description:"Mock brand for ".concat(s)}),x(e),e.has_twitter_config&&e.id)try{let s=await fetch("http://localhost:8000/api/brands/".concat(e.id,"/twitter/config/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(t)}});if(s.ok){let e=await s.json();j(e),P({api_key:e.api_key||"",api_secret:e.api_secret||"",access_token:e.access_token||"",access_token_secret:e.access_token_secret||"",bearer_token:e.bearer_token||""})}}catch(e){console.error("Failed to load Twitter config:",e)}}catch(e){console.error("Failed to load data:",e),b.oR.error("Failed to load Twitter configuration")}finally{v(!1)}},E=async e=>{if(e.preventDefault(),o){if(!M.api_key.trim()||!M.api_secret.trim())return void b.oR.error("API Key and Secret are required");A(!0);try{let e=w();if(!e)throw Error("Not authenticated. Please log in.");let t=await fetch("http://localhost:8000/api/brands/".concat(o.id,"/twitter/config/save/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(M)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to save configuration")}let s=await t.json();b.oR.success(s.message||"Twitter configuration saved successfully"),x(e=>e?{...e,has_twitter_config:!0}:null),s.username&&j(e=>({...e,username:s.username}))}catch(e){console.error("Failed to save Twitter config:",e),b.oR.error(e.message||"Failed to save configuration")}finally{A(!1)}}},D=async()=>{if(o){_(!0);try{let e=w();if(!e)throw Error("Not authenticated. Please log in.");let t=await fetch("http://localhost:8000/api/brands/".concat(o.id,"/twitter/test/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}),s=await t.json();s.success?(b.oR.success("✅ Connection successful! Authenticated as @".concat(s.username)),j(e=>({...e,username:s.username}))):b.oR.error("❌ Connection failed: ".concat(s.error))}catch(e){console.error("Failed to test connection:",e),b.oR.error(e.message||"Failed to test connection")}finally{_(!1)}}},I=async()=>{if(o){if(!z.trim())return void b.oR.error("Tweet content is required");if(z.length>280)return void b.oR.error("Tweet is too long (max 280 characters)");_(!0);try{let e=w();if(!e)throw Error("Not authenticated. Please log in.");let t=await fetch("http://localhost:8000/api/brands/".concat(o.id,"/twitter/test-tweet/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify({content:z})}),s=await t.json();s.success?(b.oR.success("✅ Tweet sent successfully! View it: ".concat(s.tweet_url||"on Twitter")),S(!1)):"authorization"===s.error_type?b.oR.error("❌ Tweet failed: Authorization error\n\n\uD83D\uDD27 Solution: Check your API credentials and permissions"):"access_level"===s.error_type?b.oR.error("❌ ".concat(s.error,"\n\n\uD83D\uDD27 Solution: Upgrade your Twitter API access level to Basic or higher")):b.oR.error("❌ Tweet failed: ".concat(s.error))}catch(e){console.error("Failed to send test tweet:",e),b.oR.error(e.message||"Failed to send tweet")}finally{_(!1)}}},q=async()=>{if(o&&confirm("Are you sure you want to disconnect Twitter? This will remove all Twitter configuration."))try{let e=w();if(!e)throw Error("Not authenticated. Please log in.");let t=await fetch("http://localhost:8000/api/brands/".concat(o.id,"/twitter/disconnect/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to disconnect Twitter")}let s=await t.json();b.oR.success(s.message||"Twitter disconnected successfully"),j(null),x(e=>e?{...e,has_twitter_config:!1}:null),P({api_key:"",api_secret:"",access_token:"",access_token_secret:"",bearer_token:""})}catch(e){console.error("Failed to disconnect Twitter:",e),b.oR.error(e.message||"Failed to disconnect")}};return k?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):o?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)(g(),{href:"/dashboard/brands/".concat(o.slug),className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:(0,a.jsx)(r.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)(n.A,{className:"w-8 h-8 text-blue-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Twitter Configuration"}),(0,a.jsxs)("p",{className:"text-gray-400",children:["Connect ",o.name," to Twitter for automated posting"]})]})]}),o.has_twitter_config&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:D,disabled:N,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[N?(0,a.jsx)(i,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(l.A,{className:"w-4 h-4"}),"Test Connection"]}),(0,a.jsxs)("button",{onClick:()=>S(!0),disabled:N,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[(0,a.jsx)(c,{className:"w-4 h-4"}),"Test Tweet"]})]})]}),(0,a.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(o.has_twitter_config?"bg-green-500/20":"bg-red-500/20"),children:o.has_twitter_config?(0,a.jsx)(d.A,{className:"w-6 h-6 text-green-400"}):(0,a.jsx)(h.A,{className:"w-6 h-6 text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:o.has_twitter_config?"Connected":"Not Connected"}),(0,a.jsx)("p",{className:"text-gray-400",children:o.has_twitter_config?"Twitter is connected and ready for posting".concat((null==y?void 0:y.username)?" as @".concat(y.username):""):"Connect your Twitter account to start posting"})]})]}),o.has_twitter_config&&(0,a.jsx)("button",{onClick:q,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Disconnect"})]})}),(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)(u,{className:"w-6 h-6 text-purple-400"}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"API Configuration"})]}),(0,a.jsx)("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-blue-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-blue-400 mb-1",children:"How to get Twitter API keys"}),(0,a.jsxs)("ol",{className:"text-sm text-blue-300 space-y-1 list-decimal list-inside",children:[(0,a.jsxs)("li",{children:["Visit the ",(0,a.jsx)("a",{href:"https://developer.twitter.com",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-200",children:"Twitter Developer Portal"})]}),(0,a.jsx)("li",{children:"Create a new app or use an existing one"}),(0,a.jsx)("li",{children:"Generate API keys and access tokens"}),(0,a.jsx)("li",{children:'Make sure your app has "Read and Write" permissions'}),(0,a.jsx)("li",{children:'For posting tweets, you need at least "Basic" access level'})]})]})]})}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"API Key *"}),(0,a.jsx)("input",{type:"text",value:M.api_key,onChange:e=>P({...M,api_key:e.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Your Twitter API Key",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"API Secret *"}),(0,a.jsx)("input",{type:"password",value:M.api_secret,onChange:e=>P({...M,api_secret:e.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Your Twitter API Secret",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Access Token"}),(0,a.jsx)("input",{type:"text",value:M.access_token,onChange:e=>P({...M,access_token:e.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Your Access Token (for posting)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Access Token Secret"}),(0,a.jsx)("input",{type:"password",value:M.access_token_secret,onChange:e=>P({...M,access_token_secret:e.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Your Access Token Secret"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Bearer Token (Optional)"}),(0,a.jsx)("input",{type:"text",value:M.bearer_token,onChange:e=>P({...M,bearer_token:e.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Your Bearer Token (for reading data)"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-6",children:[(0,a.jsxs)("button",{type:"submit",disabled:T,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 disabled:opacity-50 text-white font-medium py-3 px-6 rounded-lg transition-opacity flex items-center gap-2",children:[T?(0,a.jsx)(i,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(m.A,{className:"w-4 h-4"}),T?"Saving...":"Save Configuration"]}),o.has_twitter_config&&(0,a.jsxs)("button",{type:"button",onClick:D,disabled:N,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center gap-2",children:[N?(0,a.jsx)(i,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(l.A,{className:"w-4 h-4"}),"Test Connection"]})]})]})]}),o.has_twitter_config&&(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)("button",{onClick:()=>S(!0),className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),"Send Test Tweet"]}),(0,a.jsxs)(g(),{href:"/dashboard/brands/".concat(o.slug,"/twitter"),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),"View Tweet Queue"]}),(0,a.jsx)(g(),{href:"/dashboard/brands/".concat(o.slug,"/analytics"),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"View Analytics"})]})]}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-md border border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Send Test Tweet"}),(0,a.jsx)("button",{onClick:()=>S(!1),className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tweet Content"}),(0,a.jsx)("textarea",{value:z,onChange:e=>R(e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 h-24 resize-none",placeholder:"What's happening?",maxLength:280}),(0,a.jsx)("div",{className:"flex justify-between items-center mt-2",children:(0,a.jsxs)("span",{className:"text-sm ".concat(z.length>280?"text-red-400":"text-gray-400"),children:[280-z.length," characters remaining"]})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>S(!1),className:"flex-1 py-2 px-4 border border-white/10 rounded-lg hover:bg-white/5 transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{onClick:I,disabled:N||z.length>280||!z.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 py-2 px-4 rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:[N?(0,a.jsx)(i,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(p.A,{className:"w-4 h-4"}),N?"Sending...":"Send Tweet"]})]})]})]})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Brand not found"}),(0,a.jsx)(g(),{href:"/dashboard/brands",className:"text-blue-400 hover:underline",children:"← Back to Brands"})]})}},89559:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},93299:(e,t,s)=>{Promise.resolve().then(s.bind(s,59880))},97378:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])}},e=>{e.O(0,[297,8720,8441,1255,7358],()=>e(e.s=93299)),_N_E=e.O()}]);