(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9305],{10308:(e,t,a)=>{"use strict";a.d(t,{J:()=>s});var r=a(12115),n=a(47886);function s(){let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{!async function(){try{let e=await (0,n.HW)();if(e){let a=[e.first_name,e.last_name].filter(Boolean).join(" ");t({id:e.id.toString(),email:e.email,name:a||e.username,username:e.username,first_name:e.first_name,last_name:e.last_name})}}catch(e){console.error("Error fetching user:",e)}finally{s(!1)}}()},[]),e}},11920:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var r=a(95155),n=a(12115),s=a(52619),i=a.n(s),o=a(20063),l=a(10308),c=a(47886),d=a(91910),u=a(54218),h=a(35299),m=a(65993),f=a(15530),p=a(53854),x=a(19408),g=a(16485),b=a(1524),v=a(15870),w=a(89715),j=a(67161),y=a(80534),A=a(7569),N=a(91761),S=a(61194),k=a(91169),_=a(37586),C=a(50069),H=a(86651),T=a(97378),E=a(65229),P=a(9540),U=a(18720);function z(e){var t;let{children:a}=e,[s,z]=(0,n.useState)(!1),[L,M]=(0,n.useState)(!1),[R,q]=(0,n.useState)(!1),[O,D]=(0,n.useState)(null),[W,B]=(0,n.useState)([]),[J,K]=(0,n.useState)(!0),Q=(0,o.usePathname)(),G=(0,o.useRouter)(),$=(0,l.J)(),[V,Y]=(0,n.useState)(!1),[Z,X]=(0,n.useState)(null);if((0,n.useEffect)(()=>{!async function(){"/feed"===Q||/^\/flow-generator\/[a-f0-9-]{8,}/.test(Q)||/^\/users\/\d+/.test(Q)||await (0,c.HW)()?Y(!0):G.push("/login?redirect=".concat(encodeURIComponent(Q)))}()},[Q,G]),(0,n.useEffect)(()=>{!async function(){if($)try{let e=await d.i.getCurrentProfile();X(e)}catch(e){console.error("Failed to load profile:",e)}}()},[$]),(0,n.useEffect)(()=>{!async function(){if($&&V)try{let e=await fetch("/api/brands/");if(e.ok){let t=await e.json();B(t)}else console.warn("Django API not available, using mock brands data"),B([{id:1,name:"gemnarr",slug:"gemnarr",has_twitter_config:!1},{id:2,name:"nn",slug:"nn",has_twitter_config:!1}])}catch(e){console.error("Failed to load brands:",e),B([{id:1,name:"gemnarr",slug:"gemnarr",has_twitter_config:!1},{id:2,name:"nn",slug:"nn",has_twitter_config:!1}])}finally{K(!1)}}()},[$,V]),!V)return(0,r.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(h.A,{className:"w-8 h-8 text-purple-500 animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Loading..."})]})});let ee={username:(null==$?void 0:$.name)||(null==$||null==(t=$.email)?void 0:t.split("@")[0])||"User",plan:"Pro Plan",avatar:((null==$?void 0:$.name)||(null==$?void 0:$.email)||"U").substring(0,2).toUpperCase()},et=[{name:"Home",href:"/dashboard",icon:m.A},{name:"Feed",href:"/feed",icon:f.A},{name:"Flow Generator",href:"/flow-generator",icon:p.A},{name:"Brands",href:"/dashboard/brands",icon:x.A}],ea=W.some(e=>e.has_twitter_config),er=ea?[{name:"Tweet Queue",href:"/dashboard/twitter/queue",icon:g.A},{name:"Analytics",href:"/dashboard/twitter/analytics",icon:b.A},{name:"Configuration",href:"/dashboard/twitter/config",icon:v.A},{name:"History",href:"/dashboard/twitter/history",icon:w.A}]:[{name:"Setup Required",href:"/dashboard/twitter/config",icon:v.A}],en=[{name:"Post Queue",href:"/dashboard/instagram/queue",icon:g.A},{name:"Connect",href:"/dashboard/instagram/connect",icon:j.A}],es=[{name:"Dashboard",href:"/dashboard/crm",icon:y.A},{name:"Companies",href:"/dashboard/crm/companies",icon:x.A},{name:"Contacts",href:"/dashboard/crm/contacts",icon:A.A},{name:"Deals",href:"/dashboard/crm/deals",icon:N.A},{name:"Tasks",href:"/dashboard/crm/tasks",icon:S.A},{name:"Reports",href:"/dashboard/crm/reports",icon:w.A}],ei=[{name:"Dashboard",href:"/dashboard/analytics",icon:y.A},{name:"Pages",href:"/dashboard/analytics/pages",icon:w.A},{name:"Events",href:"/dashboard/analytics/events",icon:b.A},{name:"Sessions",href:"/dashboard/analytics/sessions",icon:k.A}],eo=[{name:"Active Tasks",href:"/dashboard/tasks",icon:S.A},{name:"All Tasks",href:"/dashboard/tasks/all",icon:w.A},{name:"Create Task",href:"/dashboard/tasks/create",icon:g.A}],el=[{name:"Messages",href:"/dashboard/chat",icon:_.A},{name:"Conversations",href:"/dashboard/chat/conversations",icon:k.A}],ec=[{name:"Profile",href:"/dashboard/profile",icon:C.A}],ed=e=>Q===e;return(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white flex relative",children:[(0,r.jsx)(U.l$,{position:"bottom-right"}),s&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>z(!1)}),(0,r.jsxs)("aside",{onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),className:"\n          fixed top-4 bottom-4 left-4 z-50\n          transform transition-all duration-300 ease-in-out\n          rounded-3xl overflow-hidden\n          shadow-[ -18px_0_30px_rgba(255,255,255,0.37),\n                   18px_0_30px_rgba(255,255,255,0.37),\n                   0_0_45px_rgba(0,0,0,0.25) ]\n          ".concat(s?"translate-x-0 w-64":"-translate-x-full lg:translate-x-0","\n          ").concat(!s&&"lg:w-16 lg:hover:w-64","\n        "),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-[#131317]/95 via-[#101014]/90 to-[#060608]/95 backdrop-blur-2xl"}),(0,r.jsx)("div",{className:"absolute inset-0 ring-1 ring-white/10 rounded-3xl"}),(0,r.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.06),transparent_70%)]"}),(0,r.jsxs)("div",{className:"relative flex flex-col h-full p-4",children:[(0,r.jsx)(i(),{href:"/dashboard/profile",className:"flex items-center transition-all group rounded-xl hover:bg-white/5 ".concat(L?"justify-between p-3":"justify-center p-2"),children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,r.jsx)(u.H,{user:Z,size:"md",className:"flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-left leading-tight transition-all duration-300 opacity-100 w-auto",children:[(0,r.jsx)("div",{className:"text-sm font-medium whitespace-nowrap",children:ee.username}),(0,r.jsx)("div",{className:"text-xs text-gray-400 whitespace-nowrap",children:ee.plan})]})]}),(0,r.jsx)(C.A,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-300 transition-all duration-300 flex-shrink-0 opacity-100"})]}):(0,r.jsx)(u.H,{user:Z,size:"md",className:"flex-shrink-0"})}),(0,r.jsxs)("div",{className:"relative mt-5 transition-all duration-300 ".concat(L?"opacity-100":"lg:opacity-0 lg:h-0 lg:mt-0 lg:overflow-hidden"),children:[(0,r.jsx)(H.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,r.jsx)("input",{type:"text",placeholder:"Search",className:"w-full bg-white/5 border border-white/10 rounded-xl pl-10 pr-4 py-2 text-sm   focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,r.jsxs)("nav",{className:"flex-1 mt-6 overflow-y-auto space-y-7 scrollbar-hide hover:scrollbar-show",children:[(0,r.jsx)(F,{label:"MAIN MENU",items:et,isActive:ed,sidebarHovered:L}),(0,r.jsx)(I,{label:"SOCIALS",icon:T.A,subSections:[{label:ea?"Twitter":"Twitter (Setup Required)",items:er,needsSetup:!ea},{label:"Instagram",items:en}],isActive:ed,hoveredSection:O,setHoveredSection:D,sidebarHovered:L}),(0,r.jsx)(I,{label:"CRM",icon:x.A,subSections:[{label:"CRM",items:es}],isActive:ed,hoveredSection:O,setHoveredSection:D,sidebarHovered:L}),(0,r.jsx)(I,{label:"ANALYTICS",icon:y.A,subSections:[{label:"Analytics",items:ei}],isActive:ed,hoveredSection:O,setHoveredSection:D,sidebarHovered:L}),(0,r.jsx)(I,{label:"TASKS",icon:S.A,subSections:[{label:"Tasks",items:eo}],isActive:ed,hoveredSection:O,setHoveredSection:D,sidebarHovered:L}),(0,r.jsx)(I,{label:"CHAT",icon:_.A,subSections:[{label:"Chat",items:el}],isActive:ed,hoveredSection:O,setHoveredSection:D,sidebarHovered:L}),(0,r.jsx)(I,{label:"SETTINGS",icon:v.A,subSections:[{label:"Settings",items:ec}],isActive:ed,hoveredSection:O,setHoveredSection:D,sidebarHovered:L})]})]})]}),(0,r.jsx)("main",{className:"flex-1 p-8 mt-4 transition-all duration-300 ".concat(L?"lg:ml-72":"lg:ml-20"),children:a}),(0,r.jsx)("button",{onClick:()=>z(!s),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white/10 backdrop-blur-xl rounded-xl",children:s?(0,r.jsx)(E.A,{className:"w-6 h-6"}):(0,r.jsx)(P.A,{className:"w-6 h-6"})})]})}function F(e){let{label:t,items:a,isActive:n,sidebarHovered:s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-[10px] font-semibold text-gray-500 uppercase mb-2 tracking-wider transition-all duration-300 ".concat(s?"opacity-100":"lg:opacity-0 lg:h-0 lg:mb-0 lg:overflow-hidden"),children:t}),(0,r.jsx)("div",{className:"space-y-1",children:a.map(e=>{let t=e.icon;return(0,r.jsxs)(i(),{href:e.href,title:s?void 0:e.name,className:"\n                flex items-center transition-all relative group/item\n                ".concat(s?"gap-3 px-3 py-2":"justify-center p-2"," \n                rounded-lg text-sm\n                ").concat(n(e.href)?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-white","\n              "),children:[(0,r.jsx)(t,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsx)("span",{className:"transition-all duration-300 whitespace-nowrap ".concat(s?"opacity-100 w-auto":"lg:opacity-0 lg:w-0 lg:overflow-hidden"),children:e.name}),!s&&(0,r.jsx)("div",{className:"hidden lg:block absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap opacity-0 group-hover/item:opacity-100 pointer-events-none transition-opacity z-50",children:e.name})]},e.name)})})]})}function I(e){let{label:t,icon:a,subSections:n,isActive:s,hoveredSection:o,setHoveredSection:l,sidebarHovered:c}=e,d=o===t&&c;return(0,r.jsx)("div",{className:"relative",onMouseEnter:()=>c&&l(t),onMouseLeave:()=>l(null),children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:t}),(0,r.jsx)(a,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"})]}),(0,r.jsx)("div",{className:"\n              overflow-hidden transition-all duration-300 ease-in-out\n              ".concat(d?"max-h-96 opacity-100":"max-h-0 opacity-0","\n            "),children:(0,r.jsx)("div",{className:"space-y-4 pl-2 border-l border-white/10",children:n.map(e=>(0,r.jsxs)("div",{children:[n.length>1&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1 pl-2",children:[(0,r.jsx)("h4",{className:"text-[9px] font-semibold text-gray-600 uppercase tracking-wider",children:e.label}),e.needsSetup&&(0,r.jsx)("span",{className:"text-[8px] px-1.5 py-0.5 bg-yellow-500/20 text-yellow-400 rounded-full",children:"SETUP"})]}),(0,r.jsx)("div",{className:"space-y-1",children:e.items.map(e=>{let t=e.icon;return(0,r.jsxs)(i(),{href:e.href,className:"\n                            flex items-center gap-3 px-3 py-2 rounded-lg text-sm\n                            transition-all\n                            ".concat(s(e.href)?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-white","\n                          "),children:[(0,r.jsx)(t,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsx)("span",{className:"whitespace-nowrap",children:e.name})]},e.name)})})]},e.label))})})]}):(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)("div",{className:"relative group/section",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg hover:bg-white/5 cursor-pointer flex items-center justify-center",children:(0,r.jsx)(a,{className:"w-5 h-5 text-gray-400"})}),(0,r.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap opacity-0 group-hover/section:opacity-100 pointer-events-none transition-opacity z-50 top-1/2 -translate-y-1/2",children:t})]})})})}},47886:(e,t,a)=>{"use strict";a.d(t,{HW:()=>n,iD:()=>s});let r="http://127.0.0.1:8000";async function n(){try{let e=localStorage.getItem("auth_token");if(!e)return null;let t=await fetch("".concat(r,"/api/auth/me/"),{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}});if(!t.ok)return(401===t.status||403===t.status)&&localStorage.removeItem("auth_token"),null;return await t.json()}catch(e){return console.error("Error fetching current user:",e),null}}async function s(e){try{var t,a;let n=await fetch("".concat(r,"/api/auth/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){let e=await n.json();return{user:null,error:(null==(t=e.non_field_errors)?void 0:t[0])||e.detail||"Login failed"}}let s=await n.json();return s.token&&(a=s.token,localStorage.setItem("auth_token",a)),{user:s.user||null,error:null}}catch(e){return console.error("Login error:",e),{user:null,error:"An unexpected error occurred"}}}},48493:(e,t,a)=>{"use strict";a.d(t,{BK:()=>o,eu:()=>i,q5:()=>l});var r=a(95155);a(12115);var n=a(63366),s=a(64269);function i(e){let{className:t,...a}=e;return(0,r.jsx)(n.bL,{"data-slot":"avatar",className:(0,s.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)(n._V,{"data-slot":"avatar-image",className:(0,s.cn)("aspect-square size-full",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)(n.H4,{"data-slot":"avatar-fallback",className:(0,s.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...a})}},54218:(e,t,a)=>{"use strict";a.d(t,{H:()=>i});var r=a(95155),n=a(48493);let s={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg",xl:"w-24 h-24 text-2xl"};function i(e){let{user:t,size:a="md",className:i=""}=e;return(0,r.jsxs)(n.eu,{className:"".concat(s[a]," ").concat(i),children:[(null==t?void 0:t.profile_picture)&&(0,r.jsx)(n.BK,{src:t.profile_picture,alt:t.username||"User"}),(0,r.jsx)(n.q5,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white font-bold",children:(()=>{if(null==t?void 0:t.first_name){var e,a,r;return((null==(e=t.first_name[0])?void 0:e.toUpperCase())||"")+((null==(r=t.last_name)||null==(a=r[0])?void 0:a.toUpperCase())||"")}return(null==t?void 0:t.username)?t.username.substring(0,2).toUpperCase():(null==t?void 0:t.email)?t.email.substring(0,2).toUpperCase():"U"})()})]})}},64269:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i,cn:()=>s});var r=a(2821),n=a(75889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}},91910:(e,t,a)=>{"use strict";a.d(t,{i:()=>i});let r="http://127.0.0.1:8000";function n(){return localStorage.getItem("auth_token")}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n();console.log("[fetchWithAuth] Token:",a?"present":"missing"),console.log("[fetchWithAuth] URL:",e);let r={"Content-Type":"application/json",...a&&{Authorization:"Token ".concat(a)},...t.headers};return console.log("[fetchWithAuth] Headers:",r),await fetch(e,{...t,headers:r})}let i={async getCurrentProfile(){let e=await s("".concat(r,"/api/users/profile/"));if(!e.ok)throw Error((await e.json().catch(()=>({detail:"Failed to get profile"}))).detail||"Failed to get profile");return await e.json()},async getProfile(e){let t=await fetch("".concat(r,"/api/users/").concat(e,"/profile/"));if(!t.ok)throw Error((await t.json().catch(()=>({detail:"User not found"}))).detail||"User not found");return await t.json()},async updateProfile(e){let t=await s("".concat(r,"/api/users/profile/"),{method:"PATCH",body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to update profile"}))).detail||"Failed to update profile");return await t.json()},async uploadProfilePicture(e){let t=n(),a=new FormData;a.append("image",e),a.append("purpose","other");let s=await fetch("".concat(r,"/api/users/upload-image/"),{method:"POST",headers:{...t&&{Authorization:"Token ".concat(t)}},body:a});if(!s.ok)throw Error((await s.json().catch(()=>({error:"Failed to upload image"}))).error||"Failed to upload image");return{url:(await s.json()).url}}}},98866:(e,t,a)=>{Promise.resolve().then(a.bind(a,11920))}},e=>{e.O(0,[297,8720,9335,9209,8441,1255,7358],()=>e(e.s=98866)),_N_E=e.O()}]);