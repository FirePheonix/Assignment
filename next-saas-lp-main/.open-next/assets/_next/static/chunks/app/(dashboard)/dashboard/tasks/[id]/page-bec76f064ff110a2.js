(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8206],{18085:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},20508:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},26983:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},34845:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(95155),r=t(35299),l=t(90368),i=t(6132),n=t(42529),c=t(20508),d=t(16485),o=t(45345),x=t(91761),m=t(26983),h=t(18085),p=t(61194),u=t(78874),b=t(12115),g=t(20063),j=t(48429),N=t(47886);function f(){var e;let s=(0,g.useRouter)(),t=(0,g.useParams)(),f=t.id?parseInt(t.id):null,[y,v]=(0,b.useState)(null),[w,k]=(0,b.useState)(null),[A,_]=(0,b.useState)([]),[C,S]=(0,b.useState)(!0),[E,T]=(0,b.useState)(null),[D,I]=(0,b.useState)(!1),[P,z]=(0,b.useState)(!1),[L,R]=(0,b.useState)(""),[M,O]=(0,b.useState)(!1);async function B(){S(!0),T(null);let e=await (0,N.HW)();if(v(e),!f){T("Invalid task ID"),S(!1);return}let{data:s,error:t}=await (0,j.gg)(f);if(t){T(t),S(!1);return}if(s&&(k(s),e&&s.brand===e.id)){let{data:e}=await (0,j.dY)(f);e&&_(e.applications)}S(!1)}async function F(e){if(e.preventDefault(),!f)return;I(!0),T(null);let{data:s,error:t}=await (0,j.Z1)(f,L);if(t){T(t),I(!1);return}s&&(z(!0),O(!1),R(""),setTimeout(()=>{B(),z(!1)},2e3)),I(!1)}async function G(e,s){let{data:t,error:a}=await (0,j.C)(e,s);if(a)return void T(a);t&&B()}(0,b.useEffect)(()=>{f&&B()},[f]);let H=y&&w&&w.brand===y.id,q=null==w?void 0:w.user_has_applied;return C?(0,a.jsx)("div",{className:"p-8 bg-black min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.A,{className:"w-8 h-8 text-purple-500 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading task details..."})]})}):E||!w?(0,a.jsxs)("div",{className:"p-8 bg-black min-h-screen",children:[(0,a.jsx)("div",{className:"background-pattern-blue"}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto relative z-10",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/dashboard/tasks"),className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[(0,a.jsx)(l.A,{className:"w-5 h-5"}),"Back to Tasks"]}),(0,a.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-8 text-center",children:[(0,a.jsx)(i.A,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Task Not Found"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:E||"The task you're looking for doesn't exist."}),(0,a.jsx)("button",{onClick:()=>s.push("/dashboard/tasks"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"View All Tasks"})]})]})]}):(0,a.jsxs)("div",{className:"p-8 bg-black min-h-screen",children:[(0,a.jsx)("div",{className:"background-pattern-blue"}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto relative z-10",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/dashboard/tasks"),className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[(0,a.jsx)(l.A,{className:"w-5 h-5"}),"Back to Tasks"]}),P&&(0,a.jsx)("div",{className:"mb-6 bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-green-400"}),(0,a.jsx)("p",{className:"text-green-400 font-medium",children:"Application submitted successfully!"})]})}),E&&!P&&(0,a.jsx)("div",{className:"mb-6 bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("p",{className:"text-red-400 font-medium",children:E})]})}),(0,a.jsxs)("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-xl p-8 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-3",children:w.title}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Posted by ",w.brand_username]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(w.created_at).toLocaleDateString()})]})]})]}),!w.is_active&&(0,a.jsx)("div",{className:"px-3 py-1 bg-red-500/10 border border-red-500/30 rounded-lg",children:(0,a.jsx)("span",{className:"text-red-400 text-sm font-medium",children:"Inactive"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-black/50 border border-white/5 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Category"})]}),(0,a.jsx)("p",{className:"text-white font-medium",children:j.Bi[w.category]})]}),(0,a.jsxs)("div",{className:"bg-black/50 border border-white/5 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Genre"})]}),(0,a.jsx)("p",{className:"text-white font-medium",children:j.AI[w.genre]})]}),(0,a.jsxs)("div",{className:"bg-black/50 border border-white/5 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Incentive"})]}),(0,a.jsx)("p",{className:"text-white font-medium",children:"PAY"===(e=w).incentive_type&&e.pay_amount?"$".concat(e.pay_amount):"COMMISSION"===e.incentive_type&&e.commission_percentage?"".concat(e.commission_percentage,"% Commission"):"GIFT_CARD"===e.incentive_type&&e.gift_card_amount?"$".concat(e.gift_card_amount," Gift Card"):j.Ql[e.incentive_type]})]})]}),w.deadline&&(0,a.jsx)("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 text-purple-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Deadline"}),(0,a.jsx)("p",{className:"text-white font-medium",children:(e=>{if(!e)return"No deadline";let s=new Date(e),t=new Date,a=Math.ceil((s.getTime()-t.getTime())/864e5);return a<0?"Overdue":0===a?"Today":1===a?"Tomorrow":"".concat(s.toLocaleDateString()," (").concat(a," days)")})(w.deadline)})]})]})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:w.description})]}),"BARTER"===w.incentive_type&&w.barter_details&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Barter Details"}),(0,a.jsx)("p",{className:"text-gray-300",children:w.barter_details})]}),"EXPERIENCE"===w.incentive_type&&w.experience_details&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Experience Details"}),(0,a.jsx)("p",{className:"text-gray-300",children:w.experience_details})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 pt-6 border-t border-white/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Total Applications"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:w.application_count})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Accepted"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-400",children:w.accepted_applications_count})]})]})]}),!H&&y&&w.is_active&&(0,a.jsxs)("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-xl p-8 mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Apply for This Task"}),q?(0,a.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-green-400"}),(0,a.jsx)("p",{className:"text-green-400 font-medium",children:"You have already applied for this task"})]})}):M?(0,a.jsxs)("form",{onSubmit:F,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Application Message"}),(0,a.jsx)("textarea",{value:L,onChange:e=>R(e.target.value),className:"w-full p-3 bg-black border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-[120px]",placeholder:"Explain why you're a good fit for this task...",required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"submit",disabled:D,className:"flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-600/50 text-white rounded-lg transition-colors",children:D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Submit Application"]})}),(0,a.jsx)("button",{type:"button",onClick:()=>O(!1),className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"})]})]}):(0,a.jsxs)("button",{onClick:()=>O(!0),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Apply Now"]})]}),H&&A.length>0&&(0,a.jsxs)("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-xl p-8",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-white mb-6",children:["Applications (",A.length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,a.jsxs)("div",{className:"bg-black/50 border border-white/5 rounded-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("p",{className:"text-white font-semibold",children:e.creator_username}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("ACCEPTED"===e.status?"bg-green-500/10 text-green-400 border border-green-500/30":"REJECTED"===e.status?"bg-red-500/10 text-red-400 border border-red-500/30":"bg-yellow-500/10 text-yellow-400 border border-yellow-500/30"),children:e.status})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.creator_email}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Applied ",new Date(e.applied_at).toLocaleDateString()]})]})}),(0,a.jsx)("p",{className:"text-gray-300 mb-4",children:e.message}),"PENDING"===e.status&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>G(e.id,"ACCEPTED"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm",children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),"Accept"]}),(0,a.jsxs)("button",{onClick:()=>G(e.id,"REJECTED"),className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),"Reject"]})]})]},e.id))})]}),H&&0===A.length&&(0,a.jsx)("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-400",children:"No applications yet"})})]})]})}},47886:(e,s,t)=>{"use strict";t.d(s,{HW:()=>r,iD:()=>l});let a="http://127.0.0.1:8000";async function r(){try{let e=localStorage.getItem("auth_token");if(!e)return null;let s=await fetch("".concat(a,"/api/auth/me/"),{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}});if(!s.ok)return(401===s.status||403===s.status)&&localStorage.removeItem("auth_token"),null;return await s.json()}catch(e){return console.error("Error fetching current user:",e),null}}async function l(e){try{var s,t;let r=await fetch("".concat(a,"/api/auth/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();return{user:null,error:(null==(s=e.non_field_errors)?void 0:s[0])||e.detail||"Login failed"}}let l=await r.json();return l.token&&(t=l.token,localStorage.setItem("auth_token",t)),{user:l.user||null,error:null}}catch(e){return console.error("Login error:",e),{user:null,error:"An unexpected error occurred"}}}},61194:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},65262:(e,s,t)=>{Promise.resolve().then(t.bind(t,34845))},78874:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},90368:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},e=>{e.O(0,[3005,8441,1255,7358],()=>e(e.s=65262)),_N_E=e.O()}]);