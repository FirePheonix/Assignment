(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8248],{20063:(e,a,t)=>{"use strict";var r=t(47260);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},53221:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var r=t(95155),n=t(12115),s=t(20063),o=t(18720),c=t(67161);function i(){let e=(0,s.useRouter)(),a=(0,s.useSearchParams)();return(0,n.useEffect)(()=>{let t=a.get("success"),r=a.get("error");if(window.opener&&window.parent!==window){var n,s;if("true"===t){null==(n=window.opener)||n.postMessage({type:"INSTAGRAM_OAUTH_SUCCESS"},window.location.origin),window.close();return}if(r){null==(s=window.opener)||s.postMessage({type:"INSTAGRAM_OAUTH_ERROR",error:r},window.location.origin),window.close();return}}if("true"===t)o.oR.success("Instagram account connected successfully!"),setTimeout(()=>{if(localStorage.getItem("instagram_connecting_brand_id")){localStorage.removeItem("instagram_connecting_brand_id");let a=localStorage.getItem("instagram_connecting_brand_slug");a?(localStorage.removeItem("instagram_connecting_brand_slug"),e.push("/dashboard/brands/".concat(a,"/instagram?refresh=true"))):e.push("/dashboard/brands")}else e.push("/dashboard/brands")},1e3);else if(r){let a="Failed to connect Instagram account";switch(r){case"missing_params":a="Missing required parameters from Instagram";break;case"invalid_state":a="Invalid authentication state. Please try again.";break;case"token_exchange_failed":a="Failed to exchange authorization code for token";break;case"no_pages":a="No Facebook pages found. Make sure you have a Facebook page connected.";break;case"no_instagram_account":a="No Instagram Business Account linked to your Facebook page";break;case"api_request_failed":a="API request failed. Please try again.";break;case"brand_not_found":a="Brand not found. Please contact support.";break;default:a="Connection failed: ".concat(r)}if(o.oR.error(a),localStorage.getItem("instagram_connecting_brand_id")){localStorage.removeItem("instagram_connecting_brand_id");let a=localStorage.getItem("instagram_connecting_brand_slug");a?(localStorage.removeItem("instagram_connecting_brand_slug"),e.push("/dashboard/brands/".concat(a,"/instagram"))):e.push("/dashboard/brands")}else e.push("/dashboard/brands")}else e.push("/dashboard/brands")},[a,e]),(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-8",children:[(0,r.jsx)("div",{className:"background-pattern-blue"}),(0,r.jsxs)("div",{className:"relative z-10 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"w-8 h-8"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Processing Instagram Connection..."}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-500"}),(0,r.jsx)("span",{children:"Please wait while we complete the connection"})]})]})]})}function l(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-8",children:[(0,r.jsx)("div",{className:"background-pattern-blue"}),(0,r.jsxs)("div",{className:"relative z-10 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"w-8 h-8"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Loading..."})]})]}),children:(0,r.jsx)(i,{})})}},67161:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(71847).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},71847:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var r=t(12115);let n=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:a,...s,width:o,height:o,stroke:t,strokeWidth:i?24*Number(c)/Number(o):c,className:n("lucide",l),...m},[...u.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(d)?d:[d]])}),c=(e,a)=>{let t=(0,r.forwardRef)((t,s)=>{let{className:c,...i}=t;return(0,r.createElement)(o,{ref:s,iconNode:a,className:n("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),c),...i})});return t.displayName="".concat(e),t}},95229:(e,a,t)=>{Promise.resolve().then(t.bind(t,53221))}},e=>{e.O(0,[8720,8441,1255,7358],()=>e(e.s=95229)),_N_E=e.O()}]);